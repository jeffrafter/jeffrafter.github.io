(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{R46c:function(e,t,n){"use strict";n.r(t),n.d(t,"pageQuery",(function(){return p}));n("VRzm"),n("f3/d"),n("a1Th"),n("Btvt"),n("XfO3"),n("HEwt"),n("rGqo"),n("rE2o"),n("ioFf"),n("pIFo");var r=n("o0o1"),a=n.n(r),o=(n("ls82"),n("q1tI")),l=n.n(o),c=n("9Dj+"),i=n("RnvD");function u(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(u){return void n(u)}c.done?t(i):Promise.resolve(i).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){u(o,r,a,l,c,"next",e)}function c(e){u(o,r,a,l,c,"throw",e)}l(void 0)}))}}function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p="1228932282";t.default=function(e){var t=e.data,n=t.site.siteMetadata.title,r=t.site.siteMetadata.keywords,u=Object(o.useState)(!1),d=u[0],p=u[1],v=Object(o.useState)(!1),f=v[0],b=v[1],h=Object(o.useState)([]),g=h[0],w=h[1],y=Object(o.useState)(""),E=y[0],S=y[1],k=Object(o.useState)(""),x=k[0],j=k[1],R=Object(o.useRef)(),O=d?navigator.userAgent:"unknown";Object(o.useEffect)((function(){p(!0),R.current=function(e){var t,n,r,a,o,l,c=e.acceleration,i=e.rotationRate,u={ride:E,timestamp:Date.now(),accelX:null!==(t=null==c?void 0:c.x)&&void 0!==t?t:null,accelY:null!==(n=null==c?void 0:c.y)&&void 0!==n?n:null,accelZ:null!==(r=null==c?void 0:c.z)&&void 0!==r?r:null,rotAlpha:null!==(a=null==i?void 0:i.alpha)&&void 0!==a?a:null,rotBeta:null!==(o=null==i?void 0:i.beta)&&void 0!==o?o:null,rotGamma:null!==(l=null==i?void 0:i.gamma)&&void 0!==l?l:null,user:x,device:O};w((function(e){return[].concat(m(e),[u])}))}}),[E,x,O]);var A=function(){var e=s(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof DeviceMotionEvent.requestPermission){e.next=9;break}return e.next=3,DeviceMotionEvent.requestPermission();case 3:if("granted"===e.sent){e.next=7;break}return alert("Motion permission denied"),e.abrupt("return");case 7:e.next=11;break;case 9:return alert("Motion permission not available"),e.abrupt("return");case 11:window.addEventListener("devicemotion",R.current),b(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=["timestamp","accelX","accelY","accelZ","rotAlpha","rotBeta","rotGamma","ride","user","device"].join(","),t=g.map((function(e){return[e.timestamp,e.accelX,e.accelY,e.accelZ,e.rotAlpha,e.rotBeta,e.rotGamma,e.ride,'"'+e.user.replace(/"/g,'""')+'"','"'+e.device.replace(/"/g,'""')+'"'].join(",")}));return[e].concat(m(t)).join("\n")},D=function(){var e=s(a.a.mark((function e(){var t,n,r,o,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=M(),o=new Blob([r],{type:"text/csv"}),l=[new File([o],"motion-ride-"+E+"-"+(new Date).toISOString()+".csv",{type:"text/csv"})],!(null===(t=(n=navigator).canShare)||void 0===t?void 0:t.call(n,{files:l}))){e.next=14;break}return e.prev=4,e.next=7,navigator.share({files:l,title:"Motion Data",text:"Ride "+E+" data from "+x});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Share failed",e.t0);case 12:e.next=15;break;case 14:alert("Sharing not supported; please download instead.");case 15:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(){return e.apply(this,arguments)}}(),C=g[g.length-1];return l.a.createElement(c.a,{title:n},l.a.createElement(i.a,{title:"Measure me",keywords:r}),l.a.createElement("article",null,l.a.createElement("h2",null,"ðŸŽ¢ Motion Recorder"),l.a.createElement("label",null,"Your name:",l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:x,onChange:function(e){return j(e.target.value)}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{style:{marginTop:"1rem"}},"Ride:",l.a.createElement("br",null),l.a.createElement("input",{type:"text",value:E,onChange:function(e){return S(e.target.value)}})),l.a.createElement("p",null,l.a.createElement("button",{onClick:f?function(){window.removeEventListener("devicemotion",R.current),b(!1)}:A},f?"Stop Recording":"Start Recording"),C&&l.a.createElement(l.a.Fragment,null,l.a.createElement("br",null),l.a.createElement("pre",{style:{whiteSpace:"pre-wrap",marginTop:"1rem",fontSize:"0.6rem"}},"Accel: ",C.accelX,", ",C.accelY,", ",C.accelZ,"\n","Rot: ",C.rotAlpha,", ",C.rotBeta,", ",C.rotGamma,"\n")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){var e=M(),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="motion-data-ride-"+E+"-"+(new Date).toISOString()+".csv",r.click(),URL.revokeObjectURL(n)},disabled:0===g.length,style:{marginLeft:"1rem"}},"Download CSV"),l.a.createElement("br",null),l.a.createElement("button",{onClick:D,disabled:0===g.length,style:{marginLeft:"1rem"}},"Share CSV")),l.a.createElement("p",null,f?"Recordingâ€¦ samples collected: "+g.length:"Not recording. Total samples: "+g.length)))}}}]);
//# sourceMappingURL=component---src-pages-measure-tsx-812cff4fc3e078b55e54.js.map