<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.94a72dd1a35b17470508.css">html{box-sizing:border-box;margin:0;padding:0}*,:after,:before{box-sizing:inherit}body{margin:0!important;padding:0}a.anchor,a.anchor:hover,a.anchor:link{background:none!important}figure a.gatsby-resp-image-link{background:none}figure span.gatsby-resp-image-wrapper{max-width:100%!important}article .excerpt{display:none}.btn,.button{display:inline-block;background:none!important;border-radius:40px;line-height:40px;min-height:40px;min-width:80px;padding:0 12px;text-align:center;text-decoration:none;border:1px solid #666;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}@font-face{font-family:et-book;src:url(/et-book/et-book-roman-line-figures/et-book-roman-line-figures.eot);src:url(/et-book/et-book-roman-line-figures/et-book-roman-line-figures.eot?#iefix) format("embedded-opentype"),url(/et-book/et-book-roman-line-figures/et-book-roman-line-figures.woff) format("woff"),url(/et-book/et-book-roman-line-figures/et-book-roman-line-figures.ttf) format("truetype"),url(/et-book/et-book-roman-line-figures/et-book-roman-line-figures.svg#etbookromanosf) format("svg");font-weight:400;font-style:normal}@font-face{font-family:et-book;src:url(/et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.eot);src:url(/et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.eot?#iefix) format("embedded-opentype"),url(/et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.woff) format("woff"),url(/et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.ttf) format("truetype"),url(/et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.svg#etbookromanosf) format("svg");font-weight:400;font-style:italic}@font-face{font-family:et-book;src:url(/et-book/et-book-bold-line-figures/et-book-bold-line-figures.eot);src:url(/et-book/et-book-bold-line-figures/et-book-bold-line-figures.eot?#iefix) format("embedded-opentype"),url(/et-book/et-book-bold-line-figures/et-book-bold-line-figures.woff) format("woff"),url(/et-book/et-book-bold-line-figures/et-book-bold-line-figures.ttf) format("truetype"),url(/et-book/et-book-bold-line-figures/et-book-bold-line-figures.svg#etbookromanosf) format("svg");font-weight:700;font-style:normal}@font-face{font-family:et-book-roman-old-style;src:url(/et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.eot);src:url(/et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.eot?#iefix) format("embedded-opentype"),url(/et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.woff) format("woff"),url(/et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.ttf) format("truetype"),url(/et-book/et-book-roman-old-style-figures/et-book-roman-old-style-figures.svg#etbookromanosf) format("svg");font-weight:400;font-style:normal}html{font-size:15px}body{width:87.5%;margin-left:auto;margin-right:auto;padding-left:12.5%;font-family:et-book,Palatino,Palatino Linotype,Palatino LT STD,Book Antiqua,Georgia,serif;background-color:#fffff8;color:#111;max-width:1400px;counter-reset:sidenote-counter}h1{font-weight:400;margin-top:4rem;margin-bottom:1.5rem;font-size:3.2rem;line-height:1}h2{margin-top:2.1rem;font-size:2.2rem}h2,h3{font-style:italic;font-weight:400;margin-bottom:1.4rem;line-height:1}h3{font-size:1.7rem;margin-top:2rem}hr{display:block;height:1px;width:55%;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}p.subtitle{font-style:italic;margin-top:1rem;margin-bottom:1rem;font-size:1.8rem;display:block;line-height:1}.numeral{font-family:et-book-roman-old-style}.danger{color:red}article{position:relative;padding:1rem 0}section{padding-top:1rem;padding-bottom:1rem}ol,p,ul{font-size:1.4rem;line-height:2rem}p{margin-top:1.4rem;margin-bottom:1.4rem;padding-right:0;vertical-align:baseline}div.epigraph{margin:5em 0}div.epigraph>blockquote{margin-top:3em;margin-bottom:3em}div.epigraph>blockquote,div.epigraph>blockquote>p{font-style:italic}div.epigraph>blockquote>footer{font-style:normal}div.epigraph>blockquote>footer>cite{font-style:italic}blockquote{font-size:1.4rem}blockquote p{width:55%;margin-right:40px;font-style:italic;color:#999}blockquote footer{width:55%;font-size:1.1rem;text-align:right}section>footer,section>p,section>table{width:55%;clear:left}section>ol,section>ul{width:50%;-webkit-padding-start:5%}li:not(:first-child){margin-top:.25rem}figure{padding:0;border:0;font-size:100%;font:inherit;max-width:55%;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-after:0;margin-block-end:0;margin:0 0 3em}figcaption,figure{vertical-align:baseline}figcaption{margin-top:-2em;margin-bottom:0;font-size:1.1rem;font-style:italic;line-height:1.6;position:relative;max-width:40%}figure.fullwidth figcaption{max-width:80%}a:link,a:visited{color:inherit}a:link{text-decoration:none;background:linear-gradient(#fffff8,#fffff8),linear-gradient(#fffff8,#fffff8),linear-gradient(#333,#333);background-size:.05em 1px,.05em 1px,1px 1px;background-repeat:no-repeat,no-repeat,repeat-x;background-position:0 101%,101% 101%,0 101%}@media screen and (-webkit-min-device-pixel-ratio:0){a:link{background-position-y:101%,101%,101%}}img{max-width:100%}.sidenote{margin-bottom:2em!important}.marginnote,.sidenote{float:right;clear:right;width:50%;margin:0 -75% 0 5%;font-size:1.1rem;line-height:1.3;vertical-align:baseline;position:relative}.sidenote-number{counter-increment:sidenote-counter}.sidenote-number:after,.sidenote:before{font-family:et-book-roman-old-style;position:relative;vertical-align:baseline}.sidenote-number:after{content:counter(sidenote-counter);font-size:1rem;top:-.5rem;left:.1rem}.sidenote:before{content:counter(sidenote-counter) " ";font-size:1rem;top:-.5rem}blockquote .marginnote,blockquote .sidenote{margin-right:-82%;min-width:59%;text-align:left}div.fullwidth,table.fullwidth{width:100%}div.table-wrapper{overflow-x:auto}.sans,div.table-wrapper{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}.sans{letter-spacing:.03em}code{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:1rem;line-height:1.42}.sans>code{font-size:1.2rem}h1>code,h2>code,h3>code{font-size:.8em}.marginnote>code,.sidenote>code{font-size:1rem}pre.code{font-size:.9rem;width:52.5%;margin-left:2.5%;overflow-x:auto}pre.code.fullwidth{width:90%}.fullwidth{max-width:100%;clear:both}span.newthought{font-variant:small-caps;font-size:1.2em}input.margin-toggle{display:none}label.sidenote-number{display:inline}label.margin-toggle:not(.sidenote-number){display:none}.iframe-wrapper{position:relative;padding-bottom:56.25%;padding-top:25px;height:0}.iframe-wrapper iframe{position:absolute;top:0;left:0;width:100%;height:100%}@media (max-width:760px){body{padding-left:8%;padding-right:8%}body,hr,section>footer,section>p,section>table{width:100%}pre.code{width:97%}section>ol,section>ul{width:90%}figure{max-width:90%}figcaption,figure.fullwidth figcaption{margin-right:0;max-width:none}blockquote{margin-left:1.5em;margin-right:0}blockquote footer,blockquote p{width:100%}label.margin-toggle:not(.sidenote-number){display:inline}.marginnote,.sidenote{display:none}.margin-toggle:checked+.marginnote,.margin-toggle:checked+.sidenote{display:block;float:left;left:1rem;clear:both;width:95%;margin:1rem 2.5%;vertical-align:baseline;position:relative}label{cursor:pointer}div.table-wrapper,table{width:85%}img{width:100%}}:not(pre)>code[class*=language-]{font-size:.9em!important}.gatsby-highlight:after{content:"";display:block;clear:both}.gatsby-highlight{clear:both}.markdown-body ol,.markdown-body p,.markdown-body ul{font-size:inherit;line-height:inherit}.markdown-body blockquote{font-size:inherit}.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:24px;letter-spacing:normal;border-bottom:1px solid #efefef}@media (max-width:767px){.markdown-body{padding:15px}}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;-o-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;-o-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;-o-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;-o-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;-o-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;-o-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;-o-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;-o-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;-o-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;-o-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;-o-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;-o-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><meta name="generator" content="Gatsby 2.23.4"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://jeffrafter.com/oculus-quest/" data-baseprotocol="https:" data-basehost="jeffrafter.com"/><link rel="icon" href="/favicon-32x32.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=bddcaef8d466d0f77d76d3d885709d8f"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">Developing for the Oculus Quest | Jeff Rafter</title><meta data-react-helmet="true" name="description" content="Everyone wants to talk about consumer VR. I just want to make some games."/><meta data-react-helmet="true" property="og:title" content="Developing for the Oculus Quest"/><meta data-react-helmet="true" property="og:description" content="Everyone wants to talk about consumer VR. I just want to make some games."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image" content="https://jeffrafter.com//static/a67c3178514390aae67c935934b32bbb/9d169/oculus-quest.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Jeff Rafter"/><meta data-react-helmet="true" name="twitter:title" content="Developing for the Oculus Quest"/><meta data-react-helmet="true" name="twitter:description" content="Everyone wants to talk about consumer VR. I just want to make some games."/><meta data-react-helmet="true" name="keywords" content="oculus, quest, unity, development"/><style data-styled="coseIW ddlDEo bOnSNx gXLbcD aCPwf" data-styled-version="4.4.1">
/* sc-component-id: sc-global-3268680936 */
::selection{background-color:#dad9d9;color:rgba(0,0,0,0.70);}
/* sc-component-id: sc-bdVaJa */
.coseIW ul{list-style-type:none;margin:1rem 0;padding:0;margin-left:-16px;} .coseIW li{display:inline-block;margin:16px;} .coseIW li a{background:none;}
/* sc-component-id: sc-bwzfXH */
.aCPwf{padding-bottom:36px;}
/* sc-component-id: sc-ifAKCX */
.ddlDEo{width:55%;}
/* sc-component-id: sc-gzVnrw */
.bOnSNx{margin-top:40px;margin-bottom:40px;float:right;}
/* sc-component-id: sc-htoDjs */
.gXLbcD{list-style-type:none;} .gXLbcD li::before{content:'' !important;padding-right:0 !important;}</style><link as="script" rel="preload" href="/webpack-runtime-38c8a4ef93b968ef91ae.js"/><link as="script" rel="preload" href="/framework-8dcecaaefd71e2213eb2.js"/><link as="script" rel="preload" href="/styles-fa79fef4936efa84b233.js"/><link as="script" rel="preload" href="/app-3b271d6a60df7cd92087.js"/><link as="script" rel="preload" href="/commons-52923487d36b93dc329d.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-30b85df3d8081f386f13.js"/><link as="fetch" rel="preload" href="/page-data/oculus-quest/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><nav class="sc-bdVaJa coseIW navigation"><ul><li><a href="/">&amp;</a></li><li><a href="/tags">Tags</a></li><li><a href="/about">About</a></li></ul></nav><main class="content" role="main"><article><header><h1>Developing for the Oculus Quest</h1><p>July 25, 2019</p></header><div class="page-content"><div><section><figure class="fullwidth"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1280px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 70.3125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAByHJlgoB//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAECERAS/9oACAEBAAEFAsJ8stZSeDpvn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAQEBAQAAAAAAAAAAAAAAAAEAICH/2gAIAQEABj8CuyGP/8QAGRAAAgMBAAAAAAAAAAAAAAAAAREAEDEh/9oACAEBAAE/IcOOoIDMCgZ7X//aAAwDAQACAAMAAAAQ+/8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAECAQE/EIh//8QAHBABAAMAAgMAAAAAAAAAAAAAAQARIRAxYZGh/9oACAEBAAE/EBVw+O6IaQBcHPsUC0xioTsloXrj/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Oculus Quest with Controllers"
        title="Oculus Quest with Controllers"
        src="/static/a67c3178514390aae67c935934b32bbb/eea4a/oculus-quest.jpg"
        srcset="/static/a67c3178514390aae67c935934b32bbb/cb69c/oculus-quest.jpg 320w,
/static/a67c3178514390aae67c935934b32bbb/c08c5/oculus-quest.jpg 640w,
/static/a67c3178514390aae67c935934b32bbb/eea4a/oculus-quest.jpg 1280w"
        sizes="(max-width: 1280px) 100vw, 1280px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></figure><figcaption class="fullwidth">
Image credit: <a href="https://amzn.to/2SEOSJG">Oculus Quest on Amazon</a>
</figcaption><p>The Oculus Quest is entirely immersive and a blast to play with. Of course, the moment I put it on, I immediately wanted to make my own games and got started with Unity<label for="sd-there-are-less-than" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-there-are-less-than" class="margin-toggle" /><span class="sidenote">There are <a href="https://gametorrahod.com/objectively-comparing-unity-and-unreal-engine/">lots</a> of <a href="https://developer.oculus.com/documentation/quest/latest/concepts/book-intro/?locale=en_US">articles</a> on Unity versus Unreal versus building your own engine entirely from scratch using Oculus Native support. For me, my goal was to get something running as quickly as possible. Harder decisions later.</span>. There are a few blog posts and videos that helped me on my way.</p></section>
<section><h2 id="getting-started" style="position:relative;"><a href="#getting-started" aria-label="getting started permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h2><p>To develop for you Oculus you’ll not only need an Oculus account but you may want to setup an Oculus Organiztion (free). Additionally (for my purposes), you’ll need a Unity account. I’m using a personal account (also free).</p><h3 id="mac-versus-windows" style="position:relative;"><a href="#mac-versus-windows" aria-label="mac versus windows permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mac versus Windows</h3><p>I’m using a MacBook Pro. Many of the tutorials and videos you’ll find assume you’re working on Windows. This can create some challenges but the biggest challenges are around the platform support for the Oculus Quest itself. Oculus doesn’t make a version of it’s Oculus Desktop app (or libraries) available on MacOS. Because of this you’ll want to start with tutorials that are specific to the Mac and adjust.</p><h3 id="unity--initial-setup" style="position:relative;"><a href="#unity--initial-setup" aria-label="unity  initial setup permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unity &#x26; initial setup</h3><p>I followed a couple of tutorials for getting Unity Hub and Unity installed. I recommend:</p><ul>
<li><a href="https://medium.com/@sofaracing/how-to-develop-for-oculus-quest-on-macos-with-unity-5aa487b80d13">How to get started with Oculus Quest and Unity on macOS</a></li>
<li><a href="https://skarredghost.com/2019/06/08/how-get-started-oculus-quest-development-unity/">How to get started with Oculus Quest development in Unity</a></li>
</ul><p>If you prefer videos:</p><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/eySe4Wj6xbk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/qiJpjnzW-mw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div></section>
<section><h2 id="learn" style="position:relative;"><a href="#learn" aria-label="learn permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Learn</h2><p>Once I had the basics working, and could load games I built in Unity on my Quest, I wanted to do more. I found a set of fantastic tutorial videos by <a href="https://www.youtube.com/channel/UCPJlesN59MzHPPCp0Lg8sLw">Valem</a>, <a href="https://twitter.com/ValemVR">Quentin Valembois</a> and was hooked. As I went through the videos I took notes and (with permission) am posting those here.</p><p>While watching these videos, you might notice Valem is using the ▶ button to debug. This works because he is actually developing for the Rift in the videos (notice that the controllers are upside-down). In a later <a href="https://www.youtube.com/watch?v=LihEW5a1Tjw">video on recreating Slenderman</a> (at 1:47) he explains how to use the ▶ button while building for the Oculus Quest. Unfortunately that won’t work on MacOS because the Oculus plugin is not supported. There are notes on how to get this working at the end of this post.</p></section>
<section><h2 id="a-note-on-the-oculus-integration-asset" style="position:relative;"><a href="#a-note-on-the-oculus-integration-asset" aria-label="a note on the oculus integration asset permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A note on the Oculus Integration asset</h2><p>The Oculus Integration in the Unity Asset Store solves an amazing amount of problems for you. Unfortunately,
the updates are not necessarily backward compatible and it makes following tutorials difficult. Most
of the tutorials listed here were for the 1.38 version. The current 1.39 version requires a few more steps.</p><p>After you download and import the kit you’ll restart Unity. You should see a new menu for Oculus:</p><figure class="fullwidth"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 933px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/cc7aa3eaf8ea0f81cb969a3174bb9232/dc616/unity-oculus-file-menu.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 33.4375%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABdElEQVQY0z3L107CUACA4T6xd44bb7wQRxyAk7hAEROgjIKA7REow0N3C6XTnrYIEYLBR7BqNPku/x/bTbWjOS4QxtmjPBtJd2N5JoZ3TnF2KTGJVVEF2kRDLtFKBigPpJKpq4WmWukMAdSw5SthJXAtrt5Ia3Fp/U7eSIqhJL+TEiNFe6/gxqgZBTWyAQmyl60xWaBQ/LguTijOxzazegg3tgI5cztv7ebNw6IZLuiXFZ2CQyhqpjMS+ibVYp5otgQg1e0raCE7C0afYntFcz9ABKyDkh0t28dl6+JRL9CWoHpDaywbPtu3QEeoNvlqS2TUUd9dSM4Ha0yx77rinFR/obMaOq85cdKuMa5ivtv+3PRmioFoRukIhmBMZGfO23MBfUJjht0AdEH+oNw/3iXwroF7X0e09BbMmoXajNRkBwAG1GfOogfjtjbF6ryLd/1Ew080/41+3dKjdPetzI0B90pzeovXiZZa7jlEz81BhL94X333Pt8lgyR7AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Oculus menu in Unity"
        title="Oculus menu in Unity"
        src="/static/cc7aa3eaf8ea0f81cb969a3174bb9232/dc616/unity-oculus-file-menu.png"
        srcset="/static/cc7aa3eaf8ea0f81cb969a3174bb9232/72799/unity-oculus-file-menu.png 320w,
/static/cc7aa3eaf8ea0f81cb969a3174bb9232/6af66/unity-oculus-file-menu.png 640w,
/static/cc7aa3eaf8ea0f81cb969a3174bb9232/dc616/unity-oculus-file-menu.png 933w"
        sizes="(max-width: 933px) 100vw, 933px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></figure><ol>
<li>Choose <code class="language-text">Tools</code> | <code class="language-text">Remove AndroidManifest.xml</code>.</li>
<li>Choose <code class="language-text">Tools</code> | <code class="language-text">Create store-compatible AndroidManifest.xml</code></li>
</ol><p>From your project search, find the newly created <code class="language-text">AndroidManifest.xml</code> and open it in your editor.
You’ll want to change <code class="language-text">android.intent.category.INFO</code> to <code class="language-text">android.intent.category.LAUNCHER</code> so that
when you choose <code class="language-text">Build and Run</code> it will actually run the generated APK on your Oculus Quest.</p><p>Also, you need to indicate you are using <code class="language-text">headtracking</code> with a <code class="language-text">uses-feature</code> element.</p><p>Here is the full file:</p><div class="gatsby-highlight" data-language="xml"><pre class="language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" standalone="no"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>installLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- Request the headset DoF mode --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
        <span class="token attr-name"><span class="token namespace">android:</span>allowBackup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span>
            <span class="token attr-name"><span class="token namespace">android:</span>theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@android:style/Theme.Black.NoTitleBar.Fullscreen<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>configChanges</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>locale|fontScale|keyboard|keyboardHidden|mcc|mnc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|touchscreen|uiMode<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>launchMode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>singleTask<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.unity3d.player.UnityPlayerActivity<span class="token punctuation">"</span></span>
            <span class="token attr-name"><span class="token namespace">android:</span>excludeFromRecents</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.MAIN<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.LAUNCHER<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>unityplayer.SkipPermissionsDialog<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-feature</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.hardware.vr.headtracking<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">></span></span></code></pre></div><p>If you’re using a <code class="language-text">LocalAvatar</code> you’ll notice you don’t have hands. You’ll need to add an application id in <code class="language-text">Oculus</code> | <code class="language-text">Avatars</code> | <code class="language-text">Edit Settings</code>. You can get an Application Id by creating an application for your organization on the Oculus Developer website at <a href="https://dashboard.oculus.com">https://dashboard.oculus.com</a> | <code class="language-text">Manage</code>. There’s a good shortcut for testing though: just enter <code class="language-text">-</code> for the <code class="language-text">Oculus Go/Quest or Gear VR</code> field.</p></section>
<section><h2 id="how-to-make-a-vr-game-in-unity---part-1---setup-hand-presence-grabbing-object" style="position:relative;"><a href="#how-to-make-a-vr-game-in-unity---part-1---setup-hand-presence-grabbing-object" aria-label="how to make a vr game in unity   part 1   setup hand presence grabbing object permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to make a VR game in Unity - Part 1 - Setup, Hand presence, Grabbing object</h2><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/sKQOlqNe_WY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div><h3 id="setup-the-project" style="position:relative;"><a href="#setup-the-project" aria-label="setup the project permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup the project</h3><ul>
<li>Set Unknown Sources in the Oculus app (Windows only)</li>
<li>In Unity Hub create a new 3D app</li>
<li>Click Build Settings in the File menu</li>
<li>Choose Android, click Switch Platform</li>
<li>Change the Texture Compression to ASTC (not required<label for="sd-dxt-pvrtc-atc-and" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-dxt-pvrtc-atc-and" class="margin-toggle" /><span class="sidenote">DXT, PVRTC, ATC, and ASTC are all support textures with an alpha channel. These formats also support higher compression rates and/or better image quality, but they are only supported on a subset of Android devices. <a href="https://docs.unity3d.com/Manual/android-GettingStarted.html">https://docs.unity3d.com/Manual/android-GettingStarted.html</a>. ASTC is considered the best choice for Oculus Quest.</span>, very slow)</li>
<li>
<p>Open Player Settings:</p>
<ul>
<li>Set the Company and Product Name</li>
<li>Remove <code class="language-text">Vulkan</code> from the Graphics APIs list (Other Settings)</li>
<li>Set the Package Name (Other Settings)<label for="sd-if-you-leave-this-at" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-if-you-leave-this-at" class="margin-toggle" /><span class="sidenote">If you leave this at the default of <code>com.oculus.*</code>, nothing will happen when it attempts to deploy the player. Unity will appear to complete but your Quest will do nothing (not even install the application to Unknown Sources). Change the package name to <code>com.DefaultCompany.OculusQuestTest1</code> or a name matching what you have named your Company and Product Name.</span></li>
<li>Set the Minimum API Level to Android 4.4 ‘KitKat’ (Other Settings)</li>
<li>Check VR Integration (XR Settings)</li>
<li>Add the Oculus Virtual Reality SDK (XR Settings)</li>
</ul>
</li>
<li>Download Oculus Integration from the Asset Store (slow)</li>
<li>Import All from the Oculus Integration (very slow)</li>
</ul><h3 id="make-the-scene" style="position:relative;"><a href="#make-the-scene" aria-label="make the scene permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make the scene</h3><ul>
<li>Create a 3D plane</li>
<li>Create a 3D cube</li>
<li>Create a red material and apply it to cube</li>
<li>Create a black material and apply it to plane</li>
<li>Delete the main camera</li>
<li>Add <code class="language-text">OVRPlayerController</code> to the scene and move it back away from the cube</li>
<li>Set Tracking Origin Type to <code class="language-text">Floor</code> on the <code class="language-text">OVRCameraRig</code> child (note: if you are using the ▶ button, this should be <code class="language-text">Stage</code>)</li>
<li>Add the <code class="language-text">Character Camera Constraint</code> component to the <code class="language-text">OVRPlayerController</code></li>
<li>Drag the <code class="language-text">OVRCameraRig</code> to the <code class="language-text">Character Camera Constraint</code> Camera Rig field</li>
<li>Check the Dynamic Height box</li>
</ul><blockquote>
<p>Note: As of 1.39 you also need to set the Target Devices of the OVR Manager (Script) to Quest <img src="https://rpl.cat/uploads/fBoe-Hyg2i-xbSswq6SzMIrm9EpgR102T1H0RiWUuEE/public.png"></p>
</blockquote><h3 id="simple-grabbing" style="position:relative;"><a href="#simple-grabbing" aria-label="simple grabbing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simple grabbing</h3><ul>
<li>Add <code class="language-text">LocalAvatar</code> prefab to the <code class="language-text">TrackingSpace</code> of the <code class="language-text">OVRPlayerController</code></li>
<li>Add <code class="language-text">AvatarGrabberLeft</code> and <code class="language-text">AvatarGrabberRight</code> prefab to the <code class="language-text">LocalAvatar</code></li>
<li>Make the red cube wider (more like a table)</li>
<li>Add an empty object called Cubes and add some cubes (6 of them)</li>
<li>Select all of the cubes and add the <code class="language-text">OVRGrabbable</code> script</li>
<li>Add the <code class="language-text">RigidBody</code> component</li>
</ul><h3 id="build-and-run" style="position:relative;"><a href="#build-and-run" aria-label="build and run permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build and run</h3><ul>
<li>In Build Settings click Add Open Scenes</li>
<li>Plug in your Oculus (you may need to “Trust this computer”)</li>
<li>On Windows you should be able to click play</li>
<li>On Mac click Build and Run (slow first build)</li>
</ul><blockquote>
<p>From the comments: Colliding with the cubes and flying into the air? “Some of you have experienced a bug where the player fly when you put your hands under you. A really simple fix is to set the body and the hand to a different layer then in Physics settings uncheck the collision between the two layer in the collision layer matrix! :) Hope this will help some of you!” <a href="https://www.youtube.com/watch?v=sKQOlqNe_WY&#x26;lc=Ugy0IV2wmiRMywTkPk94AaABAg">https://www.youtube.com/watch?v=sKQOlqNe_WY&#x26;lc=Ugy0IV2wmiRMywTkPk94AaABAg</a> Note: setting up layer interactions happens more in the next section.</p>
</blockquote></section>
<section><h2 id="how-to-make-a-vr-game-in-unity---part-2---custom-hand-distance-grab" style="position:relative;"><a href="#how-to-make-a-vr-game-in-unity---part-2---custom-hand-distance-grab" aria-label="how to make a vr game in unity   part 2   custom hand distance grab permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to make a VR game in Unity - Part 2 - Custom Hand, Distance grab</h2><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/rnOR1OANIAU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div><h3 id="setting-up-custom-hands" style="position:relative;"><a href="#setting-up-custom-hands" aria-label="setting up custom hands permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up custom hands</h3><ul>
<li>Remove the <code class="language-text">LocalAvatar</code> you added</li>
<li>Add <code class="language-text">CustomHandLeft</code> and <code class="language-text">CustomHandRight</code> to the scene</li>
<li>Select both, drag the <code class="language-text">TrackingSpace</code> of the <code class="language-text">OVRCameraRig</code> to the Parent Transform property of the custom hands</li>
<li>Find the <code class="language-text">hand:Rhand</code> component in <code class="language-text">CustomHandRight</code>, expand the Materials section and set the material to <code class="language-text">Hands_transparent</code> (same as the material for <code class="language-text">hand:Lhand</code>)</li>
<li>Expand the <code class="language-text">Hands_transparent</code> material, change the Inner Color to aqua, increase the Rim Power</li>
<li>Go to Project Settings | Time and change the Fixed Timestep to <code class="language-text">1 / 90</code> <label for="sd-still-jittery-move" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-still-jittery-move" class="margin-toggle" /><span class="sidenote">Still jittery? Move the hands under the OVRPlayerController LeftHandAnchor and RightHandAnchor and remove the Parent Tansform <a href="https://www.youtube.com/watch?v=rnOR1OANIAU&#x26;lc=UgxZk-kL_RAwHIIMnTl4AaABAg.8rOyDN6n0A68s4HvbTUUai">comment</a>(see also: <a href="https://developer.oculus.com/documentation/unity/latest/concepts/unity-sf-distancegrab/">unity distance grab</a> and <a href="https://forum.unity.com/threads/kinematic-rigid-bodies-does-not-move-smoothly-with-moveposition.142516/">kinematic rigid bodies</a>), note: I couldn't get this to align correctly in the latest version for the <code>DistanceGrabHandLeft</code> and <code>DistanceGrabHandRight</code></span></li>
</ul><h3 id="setting-up-distance-grab" style="position:relative;"><a href="#setting-up-distance-grab" aria-label="setting up distance grab permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up distance grab</h3><ul>
<li>Remove the custom hands</li>
<li>
<p>Select all of the cubes</p>
<ul>
<li>Set the Collision Detection to Continuous Dynamic</li>
<li>Remove the OVR Grabbable Script</li>
<li>Add the Distance Grabbable Script</li>
</ul>
</li>
<li>Add <code class="language-text">DistanceGrabLeft</code> and <code class="language-text">DistanceGrabRight</code> prefabs to scene</li>
<li>Set the Player field to the <code class="language-text">OVRPlayerController</code></li>
<li>Set the <code class="language-text">TrackingSpace</code> to the Parent Transform</li>
<li>Set the Grab Object in Layer field to the number corresponding to your Cubes Layer (9)</li>
<li>Set Obstruction Layer to -1 (none)</li>
<li>Create an Empty Game Object and call it Grab Manager and add it to the <code class="language-text">OVRPlayerController</code> (this is different from the video, but solves the problem where only one box can be grabbed, also this is fixed in the following videos)</li>
<li>Add the Sphere Collider component to the Grab Manager</li>
<li>Set Is Trigger to true</li>
<li>Set the Radius to something larger (3.5 is good)</li>
</ul><h3 id="adding-the-crosshairs" style="position:relative;"><a href="#adding-the-crosshairs" aria-label="adding the crosshairs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding the crosshairs</h3><ul>
<li>Click the object that you want to have a crosshair on</li>
<li>Once selected, create an Empty Game Object called Crosshair</li>
<li>Add the Grabbable Crosshair Script to the object</li>
<li>
<p>Create a child Quad object called “On”</p>
<ul>
<li>Remove the mesh collider of the quad</li>
<li>Add the <code class="language-text">TriangleCursorTargeted</code> Material</li>
<li>Move it slightly behind the cube</li>
</ul>
</li>
<li>
<p>Duplicate the child Quad and call it “Off”</p>
<ul>
<li>Change the material to <code class="language-text">TriangleCursorUntargeted</code></li>
<li>Make it smaller by lowering the scale</li>
<li>Change the material color to gray</li>
</ul>
</li>
<li>Drag <code class="language-text">On</code> to the Targeted Crosshair field of the Crosshair script</li>
<li>Drag <code class="language-text">Off</code> to the Enabled Crosshair field of the Crosshair script</li>
<li>Make a prefab from the crosshair (drag from the scene to Assets)</li>
<li>Drag the prefab into the remaining cubes</li>
</ul></section>
<section><h2 id="how-to-make-a-vr-game-in-unity---part-3---vr-shooter" style="position:relative;"><a href="#how-to-make-a-vr-game-in-unity---part-3---vr-shooter" aria-label="how to make a vr game in unity   part 3   vr shooter permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to make a VR game in Unity - Part 3 - VR Shooter</h2><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/98gfkursxYI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div><h3 id="setup-the-gun" style="position:relative;"><a href="#setup-the-gun" aria-label="setup the gun permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup the gun</h3><ul>
<li>In the Asset Store find the asset: “Modern Guns: Handgun” published by NOKOBOT. Smash the download button.</li>
<li>Click Import, then Import All</li>
<li>Open the folder in Assets, Nokobot, ModernGuns_Handgun, Prefabs, Active guns</li>
<li>Drag <code class="language-text">Handgun_M1911A_Black (WithScript)</code> prefab into the scene</li>
<li>Scale it down (0.3) and move it to the left of the boxes</li>
<li>Add a <code class="language-text">Rigidbody</code> component</li>
<li>Add the <code class="language-text">Distance Grabbable</code> script</li>
<li>
<p>Set the layer to the Grabbable layer (same as Cubes)</p>
<ul>
<li>Add a new Empty 3D object to the gun called <code class="language-text">COLLIDERS</code></li>
<li>Add a new Cube to <code class="language-text">COLLIDERS</code> that aligns to the barrel <label for="sd-barrel-less-than-img" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-barrel-less-than-img" class="margin-toggle" /><span class="sidenote">Barrel: <img src="https://rpl.cat/uploads/34dIbk_lMn9KprF5AOwkoYRKLXPmb_zSqVb2Yu5DDaE/public.png"></span></li>
<li>Duplicate that cube to <code class="language-text">COLLIDERS</code> and align the duplicate to the grip <label for="sd-grip-less-than-img" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-grip-less-than-img" class="margin-toggle" /><span class="sidenote">Grip: <img src="https://rpl.cat/uploads/MOuJWyzFNJbiXvEifcvb92zmWVs9fzqWQHdbatSb5y4/public.png"></span></li>
<li>Remove the Mesh Renderer of both cubes</li>
<li>Remove the Cube (Mesh Filter) of both cubes</li>
<li>Drag each cube to the Grab Points field of the Distance Grabbable object in the gun</li>
</ul>
</li>
<li>Add the crosshair prefab to the gun</li>
<li>Scale the crosshair down a little bit</li>
</ul><blockquote>
</blockquote><h3 id="modify-the-distance-grabbable-script" style="position:relative;"><a href="#modify-the-distance-grabbable-script" aria-label="modify the distance grabbable script permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modify the Distance Grabbable script</h3><ul>
<li>Click on the gun, go to the Distance Grabbable object, click the gear and choose Edit Script.</li>
<li>Everywhere we are using the <code class="language-text">m_renderer</code> check if null and return (<code class="language-text">if (!m_renderer) return;</code>):</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">/************************************************************************************

Copyright (c) Facebook Technologies, LLC and its affiliates. All rights reserved.

See SampleFramework license.txt for license terms.  Unless required by applicable law
or agreed to in writing, the sample code is provided “AS IS” WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied.  See the license for specific
language governing permissions and limitations under the license.

************************************************************************************/</span>

<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">OVRTouchSample</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">OculusSampleFramework</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DistanceGrabbable</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">OVRGrabbable</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">string</span></span> m_materialColorField<span class="token punctuation">;</span>

        <span class="token class-name">GrabbableCrosshair</span> m_crosshair<span class="token punctuation">;</span>
        <span class="token class-name">GrabManager</span> m_crosshairManager<span class="token punctuation">;</span>
        <span class="token class-name">Renderer</span> m_renderer<span class="token punctuation">;</span>
        <span class="token class-name">MaterialPropertyBlock</span> m_mpb<span class="token punctuation">;</span>


        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> InRange
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> m_inRange<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                m_inRange <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">RefreshCrosshair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name"><span class="token keyword">bool</span></span> m_inRange<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> Targeted
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> m_targeted<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                m_targeted <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">RefreshCrosshair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name"><span class="token keyword">bool</span></span> m_targeted<span class="token punctuation">;</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_crosshair <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInChildren</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GrabbableCrosshair<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_renderer <span class="token operator">=</span> gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Renderer<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_crosshairManager <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindObjectOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GrabManager<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_mpb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MaterialPropertyBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">RefreshCrosshair</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_mpb<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_materialColorField<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_renderer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            m_renderer<span class="token punctuation">.</span><span class="token function">SetPropertyBlock</span><span class="token punctuation">(</span>m_mpb<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RefreshCrosshair</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_crosshair<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>isGrabbed<span class="token punctuation">)</span> m_crosshair<span class="token punctuation">.</span><span class="token function">SetState</span><span class="token punctuation">(</span>GrabbableCrosshair<span class="token punctuation">.</span>CrosshairState<span class="token punctuation">.</span>Disabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>InRange<span class="token punctuation">)</span> m_crosshair<span class="token punctuation">.</span><span class="token function">SetState</span><span class="token punctuation">(</span>GrabbableCrosshair<span class="token punctuation">.</span>CrosshairState<span class="token punctuation">.</span>Disabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> m_crosshair<span class="token punctuation">.</span><span class="token function">SetState</span><span class="token punctuation">(</span>Targeted <span class="token punctuation">?</span> GrabbableCrosshair<span class="token punctuation">.</span>CrosshairState<span class="token punctuation">.</span>Targeted <span class="token punctuation">:</span> GrabbableCrosshair<span class="token punctuation">.</span>CrosshairState<span class="token punctuation">.</span>Enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_materialColorField <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_renderer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
                m_renderer<span class="token punctuation">.</span><span class="token function">GetPropertyBlock</span><span class="token punctuation">(</span>m_mpb<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>isGrabbed <span class="token operator">||</span> <span class="token operator">!</span>InRange<span class="token punctuation">)</span> m_mpb<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_materialColorField<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Targeted<span class="token punctuation">)</span> m_mpb<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_materialColorField<span class="token punctuation">,</span> m_crosshairManager<span class="token punctuation">.</span>OutlineColorHighlighted<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> m_mpb<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_materialColorField<span class="token punctuation">,</span> m_crosshairManager<span class="token punctuation">.</span>OutlineColorInRange<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_renderer<span class="token punctuation">.</span><span class="token function">SetPropertyBlock</span><span class="token punctuation">(</span>m_mpb<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span> focusColor<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_renderer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            m_mpb<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_materialColorField<span class="token punctuation">,</span> focusColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_renderer<span class="token punctuation">.</span><span class="token function">SetPropertyBlock</span><span class="token punctuation">(</span>m_mpb<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ClearColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m_renderer<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            m_mpb<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_materialColorField<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_renderer<span class="token punctuation">.</span><span class="token function">SetPropertyBlock</span><span class="token punctuation">(</span>m_mpb<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="modify-the-grab-manager-script" style="position:relative;"><a href="#modify-the-grab-manager-script" aria-label="modify the grab manager script permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modify the Grab Manager script</h3><ul>
<li>Click on the Grab Manager in the <code class="language-text">OVRPlayerController</code></li>
<li>Click the gear icon on the Grab Manager Script and choose Edit Script</li>
<li>Change <code class="language-text">GetComponentInChildren</code> to <code class="language-text">GetComponentInParent</code>:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">/************************************************************************************

Copyright (c) Facebook Technologies, LLC and its affiliates. All rights reserved.

See SampleFramework license.txt for license terms.  Unless required by applicable law
or agreed to in writing, the sample code is provided “AS IS” WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied.  See the license for specific
language governing permissions and limitations under the license.

************************************************************************************/</span>

<span class="token comment">/************************************************************************************

Quick implementation notes:

Grab candidates and grab range:
-------------------------------
The trigger volume on the OVRPlayerController, which also has a GrabManager component,
determines whether an object is in range or out of range.

Hands (via the DistanceGrabber component) determine the target object in one of two
ways, depending on bool m_useSpherecast:
true: cast a sphere of radius m_spherecastRadius at distance m_maxGrabDistance. Select
the first collision.
false: from all objects within the grab volume, select the closest object that can be
hit by a ray from the player's hand.

IMPORTANT NOTE: if you change the radius of the trigger volume on the
OVRPlayerController, you must ensure the spherecast or the grab volume on the grabbers
is big enough to reach all objects within that radius! Keep in mind the hand may be a
little behind or two the side of the player, so you need to make it somewhat larger
than the radius. There is no major concern with making it too large (aside from minor
performance questions), because if an object is not in range according to the
OVRPlayerController's trigger volume, it will not be considered for grabbing.

Crosshairs and Outlines:
------------------------

Objects with a DistanceGrabbable component draw their own in range / targeted
highlight. How these states are best presented is highly app-specific.

************************************************************************************/</span>

<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">OculusSampleFramework</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GrabManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Collider</span> m_grabVolume<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Color</span> OutlineColorInRange<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token class-name">Color</span> OutlineColorHighlighted<span class="token punctuation">;</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerEnter</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> otherCollider<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">DistanceGrabbable</span> dg <span class="token operator">=</span> otherCollider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInParent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dg<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                dg<span class="token punctuation">.</span>InRange <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>

        <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTriggerExit</span><span class="token punctuation">(</span><span class="token class-name">Collider</span> otherCollider<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">DistanceGrabbable</span> dg <span class="token operator">=</span> otherCollider<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInParent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>dg<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                dg<span class="token punctuation">.</span>InRange <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="fix-the-gun-position-and-make-it-snap" style="position:relative;"><a href="#fix-the-gun-position-and-make-it-snap" aria-label="fix the gun position and make it snap permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fix the gun position and make it snap</h3><ul>
<li>Note the position of the gun; remember where it is (-1, 1.15, -0.23)</li>
<li>Move the gun position to 0, 0, 0 (temporarily)</li>
<li>Create an Empty Game Object called Hand Gun Offset</li>
<li>Move the object to 0, 0, 0 then align it where the gun should be held <label for="sd-hand-gun-offset" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-hand-gun-offset" class="margin-toggle" /><span class="sidenote">Hand gun offset</span></li>
<li>Drag the empty game object to Assets to make a prefab</li>
<li>Replace the gun where you had it on the table</li>
<li>Drag the Hand Gun Offset prefab to the gun Snap Offset</li>
<li>Check Snap Position and Snap Orientation</li>
</ul><h3 id="fix-the-distancegrabber-script-for-the-left-hand" style="position:relative;"><a href="#fix-the-distancegrabber-script-for-the-left-hand" aria-label="fix the distancegrabber script for the left hand permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fix the DistanceGrabber script for the left hand</h3><ul>
<li>Click on the <code class="language-text">DistanceGrabHandLeft</code></li>
<li>Click on the gear icon in the Distance Grabber component and choose Edit Script</li>
<li>Copy the else statement of <code class="language-text">GrabBegin</code> into <code class="language-text">MoveGrabbedObject</code></li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token comment">/************************************************************************************

Copyright (c) Facebook Technologies, LLC and its affiliates. All rights reserved.

See SampleFramework license.txt for license terms.  Unless required by applicable law
or agreed to in writing, the sample code is provided “AS IS” WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied.  See the license for specific
language governing permissions and limitations under the license.

************************************************************************************/</span>

<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_EDITOR</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>SceneManagement</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>

<span class="token keyword">namespace</span> <span class="token namespace">OculusSampleFramework</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary></span>
    <span class="token comment">/// Allows grabbing and throwing of objects with the DistanceGrabbable component on them.</span>
    <span class="token comment">/// &lt;/summary></span>
    <span class="token punctuation">[</span><span class="token function">RequireComponent</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Rigidbody</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DistanceGrabber</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">OVRGrabber</span></span>
    <span class="token punctuation">{</span>

        <span class="token comment">// Radius of sphere used in spherecast from hand along forward ray to find target object.</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name">Color</span> m_focusColor<span class="token punctuation">;</span>

        <span class="token comment">// Radius of sphere used in spherecast from hand along forward ray to find target object.</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">float</span></span> m_spherecastRadius<span class="token punctuation">;</span>

        <span class="token comment">// Distance below which no-snap objects won't be teleported, but will instead be left</span>
        <span class="token comment">// where they are in relation to the hand.</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">float</span></span> m_noSnapThreshhold <span class="token operator">=</span> <span class="token number">0.05f</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">bool</span></span> m_useSpherecast<span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> UseSpherecast
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> m_useSpherecast<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                m_useSpherecast <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
                <span class="token function">GrabVolumeEnable</span><span class="token punctuation">(</span><span class="token operator">!</span>m_useSpherecast<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Public to allow changing in demo.</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">bool</span></span> m_preventGrabThroughWalls<span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">float</span></span> m_objectPullVelocity <span class="token operator">=</span> <span class="token number">10.0f</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">float</span></span> m_objectPullMaxRotationRate <span class="token operator">=</span> <span class="token number">360.0f</span><span class="token punctuation">;</span> <span class="token comment">// max rotation rate in degrees per second</span>

        <span class="token class-name"><span class="token keyword">bool</span></span> m_movingObjectToHand <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

        <span class="token comment">// Objects can be distance grabbed up to this distance from the hand.</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">float</span></span> m_maxGrabDistance<span class="token punctuation">;</span>

        <span class="token comment">// Only allow grabbing objects in this layer.</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">int</span></span> m_grabObjectsInLayer<span class="token punctuation">;</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name"><span class="token keyword">int</span></span> m_obstructionLayer<span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
        <span class="token class-name">GameObject</span> m_player<span class="token punctuation">;</span>
        <span class="token class-name">DistanceGrabber</span> m_otherHand<span class="token punctuation">;</span>

        <span class="token keyword">protected</span> <span class="token class-name">DistanceGrabbable</span> m_target<span class="token punctuation">;</span>
        <span class="token comment">// Tracked separately from m_target, because we support child colliders of a DistanceGrabbable.</span>
        <span class="token comment">// MTF TODO: verify this still works!</span>
        <span class="token keyword">protected</span> <span class="token class-name">Collider</span> m_targetCollider<span class="token punctuation">;</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Set up our max grab distance to be based on the player's max grab distance.</span>
            <span class="token comment">// Adding a liberal margin of error here, because users can move away some from the</span>
            <span class="token comment">// OVRPlayerController, and also players have arms.</span>
            <span class="token comment">// Note that there's no major downside to making this value too high, as objects</span>
            <span class="token comment">// outside the player's grabbable trigger volume will not be eligible targets regardless.</span>
            <span class="token class-name">SphereCollider</span> sc <span class="token operator">=</span> m_player<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInChildren</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SphereCollider<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_maxGrabDistance <span class="token operator">=</span> sc<span class="token punctuation">.</span>radius <span class="token operator">+</span> <span class="token number">3.0f</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span>m_parentHeldObject <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"m_parentHeldObject incompatible with DistanceGrabber. Setting to false."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_parentHeldObject <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">DistanceGrabber<span class="token punctuation">[</span><span class="token punctuation">]</span></span> grabbers <span class="token operator">=</span> <span class="token generic-method"><span class="token function">FindObjectsOfType</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabber<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> grabbers<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>grabbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span> m_otherHand <span class="token operator">=</span> grabbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            Debug<span class="token punctuation">.</span><span class="token function">Assert</span><span class="token punctuation">(</span>m_otherHand <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token preprocessor property">#<span class="token directive keyword">if</span> </span><span class="token return-type class-name">UNITY_EDITOR</span>
            OVRPlugin<span class="token punctuation">.</span><span class="token function">SendEvent</span><span class="token punctuation">(</span><span class="token string">"distance_grabber"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>SceneManager<span class="token punctuation">.</span><span class="token function">GetActiveScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">"DistanceGrab"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"sample_framework"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            Debug<span class="token punctuation">.</span><span class="token function">DrawRay</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> transform<span class="token punctuation">.</span>forward<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>red<span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">DistanceGrabbable</span> target<span class="token punctuation">;</span>
            <span class="token class-name">Collider</span> targetColl<span class="token punctuation">;</span>
            <span class="token function">FindTarget</span><span class="token punctuation">(</span><span class="token keyword">out</span> target<span class="token punctuation">,</span> <span class="token keyword">out</span> targetColl<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">!=</span> m_target<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>m_target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    m_target<span class="token punctuation">.</span>Targeted <span class="token operator">=</span> m_otherHand<span class="token punctuation">.</span>m_target <span class="token operator">==</span> m_target<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>m_target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    m_target<span class="token punctuation">.</span><span class="token function">ClearColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    target<span class="token punctuation">.</span><span class="token function">SetColor</span><span class="token punctuation">(</span>m_focusColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
                m_target <span class="token operator">=</span> target<span class="token punctuation">;</span>
                m_targetCollider <span class="token operator">=</span> targetColl<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>m_target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    m_target<span class="token punctuation">.</span>Targeted <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">GrabBegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">DistanceGrabbable</span> closestGrabbable <span class="token operator">=</span> m_target<span class="token punctuation">;</span>
            <span class="token class-name">Collider</span> closestGrabbableCollider <span class="token operator">=</span> m_targetCollider<span class="token punctuation">;</span>

            <span class="token function">GrabVolumeEnable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>closestGrabbable <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>closestGrabbable<span class="token punctuation">.</span>isGrabbed<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token punctuation">(</span><span class="token punctuation">(</span>DistanceGrabber<span class="token punctuation">)</span>closestGrabbable<span class="token punctuation">.</span>grabbedBy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OffhandGrabbed</span><span class="token punctuation">(</span>closestGrabbable<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                m_grabbedObj <span class="token operator">=</span> closestGrabbable<span class="token punctuation">;</span>
                m_grabbedObj<span class="token punctuation">.</span><span class="token function">GrabBegin</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> closestGrabbableCollider<span class="token punctuation">)</span><span class="token punctuation">;</span>

                m_movingObjectToHand <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                m_lastPos <span class="token operator">=</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                m_lastRot <span class="token operator">=</span> transform<span class="token punctuation">.</span>rotation<span class="token punctuation">;</span>

                <span class="token comment">// If it's within a certain distance respect the no-snap.</span>
                <span class="token class-name">Vector3</span> closestPointOnBounds <span class="token operator">=</span> closestGrabbableCollider<span class="token punctuation">.</span><span class="token function">ClosestPointOnBounds</span><span class="token punctuation">(</span>m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>m_grabbedObj<span class="token punctuation">.</span>snapPosition <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>m_grabbedObj<span class="token punctuation">.</span>snapOrientation <span class="token operator">&amp;&amp;</span> m_noSnapThreshhold <span class="token operator">></span> <span class="token number">0.0f</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>closestPointOnBounds <span class="token operator">-</span> m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span>magnitude <span class="token operator">&lt;</span> m_noSnapThreshhold<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name">Vector3</span> relPos <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">-</span> transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                    m_movingObjectToHand <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                    relPos <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Inverse</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span> <span class="token operator">*</span> relPos<span class="token punctuation">;</span>
                    m_grabbedObjectPosOff <span class="token operator">=</span> relPos<span class="token punctuation">;</span>
                    <span class="token class-name">Quaternion</span> relOri <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Inverse</span><span class="token punctuation">(</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">)</span> <span class="token operator">*</span> m_grabbedObj<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">;</span>
                    m_grabbedObjectRotOff <span class="token operator">=</span> relOri<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{</span>
                    <span class="token comment">// Set up offsets for grabbed object desired position relative to hand.</span>
                    m_grabbedObjectPosOff <span class="token operator">=</span> m_gripTransform<span class="token punctuation">.</span>localPosition<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token class-name">Vector3</span> snapOffset <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>LTouch<span class="token punctuation">)</span> snapOffset<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>snapOffset<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
                        m_grabbedObjectPosOff <span class="token operator">+=</span> snapOffset<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                    m_grabbedObjectRotOff <span class="token operator">=</span> m_gripTransform<span class="token punctuation">.</span>localRotation<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        m_grabbedObjectRotOff <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">.</span>rotation <span class="token operator">*</span> m_grabbedObjectRotOff<span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>LTouch<span class="token punctuation">)</span> m_grabbedObjectRotOff <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Inverse</span><span class="token punctuation">(</span>m_grabbedObjectRotOff<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">MoveGrabbedObject</span><span class="token punctuation">(</span><span class="token class-name">Vector3</span> pos<span class="token punctuation">,</span> <span class="token class-name">Quaternion</span> rot<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">bool</span></span> forceTeleport <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_grabbedObj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// Set up offsets for grabbed object desired position relative to hand.</span>
            m_grabbedObjectPosOff <span class="token operator">=</span> m_gripTransform<span class="token punctuation">.</span>localPosition<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name">Vector3</span> snapOffset <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>m_controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>LTouch<span class="token punctuation">)</span> snapOffset<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>snapOffset<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
                m_grabbedObjectPosOff <span class="token operator">+=</span> snapOffset<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            m_grabbedObjectRotOff <span class="token operator">=</span> m_gripTransform<span class="token punctuation">.</span>localRotation<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                m_grabbedObjectRotOff <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>snapOffset<span class="token punctuation">.</span>rotation <span class="token operator">*</span> m_grabbedObjectRotOff<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>m_controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>LTouch<span class="token punctuation">)</span> m_grabbedObjectRotOff <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">Inverse</span><span class="token punctuation">(</span>m_grabbedObjectRotOff<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token class-name">Rigidbody</span> grabbedRigidbody <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>grabbedRigidbody<span class="token punctuation">;</span>
            <span class="token class-name">Vector3</span> grabbablePosition <span class="token operator">=</span> pos <span class="token operator">+</span> rot <span class="token operator">*</span> m_grabbedObjectPosOff<span class="token punctuation">;</span>
            <span class="token class-name">Quaternion</span> grabbableRotation <span class="token operator">=</span> rot <span class="token operator">*</span> m_grabbedObjectRotOff<span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>m_movingObjectToHand<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">float</span></span> travel <span class="token operator">=</span> m_objectPullVelocity <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">;</span>
                <span class="token class-name">Vector3</span> dir <span class="token operator">=</span> grabbablePosition <span class="token operator">-</span> m_grabbedObj<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>travel <span class="token operator">*</span> travel <span class="token operator">*</span> <span class="token number">1.1f</span> <span class="token operator">></span> dir<span class="token punctuation">.</span>sqrMagnitude<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    m_movingObjectToHand <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{</span>
                    dir<span class="token punctuation">.</span><span class="token function">Normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    grabbablePosition <span class="token operator">=</span> m_grabbedObj<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">+</span> dir <span class="token operator">*</span> travel<span class="token punctuation">;</span>
                    grabbableRotation <span class="token operator">=</span> Quaternion<span class="token punctuation">.</span><span class="token function">RotateTowards</span><span class="token punctuation">(</span>m_grabbedObj<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>rotation<span class="token punctuation">,</span> grabbableRotation<span class="token punctuation">,</span> m_objectPullMaxRotationRate <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            grabbedRigidbody<span class="token punctuation">.</span><span class="token function">MovePosition</span><span class="token punctuation">(</span>grabbablePosition<span class="token punctuation">)</span><span class="token punctuation">;</span>
            grabbedRigidbody<span class="token punctuation">.</span><span class="token function">MoveRotation</span><span class="token punctuation">(</span>grabbableRotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">static</span> <span class="token keyword">private</span> <span class="token return-type class-name">DistanceGrabbable</span> <span class="token function">HitInfoToGrabbable</span><span class="token punctuation">(</span><span class="token class-name">RaycastHit</span> hitInfo<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name">GameObject</span> go <span class="token operator">=</span> hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">;</span>
                <span class="token keyword">return</span> go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">??</span> go<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInParent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">FindTarget</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name">DistanceGrabbable</span> dgOut<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">Collider</span> collOut<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            dgOut <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            collOut <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">float</span></span> closestMagSq <span class="token operator">=</span> <span class="token keyword">float</span><span class="token punctuation">.</span>MaxValue<span class="token punctuation">;</span>

            <span class="token comment">// First test for objects within the grab volume, if we're using those.</span>
            <span class="token comment">// (Some usage of DistanceGrabber will not use grab volumes, and will only</span>
            <span class="token comment">// use spherecasts, and that's supported.)</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">OVRGrabbable</span> cg <span class="token keyword">in</span> m_grabCandidates<span class="token punctuation">.</span>Keys<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name">DistanceGrabbable</span> grabbable <span class="token operator">=</span> cg <span class="token keyword">as</span> <span class="token class-name">DistanceGrabbable</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">bool</span></span> canGrab <span class="token operator">=</span> grabbable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> grabbable<span class="token punctuation">.</span>InRange <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>grabbable<span class="token punctuation">.</span>isGrabbed <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>grabbable<span class="token punctuation">.</span>allowOffhandGrab<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canGrab<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">continue</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> grabbable<span class="token punctuation">.</span>grabPoints<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name">Collider</span> grabbableCollider <span class="token operator">=</span> grabbable<span class="token punctuation">.</span>grabPoints<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token comment">// Store the closest grabbable</span>
                    <span class="token class-name">Vector3</span> closestPointOnBounds <span class="token operator">=</span> grabbableCollider<span class="token punctuation">.</span><span class="token function">ClosestPointOnBounds</span><span class="token punctuation">(</span>m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name"><span class="token keyword">float</span></span> grabbableMagSq <span class="token operator">=</span> <span class="token punctuation">(</span>m_gripTransform<span class="token punctuation">.</span>position <span class="token operator">-</span> closestPointOnBounds<span class="token punctuation">)</span><span class="token punctuation">.</span>sqrMagnitude<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>grabbableMagSq <span class="token operator">&lt;</span> closestMagSq<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token class-name"><span class="token keyword">bool</span></span> accept <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>m_preventGrabThroughWalls<span class="token punctuation">)</span>
                        <span class="token punctuation">{</span>
                            <span class="token comment">// NOTE: if this raycast fails, ideally we'd try other rays near the edges of the object, especially for large objects.</span>
                            <span class="token comment">// NOTE 2: todo optimization: sort the objects before performing any raycasts.</span>
                            <span class="token class-name">Ray</span> ray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Ray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            ray<span class="token punctuation">.</span>direction <span class="token operator">=</span> grabbable<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position <span class="token operator">-</span> m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                            ray<span class="token punctuation">.</span>origin <span class="token operator">=</span> m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>
                            <span class="token class-name">RaycastHit</span> obstructionHitInfo<span class="token punctuation">;</span>
                            Debug<span class="token punctuation">.</span><span class="token function">DrawRay</span><span class="token punctuation">(</span>ray<span class="token punctuation">.</span>origin<span class="token punctuation">,</span> ray<span class="token punctuation">.</span>direction<span class="token punctuation">,</span> Color<span class="token punctuation">.</span>red<span class="token punctuation">,</span> <span class="token number">0.1f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                            <span class="token keyword">if</span> <span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>ray<span class="token punctuation">,</span> <span class="token keyword">out</span> obstructionHitInfo<span class="token punctuation">,</span> m_maxGrabDistance<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> m_obstructionLayer<span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">{</span>
                                <span class="token class-name"><span class="token keyword">float</span></span> distToObject <span class="token operator">=</span> <span class="token punctuation">(</span>grabbableCollider<span class="token punctuation">.</span><span class="token function">ClosestPointOnBounds</span><span class="token punctuation">(</span>m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span> <span class="token operator">-</span> m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span>magnitude<span class="token punctuation">;</span>
                                <span class="token keyword">if</span><span class="token punctuation">(</span>distToObject <span class="token operator">></span> obstructionHitInfo<span class="token punctuation">.</span>distance <span class="token operator">*</span> <span class="token number">1.1</span><span class="token punctuation">)</span>
                                <span class="token punctuation">{</span>
                                    accept <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>accept<span class="token punctuation">)</span>
                        <span class="token punctuation">{</span>
                            closestMagSq <span class="token operator">=</span> grabbableMagSq<span class="token punctuation">;</span>
                            dgOut <span class="token operator">=</span> grabbable<span class="token punctuation">;</span>
                            collOut <span class="token operator">=</span> grabbableCollider<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>dgOut <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> m_useSpherecast<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">FindTargetWithSpherecast</span><span class="token punctuation">(</span><span class="token keyword">out</span> dgOut<span class="token punctuation">,</span> <span class="token keyword">out</span> collOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> dgOut <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">FindTargetWithSpherecast</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name">DistanceGrabbable</span> dgOut<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">Collider</span> collOut<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            dgOut <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            collOut <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name">Ray</span> ray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Ray</span><span class="token punctuation">(</span>m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">,</span> m_gripTransform<span class="token punctuation">.</span>forward<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">RaycastHit</span> hitInfo<span class="token punctuation">;</span>

            <span class="token comment">// If no objects in grab volume, raycast.</span>
            <span class="token comment">// Potential optimization:</span>
            <span class="token comment">// In DistanceGrabbable.RefreshCrosshairs, we could move the object between collision layers.</span>
            <span class="token comment">// If it's in range, it would move into the layer DistanceGrabber.m_grabObjectsInLayer,</span>
            <span class="token comment">// and if out of range, into another layer so it's ignored by DistanceGrabber's SphereCast.</span>
            <span class="token comment">// However, we're limiting the SphereCast by m_maxGrabDistance, so the optimization doesn't seem</span>
            <span class="token comment">// essential.</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">SphereCast</span><span class="token punctuation">(</span>ray<span class="token punctuation">,</span> m_spherecastRadius<span class="token punctuation">,</span> <span class="token keyword">out</span> hitInfo<span class="token punctuation">,</span> m_maxGrabDistance<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> m_grabObjectsInLayer<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token class-name">DistanceGrabbable</span> grabbable <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token class-name">Collider</span> hitCollider <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    grabbable <span class="token operator">=</span> hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInParent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    hitCollider <span class="token operator">=</span> grabbable <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> hitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span>grabbable<span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        dgOut <span class="token operator">=</span> grabbable<span class="token punctuation">;</span>
                        collOut <span class="token operator">=</span> hitCollider<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>grabbable <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> m_preventGrabThroughWalls<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token comment">// Found a valid hit. Now test to see if it's blocked by collision.</span>
                    <span class="token class-name">RaycastHit</span> obstructionHitInfo<span class="token punctuation">;</span>
                    ray<span class="token punctuation">.</span>direction <span class="token operator">=</span> hitInfo<span class="token punctuation">.</span>point <span class="token operator">-</span> m_gripTransform<span class="token punctuation">.</span>position<span class="token punctuation">;</span>

                    dgOut <span class="token operator">=</span> grabbable<span class="token punctuation">;</span>
                    collOut <span class="token operator">=</span> hitCollider<span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>Physics<span class="token punctuation">.</span><span class="token function">Raycast</span><span class="token punctuation">(</span>ray<span class="token punctuation">,</span> <span class="token keyword">out</span> obstructionHitInfo<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> m_obstructionLayer<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{</span>
                        <span class="token class-name">DistanceGrabbable</span> obstruction <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>hitInfo<span class="token punctuation">.</span>collider <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                        <span class="token punctuation">{</span>
                            obstruction <span class="token operator">=</span> obstructionHitInfo<span class="token punctuation">.</span>collider<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponentInParent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DistanceGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>obstruction <span class="token operator">!=</span> grabbable <span class="token operator">&amp;&amp;</span> obstructionHitInfo<span class="token punctuation">.</span>distance <span class="token operator">&lt;</span> hitInfo<span class="token punctuation">.</span>distance<span class="token punctuation">)</span>
                        <span class="token punctuation">{</span>
                            dgOut <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                            collOut <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> dgOut <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">GrabVolumeEnable</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> enabled<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>m_useSpherecast<span class="token punctuation">)</span> enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">GrabVolumeEnable</span><span class="token punctuation">(</span>enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Just here to allow calling of a protected member function.</span>
      <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OffhandGrabbed</span><span class="token punctuation">(</span><span class="token class-name">OVRGrabbable</span> grabbable<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OffhandGrabbed</span><span class="token punctuation">(</span>grabbable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="handle-shooting-if-grabbed" style="position:relative;"><a href="#handle-shooting-if-grabbed" aria-label="handle shooting if grabbed permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handle shooting if grabbed</h3><ul>
<li>Modify the <code class="language-text">SimpleShoot</code> script replacing the <code class="language-text">Update</code> method with a new <code class="language-text">TriggerShoot</code> method:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TriggerShoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Animator<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTrigger</span><span class="token punctuation">(</span><span class="token string">"Fire"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div><ul>
<li>Add a new <code class="language-text">GetController</code> method to the <code class="language-text">OVRGrabber</code> script (at line 50):</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">    <span class="token keyword">public</span> <span class="token return-type class-name">OVRInput<span class="token punctuation">.</span>Controller</span> <span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> m_controller<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div><ul>
<li>Click on the gun object in the scene hierarchy</li>
<li>Add a new component <code class="language-text">ShootIfGrabbed</code> as a New script</li>
<li>Make the script:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShootIfGrabbed</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SimpleShoot</span> simpleShoot<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">OVRGrabbable</span> ovrGrabbable<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">OVRInput<span class="token punctuation">.</span>Button</span> shootingButton<span class="token punctuation">;</span>

    <span class="token comment">// Start is called before the first frame update</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        simpleShoot <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SimpleShoot<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ovrGrabbable <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>OVRGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Update is called once per frame</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ovrGrabbable<span class="token punctuation">.</span>isGrabbed <span class="token operator">&amp;&amp;</span> OVRInput<span class="token punctuation">.</span><span class="token function">GetDown</span><span class="token punctuation">(</span>shootingButton<span class="token punctuation">,</span> ovrGrabbable<span class="token punctuation">.</span>grabbedBy<span class="token punctuation">.</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            simpleShoot<span class="token punctuation">.</span><span class="token function">TriggerShoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul>
<li>Set the Shooting Button field of the new script to <code class="language-text">Primary Index Trigger</code></li>
</ul><h3 id="modify-some-variables" style="position:relative;"><a href="#modify-some-variables" aria-label="modify some variables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modify some variables</h3><ul>
<li>Click on the gun, change the Shot Power field to 1500</li>
<li>Double-click the <code class="language-text">Handgun_M1911</code> value in the Controller field of the Animator component</li>
<li>Click on the Shooting node and set the speed to 10</li>
</ul></section>
<section><h2 id="how-to-make-a-vr-game-in-unity---part-4---user-interface" style="position:relative;"><a href="#how-to-make-a-vr-game-in-unity---part-4---user-interface" aria-label="how to make a vr game in unity   part 4   user interface permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to make a VR game in Unity - Part 4 - User Interface</h2><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/h7z4E8Qy8Ks" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div><h3 id="the-wrong-way" style="position:relative;"><a href="#the-wrong-way" aria-label="the wrong way permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The wrong way</h3><ul>
<li>Right click on the Scene Hierarchy, select UI, then click Canvas</li>
<li>Right click on the Canvas, select UI, then click Text</li>
<li>Select the text, click on the box and select Stretch Mode <img src="https://rpl.cat/uploads/fR-o3ivCHInmUVslylP71710LmoPeJGuDHrzd91pP3k/public.png"></li>
<li>Change Left, Top, Pos Z, Right, Bottom all to 0</li>
<li>Change the font size to 135</li>
<li>Change the text to “Not VR Friendly Text”</li>
<li>Select the Canvas, change the Render Mode to Screen Space - Camera</li>
</ul><h3 id="fixing-it" style="position:relative;"><a href="#fixing-it" aria-label="fixing it permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixing it</h3><ul>
<li>Select the Canvas, change the Render Mode to World Space</li>
<li>Scale down the Canvas to 0.001, 0.001, 0.001</li>
<li>Reset the position to 0, 2, 1</li>
<li>Change the text of the Text node to “VR Friendly Text”</li>
</ul><h3 id="making-a-bullet-display" style="position:relative;"><a href="#making-a-bullet-display" aria-label="making a bullet display permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Making a bullet display</h3><ul>
<li>Move the Canvas component to a child of the gun</li>
<li>Reset the position to 0, 0, 0 and then move and scale the canvas</li>
<li>Change the text to 0</li>
<li>Modify the <code class="language-text">SimpleShoot</code> script to track the number of bullets:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShootIfGrabbed</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SimpleShoot</span> simpleShoot<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">OVRGrabbable</span> ovrGrabbable<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">OVRInput<span class="token punctuation">.</span>Button</span> shootingButton<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> maxNumberOfBullets <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Text</span> bulletText<span class="token punctuation">;</span>

    <span class="token comment">// Start is called before the first frame update</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        simpleShoot <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SimpleShoot<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ovrGrabbable <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>OVRGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bulletText<span class="token punctuation">.</span>text <span class="token operator">=</span> maxNumberOfBullets<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Update is called once per frame</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ovrGrabbable<span class="token punctuation">.</span>isGrabbed <span class="token operator">&amp;&amp;</span> OVRInput<span class="token punctuation">.</span><span class="token function">GetDown</span><span class="token punctuation">(</span>shootingButton<span class="token punctuation">,</span> ovrGrabbable<span class="token punctuation">.</span>grabbedBy<span class="token punctuation">.</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> maxNumberOfBullets <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            simpleShoot<span class="token punctuation">.</span><span class="token function">TriggerShoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bulletText<span class="token punctuation">.</span>text <span class="token operator">=</span> maxNumberOfBullets<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            maxNumberOfBullets<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul>
<li>Assign the Text component to the Bullet Text property</li>
</ul><h3 id="make-an-interactable-button" style="position:relative;"><a href="#make-an-interactable-button" aria-label="make an interactable button permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make an interactable button</h3><ul>
<li>Create another Canvas in the scene</li>
<li>Add a Button to the Canvas</li>
<li>Select the Canvas, change the Render Mode to World Space</li>
<li>Scale down the Canvas to 0.001, 0.001, 0.001</li>
<li>Reset the position to 0, 2, 1</li>
<li>Select the Button change the scale to 4, 4, 1</li>
<li>Select the Text node child of the Button</li>
<li>Change the text to “More cubes!”</li>
<li>Remove the Canvas Raycaster component from the Canvas</li>
<li>Add the <code class="language-text">OVR Raycaster</code> script to the Canvas</li>
<li>Delete the <code class="language-text">EventSystem</code> from the scene</li>
<li>Search your project for <code class="language-text">UIHelpers</code> and drag the prefab into the scene</li>
<li>Drag the <code class="language-text">LaserPointer</code> game object (in UIHelpers) to Pointer field of the <code class="language-text">OVR Raycaster</code> component of the Canvas</li>
<li>Set the Event Camera of the Canvas to the <code class="language-text">CenterEyeAnchor</code> of the <code class="language-text">TrackingSpace</code> in the <code class="language-text">OVRPlayerController</code></li>
</ul><h3 id="make-the-button-do-something" style="position:relative;"><a href="#make-the-button-do-something" aria-label="make the button do something permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make the button do something</h3><ul>
<li>Add a component to the Button game object called <code class="language-text">MoreCubes</code> (new script)</li>
<li>Once created, click the gear icon and Edit Script:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoreCubes</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">GameObject</span> cubePrefab<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Cube</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">Instantiate</span><span class="token punctuation">(</span>cubePrefab<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul>
<li>Drag the Cubes game object from the scene to the Assets in your project to create a prefab</li>
<li>Drag the Cubes prefab to the <code class="language-text">Cube Prefab</code> field of the <code class="language-text">MoreCubes</code> script on the Button</li>
<li>In the Button object’s Button Script click the <code class="language-text">+</code> in the On Click() section</li>
<li>Drag the <code class="language-text">MoreCubes</code> script into the slot marked None</li>
<li>Choose the <code class="language-text">MoreCubes.Cube()</code> function</li>
</ul><h3 id="add-raycasting" style="position:relative;"><a href="#add-raycasting" aria-label="add raycasting permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add Raycasting</h3><ul>
<li>Select the Sphere under the <code class="language-text">UIHelpers</code>object and increase the scale</li>
<li>Select the <code class="language-text">LaserPointer</code> check the box for the Line Renderer</li>
<li>Change the width in Postions to 50% (0.005)</li>
<li>In the <code class="language-text">LaserPointer</code>, click on the gear icon of the Laser Pointer (Script) and choose Edit Script</li>
<li>Add <code class="language-text">[SerializeField]</code> to the <code class="language-text">_laserBeamBehavior</code> private field:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SerializeField</span></span><span class="token punctuation">]</span>
    <span class="token keyword">private</span> <span class="token class-name">LaserBeamBehavior</span> _laserBeamBehavior<span class="token punctuation">;</span></code></pre></div><ul>
<li>In the editor change the field to <code class="language-text">On When Hit Target</code></li>
</ul></section>
<section><h2 id="how-to-make-a-vr-game-in-unity---part-5---controller-vibration" style="position:relative;"><a href="#how-to-make-a-vr-game-in-unity---part-5---controller-vibration" aria-label="how to make a vr game in unity   part 5   controller vibration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to make a VR game in Unity - Part 5 - Controller Vibration</h2><div class="gatsby-resp-iframe-wrapper" style="padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem" > <iframe src="https://www.youtube.com/embed/9KJqZBoc8m4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style=" position: absolute; top: 0; left: 0; width: 100%; height: 100%; "></iframe> </div><h3 id="add-a-gunfire-sound" style="position:relative;"><a href="#add-a-gunfire-sound" aria-label="add a gunfire sound permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add a gunfire sound</h3><p>Unless you already have a Desert Eagle sound effect here are some good choices (search for them in the Asset Store):</p><ul>
<li>Post Apocalypse Guns Demo by SOUND EARTH GAME AUDIO (AutoGun<em>1p</em>01.wav)</li>
<li>Futuristic Gun SoundFX by MGWSOUNDDESIGN (GunShot9.wav)</li>
<li>Fog of War Gun Sound FX Free by INTO THE VOID SOUND DESIGN (impacter.wav)</li>
</ul><h3 id="setup-the-audio-source" style="position:relative;"><a href="#setup-the-audio-source" aria-label="setup the audio source permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup the Audio Source</h3><ul>
<li>
<p>Select the gun game object and add an Audio Source component</p>
<ul>
<li>Uncheck Play on Awake</li>
<li>Set the Spatial Blend to 3D</li>
</ul>
</li>
<li>Modify the <code class="language-text">ShootIfGrabbed</code> script to add <code class="language-text">shootingAudio</code>:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShootIfGrabbed</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SimpleShoot</span> simpleShoot<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">OVRGrabbable</span> ovrGrabbable<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">OVRInput<span class="token punctuation">.</span>Button</span> shootingButton<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">int</span></span> maxNumberOfBullets <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Text</span> bulletText<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">AudioClip</span> shootingAudio<span class="token punctuation">;</span>

    <span class="token comment">// Start is called before the first frame update</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        simpleShoot <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SimpleShoot<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ovrGrabbable <span class="token operator">=</span> <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>OVRGrabbable<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bulletText<span class="token punctuation">.</span>text <span class="token operator">=</span> maxNumberOfBullets<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Update is called once per frame</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ovrGrabbable<span class="token punctuation">.</span>isGrabbed <span class="token operator">&amp;&amp;</span> OVRInput<span class="token punctuation">.</span><span class="token function">GetDown</span><span class="token punctuation">(</span>shootingButton<span class="token punctuation">,</span> ovrGrabbable<span class="token punctuation">.</span>grabbedBy<span class="token punctuation">.</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> maxNumberOfBullets <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AudioSource<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">PlayOneShot</span><span class="token punctuation">(</span>shootingAudio<span class="token punctuation">)</span><span class="token punctuation">;</span>
            simpleShoot<span class="token punctuation">.</span><span class="token function">TriggerShoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bulletText<span class="token punctuation">.</span>text <span class="token operator">=</span> maxNumberOfBullets<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            maxNumberOfBullets<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>maxNumberOfBullets <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> maxNumberOfBullets <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="haptic-feedback" style="position:relative;"><a href="#haptic-feedback" aria-label="haptic feedback permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Haptic feedback</h3><ul>
<li>Create an empty game object called Vibration Manager and reset the position</li>
<li>Add a component to the object called <code class="language-text">VibrationManager</code> (new script)</li>
<li>Edit the <code class="language-text">VibrationManager</code> script:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VibrationManager</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">VibrationManager</span> singleton<span class="token punctuation">;</span>

    <span class="token comment">// Start is called before the first frame update</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">&amp;&amp;</span> singleton <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            singleton <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TriggerVibration</span><span class="token punctuation">(</span><span class="token class-name">AudioClip</span> vibrationAudio<span class="token punctuation">,</span> <span class="token class-name">OVRInput<span class="token punctuation">.</span>Controller</span> controller<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">OVRHapticsClip</span> clip <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OVRHapticsClip</span><span class="token punctuation">(</span>vibrationAudio<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>LTouch<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            OVRHaptics<span class="token punctuation">.</span>LeftChannel<span class="token punctuation">.</span><span class="token function">Preempt</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>RTouch<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            OVRHaptics<span class="token punctuation">.</span>RightChannel<span class="token punctuation">.</span><span class="token function">Preempt</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><ul>
<li>Edit the <code class="language-text">ShootIfGrabbed</code> script and add the following line (just after the call to <code class="language-text">PlayOneShot</code> in <code class="language-text">Update</code>):</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">VibrationManager<span class="token punctuation">.</span>singleton<span class="token punctuation">.</span><span class="token function">TriggerVibration</span><span class="token punctuation">(</span>shootingAudio<span class="token punctuation">,</span> ovrGrabbable<span class="token punctuation">.</span>grabbedBy<span class="token punctuation">.</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><h3 id="custom-haptic-clips" style="position:relative;"><a href="#custom-haptic-clips" aria-label="custom haptic clips permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom haptic clips</h3><ul>
<li>Edit the <code class="language-text">VibrationManager</code> script and add another version of the <code class="language-text">TriggerVibration</code> method:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">TriggerVibration</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> iteration<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> frequency<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> strength<span class="token punctuation">,</span> <span class="token class-name">OVRInput<span class="token punctuation">.</span>Controller</span> controller<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">OVRHapticsClip</span> clip <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OVRHapticsClip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iteration<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            clip<span class="token punctuation">.</span><span class="token function">WriteSample</span><span class="token punctuation">(</span>i <span class="token operator">%</span> frequency <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> strength <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>LTouch<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            OVRHaptics<span class="token punctuation">.</span>LeftChannel<span class="token punctuation">.</span><span class="token function">Preempt</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">==</span> OVRInput<span class="token punctuation">.</span>Controller<span class="token punctuation">.</span>RTouch<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            OVRHaptics<span class="token punctuation">.</span>RightChannel<span class="token punctuation">.</span><span class="token function">Preempt</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre></div><ul>
<li>Within the <code class="language-text">ShootIfGrabbed</code> script, replace the call to <code class="language-text">TriggerVibration</code> with:</li>
</ul><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">VibrationManager<span class="token punctuation">.</span>singleton<span class="token punctuation">.</span><span class="token function">TriggerVibration</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> ovrGrabbable<span class="token punctuation">.</span>grabbedBy<span class="token punctuation">.</span><span class="token function">GetController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></section>
<section><h2 id="debugging-on-macos-and-the--button-in-unity" style="position:relative;"><a href="#debugging-on-macos-and-the--button-in-unity" aria-label="debugging on macos and the  button in unity permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugging on MacOS and the ▶ button in Unity</h2><blockquote>
<p>Note: the following is for Oculus Integration 1.39</p>
</blockquote><p>To get setup:</p><ul>
<li>Remove the Main Camera</li>
<li>Set the Tracking Origin Type of the <code class="language-text">OVRCameraRig</code> to <code class="language-text">Stage</code></li>
</ul><p>Click ▶ and you’ll see:</p><p><img src="https://rpl.cat/uploads/c0dZNeP43cqet2xhmGpuor6An9IL9R5G7wBq3dNJrpU/public.png"></p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">NullReferenceException: Object reference not set to an instance of an object
OculusSampleFrameworkUtil.HandlePlayModeState (UnityEditor.PlayModeStateChange state) (at Assets/Oculus/SampleFramework/Editor/OculusSampleFrameworkUtil.cs:43)
UnityEditor.EditorApplication.Internal_PlayModeStateChanged (UnityEditor.PlayModeStateChange state) (at /Users/builduser/buildslave/unity/build/Editor/Mono/EditorApplication.cs:302)</code></pre></div><p>This error is occuring because the <code class="language-text">wrapperVersion</code> static variable is <code class="language-text">null</code>. You could remove this line, but it will only lead to another problem down the line. Instead fix the <code class="language-text">wrapperVersion</code> by changing this line (for me it is line 40) of <code class="language-text">OVRPlugin.cs</code>:</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">System<span class="token punctuation">.</span>Version</span> wrapperVersion <span class="token operator">=</span> _versionZero<span class="token punctuation">;</span></code></pre></div><p>to:</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">System<span class="token punctuation">.</span>Version</span> wrapperVersion <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Version</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div><p>Changing this eliminates the error, but the OVR Headset Emulator script will not work. The problem is that the <code class="language-text">OVRPlugin</code> is never initialized and therefore the <code class="language-text">OVRManager</code> is never initialized. The <code class="language-text">initialized</code> method (at line 893 for me) looks like:</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> initialized
	<span class="token punctuation">{</span>
		<span class="token keyword">get</span> <span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> OVRPLUGIN_UNSUPPORTED_PLATFORM</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">else</span></span>
			<span class="token keyword">return</span> OVRP_1_1_0<span class="token punctuation">.</span><span class="token function">ovrp_GetInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> OVRPlugin<span class="token punctuation">.</span>Bool<span class="token punctuation">.</span>True<span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span></code></pre></div><p>The Unity Editor on Mac does not support the <code class="language-text">OVRPlugin</code> (it is an unsupported platform). That’s fine, but let’s pretend it was initialized, even though it is unsupported (changing <code class="language-text">return false</code> to <code class="language-text">return true</code>):</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> initialized
	<span class="token punctuation">{</span>
		<span class="token keyword">get</span> <span class="token punctuation">{</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> OVRPLUGIN_UNSUPPORTED_PLATFORM</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">else</span></span>
			<span class="token keyword">return</span> OVRP_1_1_0<span class="token punctuation">.</span><span class="token function">ovrp_GetInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> OVRPlugin<span class="token punctuation">.</span>Bool<span class="token punctuation">.</span>True<span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span></code></pre></div><p>With this, the ▶ button should work for some quicker debugging. Note: nothing is running on the Oculus when you use that button, it is all faked.</p><p>As of 1.39, when you are finished playing your scene the <code class="language-text">OnDestroy</code> block will be called for <code class="language-text">OvrAvatarSDKManager</code> (if you have a <code class="language-text">LocalAvatar</code>).
You’ll see an error in the console (though it really doesn’t cause a problem). To fix it change:</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        CAPI<span class="token punctuation">.</span><span class="token function">Shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        CAPI<span class="token punctuation">.</span><span class="token function">ovrAvatar_RegisterLoggingCallback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        CAPI<span class="token punctuation">.</span><span class="token function">ovrAvatar_Shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div><p>to:</p><div class="gatsby-highlight" data-language="csharp"><pre class="language-csharp"><code class="language-csharp">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        CAPI<span class="token punctuation">.</span><span class="token function">Shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">if</span> (UNITY_EDITOR_WIN || UNITY_STANDALONE_WIN || (UNITY_ANDROID &amp;&amp; !UNITY_EDITOR))</span>
        CAPI<span class="token punctuation">.</span><span class="token function">ovrAvatar_RegisterLoggingCallback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        CAPI<span class="token punctuation">.</span><span class="token function">ovrAvatar_Shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>
    <span class="token punctuation">}</span></code></pre></div></section>
<section><h2 id="seeing-what-is-happening-on-the-oculus-quest" style="position:relative;"><a href="#seeing-what-is-happening-on-the-oculus-quest" aria-label="seeing what is happening on the oculus quest permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Seeing what is happening on the Oculus Quest</h2><p>Building programs for the Rift was easier because you could debug everything that was happening in realtime. On the Quest you can’t but you can see what is happening on the device and view logs using <code class="language-text">adb</code>, the Android Debug Bridge.</p><p>On a Mac, in a Terminal, run:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">brew cask <span class="token function">install</span> android-platform-tools
brew <span class="token function">install</span> scrcpy</code></pre></div><p>Once that is installed, attach your Oculus via USB-C and run:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">scrcpy -c <span class="token number">1440</span>:1550:0:0</code></pre></div><p>This should attach a view for a single eye. If you want to see both eyes you can just use <code class="language-text">scrcpy</code> <label for="sd-less-than-code" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sd-less-than-code" class="margin-toggle" /><span class="sidenote"><code>scrcpy</code> or Screen-Copy is part of Genymobile and can be found <a href="https://github.com/Genymobile/scrcpy#mac-os">https://github.com/Genymobile/scrcpy#mac-os</a>. There are options for other platforms as well. See also: <a href="https://note.mu/masaki_ponpoko/n/nc759f6499c79">https://note.mu/masaki_ponpoko/n/nc759f6499c79</a></span>. If you get an error about the connection you can usually run:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb disconnect</code></pre></div><p>If that doesn’t work you can do the more extreme:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb kill-server</code></pre></div><p>And then run <code class="language-text">scrcpy</code> again.</p><p>You can also connect to the Quest and see the logs.</p><p>For more information on using <code class="language-text">adb</code> with the Oculus Quest you can follow the tutorial.</p><h3 id="checking-the-logs" style="position:relative;"><a href="#checking-the-logs" aria-label="checking the logs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Checking the logs</h3><p>All of your <code class="language-text">apk</code> files are running on the quest and you can’t really investigate what is happening
through Unity. However, you check the logs from the Quest. The logs are verbose so it is sometimes
helpful to start by clearing them:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">adb logcat -c</code></pre></div><p>Then check them:</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">adb logcat -d</code></pre></div><p>You can append to the log using <code class="language-text">System.Debug</code> statements in your application.</p><h3 id="connecting-via-wi-fi" style="position:relative;"><a href="#connecting-via-wi-fi" aria-label="connecting via wi fi permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connecting via Wi-fi</h3><p>First you’ll want to make sure that the device is connected via USB:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb devices</code></pre></div><p>Once you’ve got the device connected you can check it’s local IP address:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb shell <span class="token function">ip</span> route</code></pre></div><p>Now setup <code class="language-text">tcpip</code> for the connected device and tell it to listen on port <code class="language-text">5555</code>:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb tcpip <span class="token number">5555</span></code></pre></div><p>Once you’ve done this the device is still connected to USB and your computer is communicating via
USB but it is also listening for <code class="language-text">tcpip</code> connections via Wi-Fi. Connect to it via Wi-Fi:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb connect <span class="token operator">&lt;</span>ipaddress<span class="token operator">></span>:5555</code></pre></div><p>At this point you can unplug the USB cable and you should still be able to work with the Quest via
<code class="language-text">adb</code> over Wi-Fi. For example:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb logcat -d</code></pre></div><p>If you want to explicitly connect to a particular Quest you can specify the server with <code class="language-text">-s</code>:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb -s <span class="token operator">&lt;</span>ipaddress<span class="token operator">></span>:5555 logcat -d</code></pre></div><p>To go back to using USB, plug in the cable again and connect:</p><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">adb connect usb</code></pre></div></section>
<section><h2 id="more-learning" style="position:relative;"><a href="#more-learning" aria-label="more learning permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More learning</h2><p>I’ve used other resources when learning. I’ll list some of them here:</p><ul>
<li><a href="https://www.udemy.com/share/1000lMBkQac1dQRng=/">The Ultimate Guide to Game Development with Unity 2019</a>. This course costs between $10-12 if you catch it on sale. I highly recommend it if you are just getting started. It clearly explains how to move around the Unity interface, how to move quickly, and basic concepts of scripting.</li>
<li>Using the new Terrain Tools: <a href="https://blogs.unity3d.com/2019/05/28/speed-up-your-work-with-the-new-terrain-tools-package/">Speed up your work with the new Terrain Tools Package</a>.</li>
<li><a href="https://wiki.unrealengine.com/GitHub_Desktop_to_manage_your_project">Using GitHub Desktop to Manage your Project</a> and <a href="https://www.youtube.com/watch?v=qpXxcvS-g3g">How to use GitHub with Unity</a> (youtube).</li>
</ul></section>
<div class="footnotes">
<hr>
<ol>
<li id="fn-package">
<p>If you leave this at the default of <code class="language-text">com.oculus.*</code>, nothing will happen when it attempts to deploy the player. Unity will appear to complete but your Quest will do nothing (not even install the application to Unknown Sources). Change the package name to <code class="language-text">com.DefaultCompany.OculusQuestTest1</code> or a name matching what you have named your Company and Product Name.</p>
<a href="#fnref-package" class="footnote-backref">↩</a>
</li>
</ol>
</div></div><hr/><h2>Comments</h2><div class="sc-ifAKCX ddlDEo github"><div><p>Thanks for reading ❤️ – comment by replying to the <a href="https://github.com/jeffrafter/jeffrafter.github.io/issues/7">issue for this post</a>.<!-- --> <!-- -->There’s no comments yet; you could be the first.<br/></p></div><div class="sc-gzVnrw bOnSNx"><a href="https://github.com/jeffrafter/jeffrafter.github.io/issues/7#new_comment_field" target="_blank" rel="noreferrer noopener" class="button btn">Add a comment →</a></div></div><hr/><h2>There’s more to read</h2><div><p><em>Looking for more long-form posts? Here ya go...</em></p></div><ul class="sc-htoDjs gXLbcD"><li><a rel="prev" href="/gatsby-with-typescript/">← <!-- -->Building a Static Gatsby-based Website with TypeScript</a></li><li><a rel="next" href="/working-with-github-actions/">Working with GitHub Actions<!-- --> →</a></li></ul></div></article></main><footer class="sc-bwzfXH aCPwf footer">© <!-- -->2020<!-- -->,<!-- --> <a href="https://jeffrafter.com">jeffrafter.com</a>. Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-61511214-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/oculus-quest/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-3b271d6a60df7cd92087.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-6846fb06ec67c7df9104.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-06b4f92e6d6da3e7e748.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-62ade78c2e0e44b33fb5.js"],"component---src-pages-tags-tsx":["/component---src-pages-tags-tsx-85ba1002141d5ed31e60.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-30b85df3d8081f386f13.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-1289ad2b8e0e8d66d692.js"]};/*]]>*/</script><script src="/component---src-templates-post-tsx-30b85df3d8081f386f13.js" async=""></script><script src="/commons-52923487d36b93dc329d.js" async=""></script><script src="/app-3b271d6a60df7cd92087.js" async=""></script><script src="/styles-fa79fef4936efa84b233.js" async=""></script><script src="/framework-8dcecaaefd71e2213eb2.js" async=""></script><script src="/webpack-runtime-38c8a4ef93b968ef91ae.js" async=""></script></body></html>