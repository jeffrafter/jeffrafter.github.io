{"componentChunkName":"component---src-templates-post-tsx","path":"/oculus-quest/","webpackCompilationHash":"ff82b448ff05a0cfe069","result":{"data":{"site":{"siteMetadata":{"title":"Jeff Rafter"}},"markdownRemark":{"id":"2578ecf2-dff3-5416-9f63-56aefa76961d","excerpt":"The Oculus Quest is entirely immersive and a blast to play with. Of course, the moment I put it on, I immediately wanted to make my own games and got started with Unity. There are a few blog posts and videos that helped me on my way.  Getting started To develop for you Oculus you’ll not only need an Oculus account but you may want to setup an Oculus Organiztion (free). Additionally (for my purposes), you’ll need a Unity account. I’m using a personal account (also free). Mac versus Windows I’m using a MacBook Pro. Many of the tutorials and videos you’ll find assume you’re working on Windows. This can create some challenges but the biggest challenges are around the platform support for the Oculus Quest itself. Oculus doesn’t make a version of it’s Oculus Desktop app (or libraries) available on MacOS. Because of this you’ll want to start with tutorials that are specific to the Mac and adjust. Unity & initial setup I followed a couple of tutorials for getting Unity Hub and Unity installed. I recommend: How to get started with Oculus Quest and Unity on macOS How to get started with Oculus Quest development in Unity If you prefer videos:  Learn Once I had the basics working, and could load games I built in Unity on my Quest, I wanted to do more. I found a set of fantastic tutorial videos by Valem, Quentin Valembois and was hooked. As I went through the videos I took notes and (with permission) am posting those here. While watching these videos, you might notice Valem is using the ▶ button to debug. This works because he is actually developing for the Rift in the videos (notice that the controllers are upside-down). In a later video on recreating Slenderman (at 1:47) he explains how to use the ▶ button while building for the Oculus Quest. Unfortunately that won’t work on MacOS because the Oculus plugin is not supported. There are notes on how to get this working at the end of this post.  A note on the Oculus Integration asset The Oculus Integration in the Unity Asset Store solves an amazing amount of problems for you. Unfortunately,\nthe updates are not necessarily backward compatible and it makes following tutorials difficult. Most\nof the tutorials listed here were for the 1.38 version. The current 1.39 version requires a few more steps. After you download and import the kit you’ll restart Unity. You should see a new menu for Oculus:  Choose  | . Choose  |  From your project search, find the newly created  and open it in your editor.\nYou’ll want to change  to  so that\nwhen you choose  it will actually run the generated APK on your Oculus Quest. Here is the full file: If you’re using a  you’ll notice you don’t have hands. You’ll need to add an application id in  |  | . You can get an Application Id by creating an application for your organization on the Oculus Developer website at https://dashboard.oculus.com | . There’s a good shortcut for testing though: just enter  for the  field.  How to make a VR game in Unity - Part 1 - Setup, Hand presence, Grabbing object Setup the project Set Unknown Sources in the Oculus app (Windows only) In Unity Hub create a new 3D app Click Build Settings in the File menu Choose Android, click Switch Platform Change the Texture Compression to ASTC (not required, very slow) Open Player Settings: Set the Company and Product Name Remove  from the Graphics APIs list (Other Settings) Set the Package Name (Other Settings) Set the Minimum API Level to Android 4.4 ‘KitKat’ (Other Settings) Check VR Intergation (XR Settings) Add the Oculus Virtual Reality SDK (XR Settings) Download Oculus Integration from the Asset Store (slow) Import All from the Oculus Integration (very slow) Make the scene Create a 3D plane Create a 3D cube Create a red material and apply it to cube Create a black material and apply it to plane Delete the main camera Add  to the scene and move it back away from the cube Set Tracking Origin Type to  on the  child (note: if you are using the ▶ button, this should be ) Add the  component to the  Drag the  to the  Camera Rig field Check the Dynamic Height box Note: As of 1.39 you also need to set the Target Devices of the OVR Manager (Script) to Quest  Simple grabbing Add  prefab to the  of the  Add  and  prefab to the  Make the red cube wider (more like a table) Add an empty object called Cubes and add some cubes (6 of them) Select all of the cubes and add the  script Add the  component Build and run In Build Settings click Add Open Scenes Plug in your Oculus (you may need to “Trust this computer”) On Windows you should be able to click play On Mac click Build and Run (slow first build) From the comments: Colliding with the cubes and flying into the air? “Some of you have experienced a bug where the player fly when you put your hands under you. A really simple fix is to set the body and the hand to a different layer then in Physics settings uncheck the collision between the two layer in the collision layer matrix! :) Hope this will help some of you!” https://www.youtube.com/watch?v=sKQOlqNe_WY&lc=Ugy0IV2wmiRMywTkPk94AaABAg Note: setting up layer interactions happens more in the next section.  How to make a VR game in Unity - Part 2 - Custom Hand, Distance grab Setting up custom hands Remove the  you added Add  and  to the scene Select both, drag the  of the  to the Parent Transform property of the custom hands Find the  component in , expand the Materials section and set the material to  (same as the material for ) Expand the  material, change the Inner Color to aqua, increase the Rim Power Go to Project Settings | Time and change the Fixed Timestep to   Setting up distance grab Remove the custom hands Select all of the cubes Set the Collision Detection to Continuous Dynamic Remove the OVR Grabbable Script Add the Distance Grabbable Script Add  and  prefabs to scene Set the Player field to the  Set the  to the Parent Transform Set the Grab Object in Layer field to the number corresponding to your Cubes Layer (9) Set Obstruction Layer to -1 (none) Create an Empty Game Object and call it Grab Manager and add it to the  (this is different from the video, but solves the problem where only one box can be grabbed, also this is fixed in the following videos) Add the Sphere Collider component to the Grab Manager Set Is Trigger to true Set the Radius to something larger (3.5 is good) Adding the crosshairs Click the object that you want to have a crosshair on Once selected, create an Empty Game Object called Crosshair Add the Grabbable Crosshair Script to the object Create a child Quad object called “On” Remove the mesh collider of the quad Add the  Material Move it slightly behind the cube Duplicate the child Quad and call it “Off” Change the material to  Make it smaller by lowering the scale Change the material color to gray Drag  to the Targeted Crosshair field of the Crosshair script Drag  to the Enabled Crosshair field of the Crosshair script Make a prefab from the crosshair (drag from the scene to Assets) Drag the prefab into the remaining cubes  How to make a VR game in Unity - Part 3 - VR Shooter Setup the gun In the Asset Store find the asset: “Modern Guns: Handgun” published by NOKOBOT. Smash the download button. Click Import, then Import All Open the folder in Assets, Nokobot, ModernGuns_Handgun, Prefabs, Active guns Drag  prefab into the scene Scale it down (0.3) and move it to the left of the boxes Add a  component Add the  script Set the layer to the Grabbable layer (same as Cubes) Add a new Empty 3D object to the gun called  Add a new Cube to  that aligns to the barrel  Duplicate that cube to  and align the duplicate to the grip  Remove the Mesh Renderer of both cubes Remove the Cube (Mesh Filter) of both cubes Drag each cube to the Grab Points field of the Distance Grabbable object in the gun Add the crosshair prefab to the gun Scale the crosshair down a little bit Modify the Distance Grabbable script Click on the gun, go to the Distance Grabbable object, click the gear and choose Edit Script. Everywhere we are using the  check if null and return (): Modify the Grab Manager script Click on the Grab Manager in the  Click the gear icon on the Grab Manager Script and choose Edit Script Change  to : Fix the gun position and make it snap Note the position of the gun; remember where it is (-1, 1.15, -0.23) Move the gun position to 0, 0, 0 (temporarily) Create an Empty Game Object called Hand Gun Offset Move the object to 0, 0, 0 then align it where the gun should be held  Drag the empty game object to Assets to make a prefab Replace the gun where you had it on the table Drag the Hand Gun Offset prefab to the gun Snap Offset Check Snap Position and Snap Orientation Fix the DistanceGrabber script for the left hand Click on the  Click on the gear icon in the Distance Grabber component and choose Edit Script Copy the else statement of  into  Handle shooting if grabbed Modify the  script replacing the  method with a new  method: Add a new  method to the  script (at line 50): Click on the gun object in the scene hierarchy Add a new component  as a New script Make the script: Set the Shooting Button field of the new script to  Modify some variables Click on the gun, change the Shot Power field to 1500 Double-click the  value in the Controller field of the Animator component Click on the Shooting node and set the speed to 10  How to make a VR game in Unity - Part 4 - User Interface The wrong way Right click on the Scene Hierarchy, select UI, then click Canvas Right click on the Canvas, select UI, then click Text Select the text, click on the box and select Stretch Mode  Change Left, Top, Pos Z, Right, Bottom all to 0 Change the font size to 135 Change the text to “Not VR Friendly Text” Select the Canvas, change the Render Mode to Screen Space - Camera Fixing it Select the Canvas, change the Render Mode to World Space Scale down the Canvas to 0.001, 0.001, 0.001 Reset the position to 0, 2, 1 Change the text of the Text node to “VR Friendly Text” Making a bullet display Move the Canvas component to a child of the gun Reset the position to 0, 0, 0 and then move and scale the canvas Change the text to 0 Modify the  script to track the number of bullets: Assign the Text component to the Bullet Text property Make an interactable button Create another Canvas in the scene Add a Button to the Canvas Select the Canvas, change the Render Mode to World Space Scale down the Canvas to 0.001, 0.001, 0.001 Reset the position to 0, 2, 1 Select the Button change the scale to 4, 4, 1 Select the Text node child of the Button Change the text to “More cubes!” Remove the Canvas Raycaster component from the Canvas Add the  script to the Canvas Delete the  from the scene Search your project for  and drag the prefab into the scene Drag the  game object (in UIHelpers) to Pointer field of the  component of the Canvas Set the Event Camera of the Canvas to the  of the  in the  Make the button do something Add a component to the Button game object called  (new script) Once created, click the gear icon and Edit Script: Drag the Cubes game object from the scene to the Assets in your project to create a prefab Drag the Cubes prefab to the  field of the  script on the Button In the Button object’s Button Script click the  in the On Click() section Drag the  script into the slot marked None Choose the  function Add Raycasting Select the Sphere under the object and increase the scale Select the  check the box for the Line Renderer Change the width in Postions to 50% (0.005) In the , click on the gear icon of the Laser Pointer (Script) and choose Edit Script Add  to the  private field: In the editor change the field to   How to make a VR game in Unity - Part 5 - Controller Vibration Add a gunfire sound Unless you already have a Desert Eagle sound effect here are some good choices (search for them in the Asset Store): Post Apocalypse Guns Demo by SOUND EARTH GAME AUDIO (AutoGun1p01.wav) Futuristic Gun SoundFX by MGWSOUNDDESIGN (GunShot9.wav) Fog of War Gun Sound FX Free by INTO THE VOID SOUND DESIGN (impacter.wav) Setup the Audio Source Select the gun game object and add an Audio Source component Uncheck Play on Awake Set the Spatial Blend to 3D Modify the  script to add : Haptic feedback Create an empty game object called Vibration Manager and reset the position Add a component to the object called  (new script) Edit the  script: Edit the  script and add the following line (just after the call to  in ): Custom haptic clips Edit the  script and add another version of the  method: Within the  script, replace the call to  with:  Debugging on MacOS and the ▶ button in Unity Note: the following is for Oculus Integration 1.39 To get setup: Remove the Main Camera Set the Tracking Origin Type of the  to  Click ▶ and you’ll see:  This error is occuring because the  static variable is . You could remove this line, but it will only lead to another problem down the line. Instead fix the  by changing this line (for me it is line 40) of : to: Changing this eliminates the error, but the OVR Headset Emulator script will not work. The problem is that the  is never initialized and therefore the  is never initialized. The  method (at line 893 for me) looks like: The Unity Editor on Mac does not support the  (it is an unsupported platform). That’s fine, but let’s pretend it was initialized, even though it is unsupported (changing  to ): With this, the ▶ button should work for some quicker debugging. Note: nothing is running on the Oculus when you use that button, it is all faked. As of 1.39, when you are finished playing your scene the  block will be called for  (if you have a ).\nYou’ll see an error in the console (though it really doesn’t cause a problem). To fix it change: to:  Seeing what is happening on the Oculus Quest Building programs for the Rift was easier because you could debug everything that was happening in realtime. On the Quest you can’t but you can see what is happening on the device and view logs using , the Android Debug Bridge. On a Mac, in a Terminal, run: Once that is installed, attach your Oculus via USB-C and run: This should attach a view for a single eye. If you want to see both eyes you can just use  . If you get an error about the connection you can usually run: If that doesn’t work you can do the more extreme: And then run  again. You can also connect to the Quest and see the logs. For more information on using  with the Oculus Quest you can follow the tutorial. Checking the logs All of your  files are running on the quest and you can’t really investigate what is happening\nthrough Unity. However, you check the logs from the Quest. The logs are verbose so it is sometimes\nhelpful to start by clearing them: Then check them: You can append to the log using  statements in your application. Connecting via Wi-fi First you’ll want to make sure that the device is connected via USB: Once you’ve got the device connected you can check it’s local IP address: Now setup  for the connected device and tell it to listen on port : Once you’ve done this the device is still connected to USB and your computer is communicating via\nUSB but it is also listening for  connections via Wi-Fi. Connect to it via Wi-Fi: At this point you can unplug the USB cable and you should still be able to work with the Quest via\n over Wi-Fi. For example: If you want to explicitly connect to a particular Quest you can specify the server with : To go back to using USB, plug in the cable again and connect:  More learning I’ve used other resources when learning. I’ll list some of them here: The Ultimate Guide to Game Development with Unity 2019. This course costs between $10-12 if you catch it on sale. I highly recommend it if you are just getting started. It clearly explains how to move around the Unity interface, how to move quickly, and basic concepts of scripting. Using the new Terrain Tools: Speed up your work with the new Terrain Tools Package. Using GitHub Desktop to Manage your Project and How to use GitHub with Unity (youtube).","html":"<section><figure class=\"fullwidth\">\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 1120px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACq0lEQVQoz2O4cOEqAwiA6HPnLjMkxKeD+THRiYwMUNDZMcU1OTmt2sfbe0pmRmb41CnTBGFyq1etAavbtnUHAxxER0UzWFtZM0eExzBv27aXobioCm6Yo4PTTH+/wP9hIWH/Pdw9/kdGRP0vzC981d/X37dz524+kJqVK1fD1TP4+vgiOGggOCi0xtLC8r+xkfE/oLrfLs4uv328ff/Gx8b/7+vt/z9/3sIOkLrq6lrWtrYWhMaigkJ+O1u70tiYpOrduw5JgcQqyhvWeXv5/VdWVv7v5Oj0z8rS+r+5mflfN1ePP0GBIT8KC4r/T50y/RDMjLTULIjD/P38OYDeWm9qYloWF5ti29jQmrJ0yRrtmurGNYb6hnaGBoYvVVVU/4uKij3X1dX/r69n8N/S0hbofe//iYnJs148/8xXWFBiAzIrMSGDgSElOc0xLDRiIkjAxtpWOygovG7tms08tbX1qiCxQL9AnaiIyH3BgUFH3F3dN6uqqs+2tnKYam/vbguUZsxIz7MJD4sAWuBuB3bh////WRLiU0utra0vOtg73Q4JiVYHiU+aNMNu2tQ5LoYGRgoRYeHrU5NTFuAKa2CEHrS3s7/5/ftnZpgYq5mp6TkjI+P/0ZFxriCB6dMXsFSU1/p5eXg3O9jZ+8MU+vkGMNlYOzOB2PFxSe5uru77dLR1/ro4u37bu3efDEOAfwg0liUYdbR1dwMVRIN4/Hx8zMiuMDczY9LS1GQ0NTFngqSAcHVg2P8HpoLnwKDqAFrkClPLyM3NzQ5yJTs7BxeQ5gFidiYmJl4+Pn4RTk4uGTY2NjlGBkZpsK2MjGJAmldERExcRVklRFNDSw7JXmYYwc7MzAxK/SDMAcQsUHFWIGaDYnYo5gBaxgEVAwcX0GIeYWERdhYWFiYAupHPVuv8p40AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Oculus Quest with Controllers\"\n        title=\"\"\n        src=\"/static/47d85126ab81ecb18340ae67f881246e/0324b/180924_Quest_FF_light_transparent_shadow.png\"\n        srcset=\"/static/47d85126ab81ecb18340ae67f881246e/01387/180924_Quest_FF_light_transparent_shadow.png 320w,\n/static/47d85126ab81ecb18340ae67f881246e/e49a9/180924_Quest_FF_light_transparent_shadow.png 640w,\n/static/47d85126ab81ecb18340ae67f881246e/0324b/180924_Quest_FF_light_transparent_shadow.png 1120w\"\n        sizes=\"(max-width: 1120px) 100vw, 1120px\"\n      />\n    </span>\n  </span>\n  </figure><figcaption class=\"fullwidth\">\nImage credit: <a href=\"https://amzn.to/2SEOSJG\">Oculus Quest on Amazon</a>\n</figcaption><p>The Oculus Quest is entirely immersive and a blast to play with. Of course, the moment I put it on, I immediately wanted to make my own games and got started with Unity<label for=\"sd-there-are-less-than\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-there-are-less-than\" class=\"margin-toggle\" /><span class=\"sidenote\">There are <a href=\"https://gametorrahod.com/objectively-comparing-unity-and-unreal-engine/\">lots</a> of <a href=\"https://developer.oculus.com/documentation/quest/latest/concepts/book-intro/?locale=en_US\">articles</a> on Unity versus Unreal versus building your own engine entirely from scratch using Oculus Native support. For me, my goal was to get something running as quickly as possible. Harder decisions later.</span>. There are a few blog posts and videos that helped me on my way.</p></section>\n<section><h2 id=\"getting-started\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting started</h2><p>To develop for you Oculus you’ll not only need an Oculus account but you may want to setup an Oculus Organiztion (free). Additionally (for my purposes), you’ll need a Unity account. I’m using a personal account (also free).</p><h3 id=\"mac-versus-windows\"><a href=\"#mac-versus-windows\" aria-label=\"mac versus windows permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mac versus Windows</h3><p>I’m using a MacBook Pro. Many of the tutorials and videos you’ll find assume you’re working on Windows. This can create some challenges but the biggest challenges are around the platform support for the Oculus Quest itself. Oculus doesn’t make a version of it’s Oculus Desktop app (or libraries) available on MacOS. Because of this you’ll want to start with tutorials that are specific to the Mac and adjust.</p><h3 id=\"unity--initial-setup\"><a href=\"#unity--initial-setup\" aria-label=\"unity  initial setup permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Unity &#x26; initial setup</h3><p>I followed a couple of tutorials for getting Unity Hub and Unity installed. I recommend:</p><ul>\n<li><a href=\"https://medium.com/@sofaracing/how-to-develop-for-oculus-quest-on-macos-with-unity-5aa487b80d13\">How to get started with Oculus Quest and Unity on macOS</a></li>\n<li><a href=\"https://skarredghost.com/2019/06/08/how-get-started-oculus-quest-development-unity/\">How to get started with Oculus Quest development in Unity</a></li>\n</ul><p>If you prefer videos:</p>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/eySe4Wj6xbk\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          \n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/qiJpjnzW-mw\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          </section>\n<section><h2 id=\"learn\"><a href=\"#learn\" aria-label=\"learn permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Learn</h2><p>Once I had the basics working, and could load games I built in Unity on my Quest, I wanted to do more. I found a set of fantastic tutorial videos by <a href=\"https://www.youtube.com/channel/UCPJlesN59MzHPPCp0Lg8sLw\">Valem</a>, <a href=\"https://twitter.com/ValemVR\">Quentin Valembois</a> and was hooked. As I went through the videos I took notes and (with permission) am posting those here.</p><p>While watching these videos, you might notice Valem is using the ▶ button to debug. This works because he is actually developing for the Rift in the videos (notice that the controllers are upside-down). In a later <a href=\"https://www.youtube.com/watch?v=LihEW5a1Tjw\">video on recreating Slenderman</a> (at 1:47) he explains how to use the ▶ button while building for the Oculus Quest. Unfortunately that won’t work on MacOS because the Oculus plugin is not supported. There are notes on how to get this working at the end of this post.</p></section>\n<section><h2 id=\"a-note-on-the-oculus-integration-asset\"><a href=\"#a-note-on-the-oculus-integration-asset\" aria-label=\"a note on the oculus integration asset permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A note on the Oculus Integration asset</h2><p>The Oculus Integration in the Unity Asset Store solves an amazing amount of problems for you. Unfortunately,\nthe updates are not necessarily backward compatible and it makes following tutorials difficult. Most\nof the tutorials listed here were for the 1.38 version. The current 1.39 version requires a few more steps.</p><p>After you download and import the kit you’ll restart Unity. You should see a new menu for Oculus:</p><figure class=\"fullwidth\">\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39c1e5ff55aa993ef5073ac9983e4562/5e09a/unity-oculus-file-menu.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 933px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAABwUlEQVQoz1WRWXPSYBRA+b0+ujz55IytW1WobbVWC1plxtYAUgpIgLKTBgKENRBCEpZWW+vyC44fPDjjw5l7587cM3fxPAqW2Qxp+AReqc6LcB3fYZXdcI1dqcyOqN0IXPAq4ZCoWkRzOrF8h6N0h2Cqw2GmRzjXI17skVYGeG6+bXFryb7Obb/OnUCbuwcd7h3orH1o8jDYwhu1eBJ2eSlfIVcN5JxCVD5D+lpDEmJZW5BtXiDXpnjuHw1Zk0asSybrIZMHoTGPw2OeR8Z4wyPexEdC0kdpGJiTGY3OkHRBJZVXiaUV5EqXtv0LffIbdXCJZyNisiGan35ZYvFMTOM7nrB1PGbvZEikYKL1pvTMOboxpdY2yZQbJPMayUILtTdbCZvWT1TjO57NmGg+sdmK22zHHbbFrXYSYr2EjT9lkTxz0UffMN0fDJ1LIbUpqG1KjSGacU7LuqZuXqNN/lA1rvD40w57KYfXK1yRC+TpP/bTLh+zNrnmfCXsj2xKapO82iWjdMUj+mTqY/LdBcXlytm6g1Se8e50yfx/cnMCIr4X8VNpQUw9F4e3yNcGFDWDaKFPTLGJKi6hisPnistfCGDJk2pkTnMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Oculus menu in Unity\"\n        title=\"\"\n        src=\"/static/39c1e5ff55aa993ef5073ac9983e4562/5e09a/unity-oculus-file-menu.png\"\n        srcset=\"/static/39c1e5ff55aa993ef5073ac9983e4562/01387/unity-oculus-file-menu.png 320w,\n/static/39c1e5ff55aa993ef5073ac9983e4562/e49a9/unity-oculus-file-menu.png 640w,\n/static/39c1e5ff55aa993ef5073ac9983e4562/5e09a/unity-oculus-file-menu.png 933w\"\n        sizes=\"(max-width: 933px) 100vw, 933px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </figure><ol>\n<li>Choose <code class=\"language-text\">Tools</code> | <code class=\"language-text\">Remove AndroidManifest.xml</code>.</li>\n<li>Choose <code class=\"language-text\">Tools</code> | <code class=\"language-text\">Create store-compatible AndroidManifest.xml</code></li>\n</ol><p>From your project search, find the newly created <code class=\"language-text\">AndroidManifest.xml</code> and open it in your editor.\nYou’ll want to change <code class=\"language-text\">android.intent.category.INFO</code> to <code class=\"language-text\">android.intent.category.LAUNCHER</code> so that\nwhen you choose <code class=\"language-text\">Build and Run</code> it will actually run the generated APK on your Oculus Quest.</p><p>Here is the full file:</p><div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"no\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>manifest</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>android</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://schemas.android.com/apk/res/android<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>installLocation</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>auto<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- Request the headset DoF mode --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>application</span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>allowBackup</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>activity</span>\n            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>theme</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>@android:style/Theme.Black.NoTitleBar.Fullscreen<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>configChanges</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>locale|fontScale|keyboard|keyboardHidden|mcc|mnc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|touchscreen|uiMode<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>launchMode</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>singleTask<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>com.unity3d.player.UnityPlayerActivity<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>excludeFromRecents</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>action</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>android.intent.action.MAIN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>category</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>android.intent.category.LAUNCHER<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>intent-filter</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>activity</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta-data</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>unityplayer.SkipPermissionsDialog<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>value</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>application</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>uses-feature</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>android.hardware.vr.headtracking<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>version</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>required</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>manifest</span><span class=\"token punctuation\">></span></span></code></pre></div><p>If you’re using a <code class=\"language-text\">LocalAvatar</code> you’ll notice you don’t have hands. You’ll need to add an application id in <code class=\"language-text\">Oculus</code> | <code class=\"language-text\">Avatars</code> | <code class=\"language-text\">Edit Settings</code>. You can get an Application Id by creating an application for your organization on the Oculus Developer website at <a href=\"https://dashboard.oculus.com\">https://dashboard.oculus.com</a> | <code class=\"language-text\">Manage</code>. There’s a good shortcut for testing though: just enter <code class=\"language-text\">-</code> for the <code class=\"language-text\">Oculus Go/Quest or Gear VR</code> field.</p></section>\n<section><h2 id=\"how-to-make-a-vr-game-in-unity---part-1---setup-hand-presence-grabbing-object\"><a href=\"#how-to-make-a-vr-game-in-unity---part-1---setup-hand-presence-grabbing-object\" aria-label=\"how to make a vr game in unity   part 1   setup hand presence grabbing object permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to make a VR game in Unity - Part 1 - Setup, Hand presence, Grabbing object</h2>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/sKQOlqNe_WY\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          <h3 id=\"setup-the-project\"><a href=\"#setup-the-project\" aria-label=\"setup the project permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup the project</h3><ul>\n<li>Set Unknown Sources in the Oculus app (Windows only)</li>\n<li>In Unity Hub create a new 3D app</li>\n<li>Click Build Settings in the File menu</li>\n<li>Choose Android, click Switch Platform</li>\n<li>Change the Texture Compression to ASTC (not required<label for=\"sd-dxt-pvrtc-atc-and\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-dxt-pvrtc-atc-and\" class=\"margin-toggle\" /><span class=\"sidenote\">DXT, PVRTC, ATC, and ASTC are all support textures with an alpha channel. These formats also support higher compression rates and/or better image quality, but they are only supported on a subset of Android devices. <a href=\"https://docs.unity3d.com/Manual/android-GettingStarted.html\">https://docs.unity3d.com/Manual/android-GettingStarted.html</a>. ASTC is considered the best choice for Oculus Quest.</span>, very slow)</li>\n<li>\n<p>Open Player Settings:</p>\n<ul>\n<li>Set the Company and Product Name</li>\n<li>Remove <code class=\"language-text\">Vulkan</code> from the Graphics APIs list (Other Settings)</li>\n<li>Set the Package Name (Other Settings)</li>\n<li>Set the Minimum API Level to Android 4.4 ‘KitKat’ (Other Settings)</li>\n<li>Check VR Intergation (XR Settings)</li>\n<li>Add the Oculus Virtual Reality SDK (XR Settings)</li>\n</ul>\n</li>\n<li>Download Oculus Integration from the Asset Store (slow)</li>\n<li>Import All from the Oculus Integration (very slow)</li>\n</ul><h3 id=\"make-the-scene\"><a href=\"#make-the-scene\" aria-label=\"make the scene permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make the scene</h3><ul>\n<li>Create a 3D plane</li>\n<li>Create a 3D cube</li>\n<li>Create a red material and apply it to cube</li>\n<li>Create a black material and apply it to plane</li>\n<li>Delete the main camera</li>\n<li>Add <code class=\"language-text\">OVRPlayerController</code> to the scene and move it back away from the cube</li>\n<li>Set Tracking Origin Type to <code class=\"language-text\">Floor</code> on the <code class=\"language-text\">OVRCameraRig</code> child (note: if you are using the ▶ button, this should be <code class=\"language-text\">Stage</code>)</li>\n<li>Add the <code class=\"language-text\">Character Camera Constraint</code> component to the <code class=\"language-text\">OVRPlayerController</code></li>\n<li>Drag the <code class=\"language-text\">OVRCameraRig</code> to the <code class=\"language-text\">Character Camera Constraint</code> Camera Rig field</li>\n<li>Check the Dynamic Height box</li>\n</ul><blockquote>\n<p>Note: As of 1.39 you also need to set the Target Devices of the OVR Manager (Script) to Quest <img src=\"https://rpl.cat/uploads/fBoe-Hyg2i-xbSswq6SzMIrm9EpgR102T1H0RiWUuEE/public.png\"></p>\n</blockquote><h3 id=\"simple-grabbing\"><a href=\"#simple-grabbing\" aria-label=\"simple grabbing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Simple grabbing</h3><ul>\n<li>Add <code class=\"language-text\">LocalAvatar</code> prefab to the <code class=\"language-text\">TrackingSpace</code> of the <code class=\"language-text\">OVRPlayerController</code></li>\n<li>Add <code class=\"language-text\">AvatarGrabberLeft</code> and <code class=\"language-text\">AvatarGrabberRight</code> prefab to the <code class=\"language-text\">LocalAvatar</code></li>\n<li>Make the red cube wider (more like a table)</li>\n<li>Add an empty object called Cubes and add some cubes (6 of them)</li>\n<li>Select all of the cubes and add the <code class=\"language-text\">OVRGrabbable</code> script</li>\n<li>Add the <code class=\"language-text\">RigidBody</code> component</li>\n</ul><h3 id=\"build-and-run\"><a href=\"#build-and-run\" aria-label=\"build and run permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Build and run</h3><ul>\n<li>In Build Settings click Add Open Scenes</li>\n<li>Plug in your Oculus (you may need to “Trust this computer”)</li>\n<li>On Windows you should be able to click play</li>\n<li>On Mac click Build and Run (slow first build)</li>\n</ul><blockquote>\n<p>From the comments: Colliding with the cubes and flying into the air? “Some of you have experienced a bug where the player fly when you put your hands under you. A really simple fix is to set the body and the hand to a different layer then in Physics settings uncheck the collision between the two layer in the collision layer matrix! :) Hope this will help some of you!” <a href=\"https://www.youtube.com/watch?v=sKQOlqNe_WY&#x26;lc=Ugy0IV2wmiRMywTkPk94AaABAg\">https://www.youtube.com/watch?v=sKQOlqNe_WY&#x26;lc=Ugy0IV2wmiRMywTkPk94AaABAg</a> Note: setting up layer interactions happens more in the next section.</p>\n</blockquote></section>\n<section><h2 id=\"how-to-make-a-vr-game-in-unity---part-2---custom-hand-distance-grab\"><a href=\"#how-to-make-a-vr-game-in-unity---part-2---custom-hand-distance-grab\" aria-label=\"how to make a vr game in unity   part 2   custom hand distance grab permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to make a VR game in Unity - Part 2 - Custom Hand, Distance grab</h2>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/rnOR1OANIAU\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          <h3 id=\"setting-up-custom-hands\"><a href=\"#setting-up-custom-hands\" aria-label=\"setting up custom hands permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up custom hands</h3><ul>\n<li>Remove the <code class=\"language-text\">LocalAvatar</code> you added</li>\n<li>Add <code class=\"language-text\">CustomHandLeft</code> and <code class=\"language-text\">CustomHandRight</code> to the scene</li>\n<li>Select both, drag the <code class=\"language-text\">TrackingSpace</code> of the <code class=\"language-text\">OVRCameraRig</code> to the Parent Transform property of the custom hands</li>\n<li>Find the <code class=\"language-text\">hand:Rhand</code> component in <code class=\"language-text\">CustomHandRight</code>, expand the Materials section and set the material to <code class=\"language-text\">Hands_transparent</code> (same as the material for <code class=\"language-text\">hand:Lhand</code>)</li>\n<li>Expand the <code class=\"language-text\">Hands_transparent</code> material, change the Inner Color to aqua, increase the Rim Power</li>\n<li>Go to Project Settings | Time and change the Fixed Timestep to <code class=\"language-text\">1 / 90</code> <label for=\"sd-still-jittery-move\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-still-jittery-move\" class=\"margin-toggle\" /><span class=\"sidenote\">Still jittery? Move the hands under the OVRPlayerController LeftHandAnchor and RightHandAnchor and remove the Parent Tansform <a href=\"https://www.youtube.com/watch?v=rnOR1OANIAU&#x26;lc=UgxZk-kL_RAwHIIMnTl4AaABAg.8rOyDN6n0A68s4HvbTUUai\">comment</a>(see also: <a href=\"https://developer.oculus.com/documentation/unity/latest/concepts/unity-sf-distancegrab/\">unity distance grab</a> and <a href=\"https://forum.unity.com/threads/kinematic-rigid-bodies-does-not-move-smoothly-with-moveposition.142516/\">kinematic rigid bodies</a>), note: I couldn't get this to align correctly in the latest version for the <code>DistanceGrabHandLeft</code> and <code>DistanceGrabHandRight</code></span></li>\n</ul><h3 id=\"setting-up-distance-grab\"><a href=\"#setting-up-distance-grab\" aria-label=\"setting up distance grab permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up distance grab</h3><ul>\n<li>Remove the custom hands</li>\n<li>\n<p>Select all of the cubes</p>\n<ul>\n<li>Set the Collision Detection to Continuous Dynamic</li>\n<li>Remove the OVR Grabbable Script</li>\n<li>Add the Distance Grabbable Script</li>\n</ul>\n</li>\n<li>Add <code class=\"language-text\">DistanceGrabLeft</code> and <code class=\"language-text\">DistanceGrabRight</code> prefabs to scene</li>\n<li>Set the Player field to the <code class=\"language-text\">OVRPlayerController</code></li>\n<li>Set the <code class=\"language-text\">TrackingSpace</code> to the Parent Transform</li>\n<li>Set the Grab Object in Layer field to the number corresponding to your Cubes Layer (9)</li>\n<li>Set Obstruction Layer to -1 (none)</li>\n<li>Create an Empty Game Object and call it Grab Manager and add it to the <code class=\"language-text\">OVRPlayerController</code> (this is different from the video, but solves the problem where only one box can be grabbed, also this is fixed in the following videos)</li>\n<li>Add the Sphere Collider component to the Grab Manager</li>\n<li>Set Is Trigger to true</li>\n<li>Set the Radius to something larger (3.5 is good)</li>\n</ul><h3 id=\"adding-the-crosshairs\"><a href=\"#adding-the-crosshairs\" aria-label=\"adding the crosshairs permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding the crosshairs</h3><ul>\n<li>Click the object that you want to have a crosshair on</li>\n<li>Once selected, create an Empty Game Object called Crosshair</li>\n<li>Add the Grabbable Crosshair Script to the object</li>\n<li>\n<p>Create a child Quad object called “On”</p>\n<ul>\n<li>Remove the mesh collider of the quad</li>\n<li>Add the <code class=\"language-text\">TriangleCursorTargeted</code> Material</li>\n<li>Move it slightly behind the cube</li>\n</ul>\n</li>\n<li>\n<p>Duplicate the child Quad and call it “Off”</p>\n<ul>\n<li>Change the material to <code class=\"language-text\">TriangleCursorUntargeted</code></li>\n<li>Make it smaller by lowering the scale</li>\n<li>Change the material color to gray</li>\n</ul>\n</li>\n<li>Drag <code class=\"language-text\">On</code> to the Targeted Crosshair field of the Crosshair script</li>\n<li>Drag <code class=\"language-text\">Off</code> to the Enabled Crosshair field of the Crosshair script</li>\n<li>Make a prefab from the crosshair (drag from the scene to Assets)</li>\n<li>Drag the prefab into the remaining cubes</li>\n</ul></section>\n<section><h2 id=\"how-to-make-a-vr-game-in-unity---part-3---vr-shooter\"><a href=\"#how-to-make-a-vr-game-in-unity---part-3---vr-shooter\" aria-label=\"how to make a vr game in unity   part 3   vr shooter permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to make a VR game in Unity - Part 3 - VR Shooter</h2>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/98gfkursxYI\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          <h3 id=\"setup-the-gun\"><a href=\"#setup-the-gun\" aria-label=\"setup the gun permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup the gun</h3><ul>\n<li>In the Asset Store find the asset: “Modern Guns: Handgun” published by NOKOBOT. Smash the download button.</li>\n<li>Click Import, then Import All</li>\n<li>Open the folder in Assets, Nokobot, ModernGuns_Handgun, Prefabs, Active guns</li>\n<li>Drag <code class=\"language-text\">Handgun_M1911A_Black (WithScript)</code> prefab into the scene</li>\n<li>Scale it down (0.3) and move it to the left of the boxes</li>\n<li>Add a <code class=\"language-text\">Rigidbody</code> component</li>\n<li>Add the <code class=\"language-text\">Distance Grabbable</code> script</li>\n<li>\n<p>Set the layer to the Grabbable layer (same as Cubes)</p>\n<ul>\n<li>Add a new Empty 3D object to the gun called <code class=\"language-text\">COLLIDERS</code></li>\n<li>Add a new Cube to <code class=\"language-text\">COLLIDERS</code> that aligns to the barrel <label for=\"sd-barrel-less-than-img\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-barrel-less-than-img\" class=\"margin-toggle\" /><span class=\"sidenote\">Barrel: <img src=\"https://rpl.cat/uploads/34dIbk_lMn9KprF5AOwkoYRKLXPmb_zSqVb2Yu5DDaE/public.png\"></span></li>\n<li>Duplicate that cube to <code class=\"language-text\">COLLIDERS</code> and align the duplicate to the grip <label for=\"sd-grip-less-than-img\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-grip-less-than-img\" class=\"margin-toggle\" /><span class=\"sidenote\">Grip: <img src=\"https://rpl.cat/uploads/MOuJWyzFNJbiXvEifcvb92zmWVs9fzqWQHdbatSb5y4/public.png\"></span></li>\n<li>Remove the Mesh Renderer of both cubes</li>\n<li>Remove the Cube (Mesh Filter) of both cubes</li>\n<li>Drag each cube to the Grab Points field of the Distance Grabbable object in the gun</li>\n</ul>\n</li>\n<li>Add the crosshair prefab to the gun</li>\n<li>Scale the crosshair down a little bit</li>\n</ul><blockquote>\n</blockquote><h3 id=\"modify-the-distance-grabbable-script\"><a href=\"#modify-the-distance-grabbable-script\" aria-label=\"modify the distance grabbable script permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modify the Distance Grabbable script</h3><ul>\n<li>Click on the gun, go to the Distance Grabbable object, click the gear and choose Edit Script.</li>\n<li>Everywhere we are using the <code class=\"language-text\">m_renderer</code> check if null and return (<code class=\"language-text\">if (!m_renderer) return;</code>):</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token comment\">/************************************************************************************\n\nCopyright (c) Facebook Technologies, LLC and its affiliates. All rights reserved.\n\nSee SampleFramework license.txt for license terms.  Unless required by applicable law\nor agreed to in writing, the sample code is provided “AS IS” WITHOUT WARRANTIES OR\nCONDITIONS OF ANY KIND, either express or implied.  See the license for specific\nlanguage governing permissions and limitations under the license.\n\n************************************************************************************/</span>\n\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> OVRTouchSample<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">namespace</span> OculusSampleFramework\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DistanceGrabbable</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">OVRGrabbable</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">string</span> m_materialColorField<span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">GrabbableCrosshair</span> m_crosshair<span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">GrabManager</span> m_crosshairManager<span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Renderer</span> m_renderer<span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MaterialPropertyBlock</span> m_mpb<span class=\"token punctuation\">;</span>\n\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">bool</span> InRange\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">get</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> m_inRange<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">set</span>\n            <span class=\"token punctuation\">{</span>\n                m_inRange <span class=\"token operator\">=</span> <span class=\"token keyword\">value</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">RefreshCrosshair</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">bool</span> m_inRange<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">bool</span> Targeted\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">get</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> m_targeted<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">set</span>\n            <span class=\"token punctuation\">{</span>\n                m_targeted <span class=\"token operator\">=</span> <span class=\"token keyword\">value</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">RefreshCrosshair</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">bool</span> m_targeted<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">base</span><span class=\"token punctuation\">.</span><span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_crosshair <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInChildren</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GrabbableCrosshair</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_renderer <span class=\"token operator\">=</span> gameObject<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Renderer</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_crosshairManager <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">FindObjectOfType</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GrabManager</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_mpb <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MaterialPropertyBlock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">RefreshCrosshair</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_mpb<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_materialColorField<span class=\"token punctuation\">,</span> Color<span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m_renderer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            m_renderer<span class=\"token punctuation\">.</span><span class=\"token function\">SetPropertyBlock</span><span class=\"token punctuation\">(</span>m_mpb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">void</span> <span class=\"token function\">RefreshCrosshair</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_crosshair<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isGrabbed<span class=\"token punctuation\">)</span> m_crosshair<span class=\"token punctuation\">.</span><span class=\"token function\">SetState</span><span class=\"token punctuation\">(</span>GrabbableCrosshair<span class=\"token punctuation\">.</span>CrosshairState<span class=\"token punctuation\">.</span>Disabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>InRange<span class=\"token punctuation\">)</span> m_crosshair<span class=\"token punctuation\">.</span><span class=\"token function\">SetState</span><span class=\"token punctuation\">(</span>GrabbableCrosshair<span class=\"token punctuation\">.</span>CrosshairState<span class=\"token punctuation\">.</span>Disabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">else</span> m_crosshair<span class=\"token punctuation\">.</span><span class=\"token function\">SetState</span><span class=\"token punctuation\">(</span>Targeted <span class=\"token punctuation\">?</span> GrabbableCrosshair<span class=\"token punctuation\">.</span>CrosshairState<span class=\"token punctuation\">.</span>Targeted <span class=\"token punctuation\">:</span> GrabbableCrosshair<span class=\"token punctuation\">.</span>CrosshairState<span class=\"token punctuation\">.</span>Enabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_materialColorField <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m_renderer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n                m_renderer<span class=\"token punctuation\">.</span><span class=\"token function\">GetPropertyBlock</span><span class=\"token punctuation\">(</span>m_mpb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isGrabbed <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>InRange<span class=\"token punctuation\">)</span> m_mpb<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_materialColorField<span class=\"token punctuation\">,</span> Color<span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Targeted<span class=\"token punctuation\">)</span> m_mpb<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_materialColorField<span class=\"token punctuation\">,</span> m_crosshairManager<span class=\"token punctuation\">.</span>OutlineColorHighlighted<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">else</span> m_mpb<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_materialColorField<span class=\"token punctuation\">,</span> m_crosshairManager<span class=\"token punctuation\">.</span>OutlineColorInRange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                m_renderer<span class=\"token punctuation\">.</span><span class=\"token function\">SetPropertyBlock</span><span class=\"token punctuation\">(</span>m_mpb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Color</span> focusColor<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m_renderer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            m_mpb<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_materialColorField<span class=\"token punctuation\">,</span> focusColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_renderer<span class=\"token punctuation\">.</span><span class=\"token function\">SetPropertyBlock</span><span class=\"token punctuation\">(</span>m_mpb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">ClearColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m_renderer<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            m_mpb<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_materialColorField<span class=\"token punctuation\">,</span> Color<span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_renderer<span class=\"token punctuation\">.</span><span class=\"token function\">SetPropertyBlock</span><span class=\"token punctuation\">(</span>m_mpb<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><h3 id=\"modify-the-grab-manager-script\"><a href=\"#modify-the-grab-manager-script\" aria-label=\"modify the grab manager script permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modify the Grab Manager script</h3><ul>\n<li>Click on the Grab Manager in the <code class=\"language-text\">OVRPlayerController</code></li>\n<li>Click the gear icon on the Grab Manager Script and choose Edit Script</li>\n<li>Change <code class=\"language-text\">GetComponentInChildren</code> to <code class=\"language-text\">GetComponentInParent</code>:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token comment\">/************************************************************************************\n\nCopyright (c) Facebook Technologies, LLC and its affiliates. All rights reserved.\n\nSee SampleFramework license.txt for license terms.  Unless required by applicable law\nor agreed to in writing, the sample code is provided “AS IS” WITHOUT WARRANTIES OR\nCONDITIONS OF ANY KIND, either express or implied.  See the license for specific\nlanguage governing permissions and limitations under the license.\n\n************************************************************************************/</span>\n\n<span class=\"token comment\">/************************************************************************************\n\nQuick implementation notes:\n\nGrab candidates and grab range:\n-------------------------------\nThe trigger volume on the OVRPlayerController, which also has a GrabManager component,\ndetermines whether an object is in range or out of range.\n\nHands (via the DistanceGrabber component) determine the target object in one of two\nways, depending on bool m_useSpherecast:\ntrue: cast a sphere of radius m_spherecastRadius at distance m_maxGrabDistance. Select\nthe first collision.\nfalse: from all objects within the grab volume, select the closest object that can be\nhit by a ray from the player's hand.\n\nIMPORTANT NOTE: if you change the radius of the trigger volume on the\nOVRPlayerController, you must ensure the spherecast or the grab volume on the grabbers\nis big enough to reach all objects within that radius! Keep in mind the hand may be a\nlittle behind or two the side of the player, so you need to make it somewhat larger\nthan the radius. There is no major concern with making it too large (aside from minor\nperformance questions), because if an object is not in range according to the\nOVRPlayerController's trigger volume, it will not be considered for grabbing.\n\nCrosshairs and Outlines:\n------------------------\n\nObjects with a DistanceGrabbable component draw their own in range / targeted\nhighlight. How these states are best presented is highly app-specific.\n\n************************************************************************************/</span>\n\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">namespace</span> OculusSampleFramework\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GrabManager</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">MonoBehaviour</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Collider</span> m_grabVolume<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Color</span> OutlineColorInRange<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Color</span> OutlineColorHighlighted<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">void</span> <span class=\"token function\">OnTriggerEnter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collider</span> otherCollider<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">DistanceGrabbable</span> dg <span class=\"token operator\">=</span> otherCollider<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInParent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>dg<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                dg<span class=\"token punctuation\">.</span>InRange <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">void</span> <span class=\"token function\">OnTriggerExit</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collider</span> otherCollider<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">DistanceGrabbable</span> dg <span class=\"token operator\">=</span> otherCollider<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInParent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>dg<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                dg<span class=\"token punctuation\">.</span>InRange <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><h3 id=\"fix-the-gun-position-and-make-it-snap\"><a href=\"#fix-the-gun-position-and-make-it-snap\" aria-label=\"fix the gun position and make it snap permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fix the gun position and make it snap</h3><ul>\n<li>Note the position of the gun; remember where it is (-1, 1.15, -0.23)</li>\n<li>Move the gun position to 0, 0, 0 (temporarily)</li>\n<li>Create an Empty Game Object called Hand Gun Offset</li>\n<li>Move the object to 0, 0, 0 then align it where the gun should be held <label for=\"sd-hand-gun-offset\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-hand-gun-offset\" class=\"margin-toggle\" /><span class=\"sidenote\">Hand gun offset</span></li>\n<li>Drag the empty game object to Assets to make a prefab</li>\n<li>Replace the gun where you had it on the table</li>\n<li>Drag the Hand Gun Offset prefab to the gun Snap Offset</li>\n<li>Check Snap Position and Snap Orientation</li>\n</ul><h3 id=\"fix-the-distancegrabber-script-for-the-left-hand\"><a href=\"#fix-the-distancegrabber-script-for-the-left-hand\" aria-label=\"fix the distancegrabber script for the left hand permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fix the DistanceGrabber script for the left hand</h3><ul>\n<li>Click on the <code class=\"language-text\">DistanceGrabHandLeft</code></li>\n<li>Click on the gear icon in the Distance Grabber component and choose Edit Script</li>\n<li>Copy the else statement of <code class=\"language-text\">GrabBegin</code> into <code class=\"language-text\">MoveGrabbedObject</code></li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token comment\">/************************************************************************************\n\nCopyright (c) Facebook Technologies, LLC and its affiliates. All rights reserved.\n\nSee SampleFramework license.txt for license terms.  Unless required by applicable law\nor agreed to in writing, the sample code is provided “AS IS” WITHOUT WARRANTIES OR\nCONDITIONS OF ANY KIND, either express or implied.  See the license for specific\nlanguage governing permissions and limitations under the license.\n\n************************************************************************************/</span>\n\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> UNITY_EDITOR</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">.</span>SceneManagement<span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token keyword\">namespace</span> OculusSampleFramework\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/// &lt;summary></span>\n    <span class=\"token comment\">/// Allows grabbing and throwing of objects with the DistanceGrabbable component on them.</span>\n    <span class=\"token comment\">/// &lt;/summary></span>\n    <span class=\"token punctuation\">[</span><span class=\"token class-name\">RequireComponent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span><span class=\"token punctuation\">(</span>Rigidbody<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DistanceGrabber</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">OVRGrabber</span>\n    <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">// Radius of sphere used in spherecast from hand along forward ray to find target object.</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Color</span> m_focusColor<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Radius of sphere used in spherecast from hand along forward ray to find target object.</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">float</span> m_spherecastRadius<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Distance below which no-snap objects won't be teleported, but will instead be left</span>\n        <span class=\"token comment\">// where they are in relation to the hand.</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">float</span> m_noSnapThreshhold <span class=\"token operator\">=</span> <span class=\"token number\">0.05f</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">bool</span> m_useSpherecast<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">bool</span> UseSpherecast\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">get</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> m_useSpherecast<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">set</span>\n            <span class=\"token punctuation\">{</span>\n                m_useSpherecast <span class=\"token operator\">=</span> <span class=\"token keyword\">value</span><span class=\"token punctuation\">;</span>\n                <span class=\"token function\">GrabVolumeEnable</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m_useSpherecast<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Public to allow changing in demo.</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">bool</span> m_preventGrabThroughWalls<span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">float</span> m_objectPullVelocity <span class=\"token operator\">=</span> <span class=\"token number\">10.0f</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">float</span> m_objectPullMaxRotationRate <span class=\"token operator\">=</span> <span class=\"token number\">360.0f</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// max rotation rate in degrees per second</span>\n\n        <span class=\"token keyword\">bool</span> m_movingObjectToHand <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Objects can be distance grabbed up to this distance from the hand.</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">float</span> m_maxGrabDistance<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Only allow grabbing objects in this layer.</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">int</span> m_grabObjectsInLayer<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">int</span> m_obstructionLayer<span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n        <span class=\"token class-name\">GameObject</span> m_player<span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">DistanceGrabber</span> m_otherHand<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token class-name\">DistanceGrabbable</span> m_target<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Tracked separately from m_target, because we support child colliders of a DistanceGrabbable.</span>\n        <span class=\"token comment\">// MTF TODO: verify this still works!</span>\n        <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Collider</span> m_targetCollider<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">base</span><span class=\"token punctuation\">.</span><span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// Set up our max grab distance to be based on the player's max grab distance.</span>\n            <span class=\"token comment\">// Adding a liberal margin of error here, because users can move away some from the</span>\n            <span class=\"token comment\">// OVRPlayerController, and also players have arms.</span>\n            <span class=\"token comment\">// Note that there's no major downside to making this value too high, as objects</span>\n            <span class=\"token comment\">// outside the player's grabbable trigger volume will not be eligible targets regardless.</span>\n            <span class=\"token class-name\">SphereCollider</span> sc <span class=\"token operator\">=</span> m_player<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInChildren</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SphereCollider</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m_maxGrabDistance <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">+</span> <span class=\"token number\">3.0f</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>m_parentHeldObject <span class=\"token operator\">==</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                Debug<span class=\"token punctuation\">.</span><span class=\"token function\">LogError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"m_parentHeldObject incompatible with DistanceGrabber. Setting to false.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                m_parentHeldObject <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            DistanceGrabber<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> grabbers <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">FindObjectsOfType</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabber</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> grabbers<span class=\"token punctuation\">.</span>Length<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>grabbers<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> m_otherHand <span class=\"token operator\">=</span> grabbers<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            Debug<span class=\"token punctuation\">.</span><span class=\"token function\">Assert</span><span class=\"token punctuation\">(</span>m_otherHand <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> UNITY_EDITOR</span>\n            OVRPlugin<span class=\"token punctuation\">.</span><span class=\"token function\">SendEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"distance_grabber\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>SceneManager<span class=\"token punctuation\">.</span><span class=\"token function\">GetActiveScene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">==</span> <span class=\"token string\">\"DistanceGrab\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sample_framework\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n\n            Debug<span class=\"token punctuation\">.</span><span class=\"token function\">DrawRay</span><span class=\"token punctuation\">(</span>transform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">,</span> transform<span class=\"token punctuation\">.</span>forward<span class=\"token punctuation\">,</span> Color<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">,</span> <span class=\"token number\">0.1f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token class-name\">DistanceGrabbable</span> target<span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Collider</span> targetColl<span class=\"token punctuation\">;</span>\n            <span class=\"token function\">FindTarget</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">out</span> target<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> targetColl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>target <span class=\"token operator\">!=</span> m_target<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_target <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    m_target<span class=\"token punctuation\">.</span>Targeted <span class=\"token operator\">=</span> m_otherHand<span class=\"token punctuation\">.</span>m_target <span class=\"token operator\">==</span> m_target<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>m_target <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n                    m_target<span class=\"token punctuation\">.</span><span class=\"token function\">ClearColor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>target <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n                    target<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span>m_focusColor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                m_target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\n                m_targetCollider <span class=\"token operator\">=</span> targetColl<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_target <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    m_target<span class=\"token punctuation\">.</span>Targeted <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">void</span> <span class=\"token function\">GrabBegin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">DistanceGrabbable</span> closestGrabbable <span class=\"token operator\">=</span> m_target<span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Collider</span> closestGrabbableCollider <span class=\"token operator\">=</span> m_targetCollider<span class=\"token punctuation\">;</span>\n\n            <span class=\"token function\">GrabVolumeEnable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>closestGrabbable <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>closestGrabbable<span class=\"token punctuation\">.</span>isGrabbed<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>DistanceGrabber<span class=\"token punctuation\">)</span>closestGrabbable<span class=\"token punctuation\">.</span>grabbedBy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">OffhandGrabbed</span><span class=\"token punctuation\">(</span>closestGrabbable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                m_grabbedObj <span class=\"token operator\">=</span> closestGrabbable<span class=\"token punctuation\">;</span>\n                m_grabbedObj<span class=\"token punctuation\">.</span><span class=\"token function\">GrabBegin</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> closestGrabbableCollider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                m_movingObjectToHand <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n                m_lastPos <span class=\"token operator\">=</span> transform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                m_lastRot <span class=\"token operator\">=</span> transform<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">;</span>\n\n                <span class=\"token comment\">// If it's within a certain distance respect the no-snap.</span>\n                <span class=\"token class-name\">Vector3</span> closestPointOnBounds <span class=\"token operator\">=</span> closestGrabbableCollider<span class=\"token punctuation\">.</span><span class=\"token function\">ClosestPointOnBounds</span><span class=\"token punctuation\">(</span>m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m_grabbedObj<span class=\"token punctuation\">.</span>snapPosition <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>m_grabbedObj<span class=\"token punctuation\">.</span>snapOrientation <span class=\"token operator\">&amp;&amp;</span> m_noSnapThreshhold <span class=\"token operator\">></span> <span class=\"token number\">0.0f</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>closestPointOnBounds <span class=\"token operator\">-</span> m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>magnitude <span class=\"token operator\">&lt;</span> m_noSnapThreshhold<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">Vector3</span> relPos <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>position <span class=\"token operator\">-</span> transform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                    m_movingObjectToHand <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n                    relPos <span class=\"token operator\">=</span> Quaternion<span class=\"token punctuation\">.</span><span class=\"token function\">Inverse</span><span class=\"token punctuation\">(</span>transform<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> relPos<span class=\"token punctuation\">;</span>\n                    m_grabbedObjectPosOff <span class=\"token operator\">=</span> relPos<span class=\"token punctuation\">;</span>\n                    <span class=\"token class-name\">Quaternion</span> relOri <span class=\"token operator\">=</span> Quaternion<span class=\"token punctuation\">.</span><span class=\"token function\">Inverse</span><span class=\"token punctuation\">(</span>transform<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> m_grabbedObj<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">;</span>\n                    m_grabbedObjectRotOff <span class=\"token operator\">=</span> relOri<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">else</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// Set up offsets for grabbed object desired position relative to hand.</span>\n                    m_grabbedObjectPosOff <span class=\"token operator\">=</span> m_gripTransform<span class=\"token punctuation\">.</span>localPosition<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token class-name\">Vector3</span> snapOffset <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>LTouch<span class=\"token punctuation\">)</span> snapOffset<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>snapOffset<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n                        m_grabbedObjectPosOff <span class=\"token operator\">+=</span> snapOffset<span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n\n                    m_grabbedObjectRotOff <span class=\"token operator\">=</span> m_gripTransform<span class=\"token punctuation\">.</span>localRotation<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">{</span>\n                        m_grabbedObjectRotOff <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">.</span>rotation <span class=\"token operator\">*</span> m_grabbedObjectRotOff<span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>LTouch<span class=\"token punctuation\">)</span> m_grabbedObjectRotOff <span class=\"token operator\">=</span> Quaternion<span class=\"token punctuation\">.</span><span class=\"token function\">Inverse</span><span class=\"token punctuation\">(</span>m_grabbedObjectRotOff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">void</span> <span class=\"token function\">MoveGrabbedObject</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Vector3</span> pos<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Quaternion</span> rot<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> forceTeleport <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_grabbedObj <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token comment\">// Set up offsets for grabbed object desired position relative to hand.</span>\n            m_grabbedObjectPosOff <span class=\"token operator\">=</span> m_gripTransform<span class=\"token punctuation\">.</span>localPosition<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">Vector3</span> snapOffset <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>LTouch<span class=\"token punctuation\">)</span> snapOffset<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>snapOffset<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n                m_grabbedObjectPosOff <span class=\"token operator\">+=</span> snapOffset<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            m_grabbedObjectRotOff <span class=\"token operator\">=</span> m_gripTransform<span class=\"token punctuation\">.</span>localRotation<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                m_grabbedObjectRotOff <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>snapOffset<span class=\"token punctuation\">.</span>rotation <span class=\"token operator\">*</span> m_grabbedObjectRotOff<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>LTouch<span class=\"token punctuation\">)</span> m_grabbedObjectRotOff <span class=\"token operator\">=</span> Quaternion<span class=\"token punctuation\">.</span><span class=\"token function\">Inverse</span><span class=\"token punctuation\">(</span>m_grabbedObjectRotOff<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token class-name\">Rigidbody</span> grabbedRigidbody <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>grabbedRigidbody<span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Vector3</span> grabbablePosition <span class=\"token operator\">=</span> pos <span class=\"token operator\">+</span> rot <span class=\"token operator\">*</span> m_grabbedObjectPosOff<span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Quaternion</span> grabbableRotation <span class=\"token operator\">=</span> rot <span class=\"token operator\">*</span> m_grabbedObjectRotOff<span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_movingObjectToHand<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">float</span> travel <span class=\"token operator\">=</span> m_objectPullVelocity <span class=\"token operator\">*</span> Time<span class=\"token punctuation\">.</span>deltaTime<span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">Vector3</span> dir <span class=\"token operator\">=</span> grabbablePosition <span class=\"token operator\">-</span> m_grabbedObj<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>travel <span class=\"token operator\">*</span> travel <span class=\"token operator\">*</span> <span class=\"token number\">1.1f</span> <span class=\"token operator\">></span> dir<span class=\"token punctuation\">.</span>sqrMagnitude<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    m_movingObjectToHand <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">else</span>\n                <span class=\"token punctuation\">{</span>\n                    dir<span class=\"token punctuation\">.</span><span class=\"token function\">Normalize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    grabbablePosition <span class=\"token operator\">=</span> m_grabbedObj<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>position <span class=\"token operator\">+</span> dir <span class=\"token operator\">*</span> travel<span class=\"token punctuation\">;</span>\n                    grabbableRotation <span class=\"token operator\">=</span> Quaternion<span class=\"token punctuation\">.</span><span class=\"token function\">RotateTowards</span><span class=\"token punctuation\">(</span>m_grabbedObj<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">,</span> grabbableRotation<span class=\"token punctuation\">,</span> m_objectPullMaxRotationRate <span class=\"token operator\">*</span> Time<span class=\"token punctuation\">.</span>deltaTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            grabbedRigidbody<span class=\"token punctuation\">.</span><span class=\"token function\">MovePosition</span><span class=\"token punctuation\">(</span>grabbablePosition<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            grabbedRigidbody<span class=\"token punctuation\">.</span><span class=\"token function\">MoveRotation</span><span class=\"token punctuation\">(</span>grabbableRotation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">static</span> <span class=\"token keyword\">private</span> <span class=\"token class-name\">DistanceGrabbable</span> <span class=\"token function\">HitInfoToGrabbable</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RaycastHit</span> hitInfo<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hitInfo<span class=\"token punctuation\">.</span>collider <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">GameObject</span> go <span class=\"token operator\">=</span> hitInfo<span class=\"token punctuation\">.</span>collider<span class=\"token punctuation\">.</span>gameObject<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> go<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">??</span> go<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInParent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">bool</span> <span class=\"token function\">FindTarget</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">out</span> <span class=\"token class-name\">DistanceGrabbable</span> dgOut<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> <span class=\"token class-name\">Collider</span> collOut<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            dgOut <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            collOut <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">float</span> closestMagSq <span class=\"token operator\">=</span> <span class=\"token keyword\">float</span><span class=\"token punctuation\">.</span>MaxValue<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// First test for objects within the grab volume, if we're using those.</span>\n            <span class=\"token comment\">// (Some usage of DistanceGrabber will not use grab volumes, and will only</span>\n            <span class=\"token comment\">// use spherecasts, and that's supported.)</span>\n            <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">OVRGrabbable</span> cg <span class=\"token keyword\">in</span> m_grabCandidates<span class=\"token punctuation\">.</span>Keys<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">DistanceGrabbable</span> grabbable <span class=\"token operator\">=</span> cg <span class=\"token keyword\">as</span> DistanceGrabbable<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">bool</span> canGrab <span class=\"token operator\">=</span> grabbable <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> grabbable<span class=\"token punctuation\">.</span>InRange <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>grabbable<span class=\"token punctuation\">.</span>isGrabbed <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>grabbable<span class=\"token punctuation\">.</span>allowOffhandGrab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>canGrab<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> grabbable<span class=\"token punctuation\">.</span>grabPoints<span class=\"token punctuation\">.</span>Length<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>j<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token class-name\">Collider</span> grabbableCollider <span class=\"token operator\">=</span> grabbable<span class=\"token punctuation\">.</span>grabPoints<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token comment\">// Store the closest grabbable</span>\n                    <span class=\"token class-name\">Vector3</span> closestPointOnBounds <span class=\"token operator\">=</span> grabbableCollider<span class=\"token punctuation\">.</span><span class=\"token function\">ClosestPointOnBounds</span><span class=\"token punctuation\">(</span>m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">float</span> grabbableMagSq <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>m_gripTransform<span class=\"token punctuation\">.</span>position <span class=\"token operator\">-</span> closestPointOnBounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sqrMagnitude<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>grabbableMagSq <span class=\"token operator\">&lt;</span> closestMagSq<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">bool</span> accept <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>m_preventGrabThroughWalls<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">{</span>\n                            <span class=\"token comment\">// NOTE: if this raycast fails, ideally we'd try other rays near the edges of the object, especially for large objects.</span>\n                            <span class=\"token comment\">// NOTE 2: todo optimization: sort the objects before performing any raycasts.</span>\n                            <span class=\"token class-name\">Ray</span> ray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            ray<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> grabbable<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>position <span class=\"token operator\">-</span> m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                            ray<span class=\"token punctuation\">.</span>origin <span class=\"token operator\">=</span> m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n                            <span class=\"token class-name\">RaycastHit</span> obstructionHitInfo<span class=\"token punctuation\">;</span>\n                            Debug<span class=\"token punctuation\">.</span><span class=\"token function\">DrawRay</span><span class=\"token punctuation\">(</span>ray<span class=\"token punctuation\">.</span>origin<span class=\"token punctuation\">,</span> ray<span class=\"token punctuation\">.</span>direction<span class=\"token punctuation\">,</span> Color<span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">,</span> <span class=\"token number\">0.1f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Physics<span class=\"token punctuation\">.</span><span class=\"token function\">Raycast</span><span class=\"token punctuation\">(</span>ray<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> obstructionHitInfo<span class=\"token punctuation\">,</span> m_maxGrabDistance<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> m_obstructionLayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                            <span class=\"token punctuation\">{</span>\n                                <span class=\"token keyword\">float</span> distToObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>grabbableCollider<span class=\"token punctuation\">.</span><span class=\"token function\">ClosestPointOnBounds</span><span class=\"token punctuation\">(</span>m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>magnitude<span class=\"token punctuation\">;</span>\n                                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>distToObject <span class=\"token operator\">></span> obstructionHitInfo<span class=\"token punctuation\">.</span>distance <span class=\"token operator\">*</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">)</span>\n                                <span class=\"token punctuation\">{</span>\n                                    accept <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n                                <span class=\"token punctuation\">}</span>\n                            <span class=\"token punctuation\">}</span>\n                        <span class=\"token punctuation\">}</span>\n                        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>accept<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">{</span>\n                            closestMagSq <span class=\"token operator\">=</span> grabbableMagSq<span class=\"token punctuation\">;</span>\n                            dgOut <span class=\"token operator\">=</span> grabbable<span class=\"token punctuation\">;</span>\n                            collOut <span class=\"token operator\">=</span> grabbableCollider<span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>dgOut <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> m_useSpherecast<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">return</span> <span class=\"token function\">FindTargetWithSpherecast</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">out</span> dgOut<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> collOut<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">return</span> dgOut <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">bool</span> <span class=\"token function\">FindTargetWithSpherecast</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">out</span> <span class=\"token class-name\">DistanceGrabbable</span> dgOut<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> <span class=\"token class-name\">Collider</span> collOut<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            dgOut <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            collOut <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Ray</span> ray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ray</span><span class=\"token punctuation\">(</span>m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">,</span> m_gripTransform<span class=\"token punctuation\">.</span>forward<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">RaycastHit</span> hitInfo<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// If no objects in grab volume, raycast.</span>\n            <span class=\"token comment\">// Potential optimization:</span>\n            <span class=\"token comment\">// In DistanceGrabbable.RefreshCrosshairs, we could move the object between collision layers.</span>\n            <span class=\"token comment\">// If it's in range, it would move into the layer DistanceGrabber.m_grabObjectsInLayer,</span>\n            <span class=\"token comment\">// and if out of range, into another layer so it's ignored by DistanceGrabber's SphereCast.</span>\n            <span class=\"token comment\">// However, we're limiting the SphereCast by m_maxGrabDistance, so the optimization doesn't seem</span>\n            <span class=\"token comment\">// essential.</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Physics<span class=\"token punctuation\">.</span><span class=\"token function\">SphereCast</span><span class=\"token punctuation\">(</span>ray<span class=\"token punctuation\">,</span> m_spherecastRadius<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> hitInfo<span class=\"token punctuation\">,</span> m_maxGrabDistance<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> m_grabObjectsInLayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">DistanceGrabbable</span> grabbable <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">Collider</span> hitCollider <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hitInfo<span class=\"token punctuation\">.</span>collider <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    grabbable <span class=\"token operator\">=</span> hitInfo<span class=\"token punctuation\">.</span>collider<span class=\"token punctuation\">.</span>gameObject<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInParent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    hitCollider <span class=\"token operator\">=</span> grabbable <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">?</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">:</span> hitInfo<span class=\"token punctuation\">.</span>collider<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>grabbable<span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">{</span>\n                        dgOut <span class=\"token operator\">=</span> grabbable<span class=\"token punctuation\">;</span>\n                        collOut <span class=\"token operator\">=</span> hitCollider<span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>grabbable <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> m_preventGrabThroughWalls<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// Found a valid hit. Now test to see if it's blocked by collision.</span>\n                    <span class=\"token class-name\">RaycastHit</span> obstructionHitInfo<span class=\"token punctuation\">;</span>\n                    ray<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> hitInfo<span class=\"token punctuation\">.</span>point <span class=\"token operator\">-</span> m_gripTransform<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n\n                    dgOut <span class=\"token operator\">=</span> grabbable<span class=\"token punctuation\">;</span>\n                    collOut <span class=\"token operator\">=</span> hitCollider<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Physics<span class=\"token punctuation\">.</span><span class=\"token function\">Raycast</span><span class=\"token punctuation\">(</span>ray<span class=\"token punctuation\">,</span> <span class=\"token keyword\">out</span> obstructionHitInfo<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;&lt;</span> m_obstructionLayer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">{</span>\n                        <span class=\"token class-name\">DistanceGrabbable</span> obstruction <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>hitInfo<span class=\"token punctuation\">.</span>collider <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">{</span>\n                            obstruction <span class=\"token operator\">=</span> obstructionHitInfo<span class=\"token punctuation\">.</span>collider<span class=\"token punctuation\">.</span>gameObject<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">GetComponentInParent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DistanceGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obstruction <span class=\"token operator\">!=</span> grabbable <span class=\"token operator\">&amp;&amp;</span> obstructionHitInfo<span class=\"token punctuation\">.</span>distance <span class=\"token operator\">&lt;</span> hitInfo<span class=\"token punctuation\">.</span>distance<span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">{</span>\n                            dgOut <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n                            collOut <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span>\n                    <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">return</span> dgOut <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">void</span> <span class=\"token function\">GrabVolumeEnable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> enabled<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>m_useSpherecast<span class=\"token punctuation\">)</span> enabled <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">base</span><span class=\"token punctuation\">.</span><span class=\"token function\">GrabVolumeEnable</span><span class=\"token punctuation\">(</span>enabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Just here to allow calling of a protected member function.</span>\n      <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token keyword\">void</span> <span class=\"token function\">OffhandGrabbed</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OVRGrabbable</span> grabbable<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">base</span><span class=\"token punctuation\">.</span><span class=\"token function\">OffhandGrabbed</span><span class=\"token punctuation\">(</span>grabbable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><h3 id=\"handle-shooting-if-grabbed\"><a href=\"#handle-shooting-if-grabbed\" aria-label=\"handle shooting if grabbed permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handle shooting if grabbed</h3><ul>\n<li>Modify the <code class=\"language-text\">SimpleShoot</code> script replacing the <code class=\"language-text\">Update</code> method with a new <code class=\"language-text\">TriggerShoot</code> method:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">TriggerShoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Animator</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">SetTrigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Fire\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Add a new <code class=\"language-text\">GetController</code> method to the <code class=\"language-text\">OVRGrabber</code> script (at line 50):</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OVRInput<span class=\"token punctuation\">.</span>Controller</span> <span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> m_controller<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Click on the gun object in the scene hierarchy</li>\n<li>Add a new component <code class=\"language-text\">ShootIfGrabbed</code> as a New script</li>\n<li>Make the script:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ShootIfGrabbed</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">MonoBehaviour</span>\n<span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">SimpleShoot</span> simpleShoot<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OVRGrabbable</span> ovrGrabbable<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OVRInput<span class=\"token punctuation\">.</span>Button</span> shootingButton<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Start is called before the first frame update</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        simpleShoot <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SimpleShoot</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        ovrGrabbable <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OVRGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Update is called once per frame</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ovrGrabbable<span class=\"token punctuation\">.</span>isGrabbed <span class=\"token operator\">&amp;&amp;</span> OVRInput<span class=\"token punctuation\">.</span><span class=\"token function\">GetDown</span><span class=\"token punctuation\">(</span>shootingButton<span class=\"token punctuation\">,</span> ovrGrabbable<span class=\"token punctuation\">.</span>grabbedBy<span class=\"token punctuation\">.</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            simpleShoot<span class=\"token punctuation\">.</span><span class=\"token function\">TriggerShoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Set the Shooting Button field of the new script to <code class=\"language-text\">Primary Index Trigger</code></li>\n</ul><h3 id=\"modify-some-variables\"><a href=\"#modify-some-variables\" aria-label=\"modify some variables permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modify some variables</h3><ul>\n<li>Click on the gun, change the Shot Power field to 1500</li>\n<li>Double-click the <code class=\"language-text\">Handgun_M1911</code> value in the Controller field of the Animator component</li>\n<li>Click on the Shooting node and set the speed to 10</li>\n</ul></section>\n<section><h2 id=\"how-to-make-a-vr-game-in-unity---part-4---user-interface\"><a href=\"#how-to-make-a-vr-game-in-unity---part-4---user-interface\" aria-label=\"how to make a vr game in unity   part 4   user interface permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to make a VR game in Unity - Part 4 - User Interface</h2>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/h7z4E8Qy8Ks\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          <h3 id=\"the-wrong-way\"><a href=\"#the-wrong-way\" aria-label=\"the wrong way permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The wrong way</h3><ul>\n<li>Right click on the Scene Hierarchy, select UI, then click Canvas</li>\n<li>Right click on the Canvas, select UI, then click Text</li>\n<li>Select the text, click on the box and select Stretch Mode <img src=\"https://rpl.cat/uploads/fR-o3ivCHInmUVslylP71710LmoPeJGuDHrzd91pP3k/public.png\"></li>\n<li>Change Left, Top, Pos Z, Right, Bottom all to 0</li>\n<li>Change the font size to 135</li>\n<li>Change the text to “Not VR Friendly Text”</li>\n<li>Select the Canvas, change the Render Mode to Screen Space - Camera</li>\n</ul><h3 id=\"fixing-it\"><a href=\"#fixing-it\" aria-label=\"fixing it permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fixing it</h3><ul>\n<li>Select the Canvas, change the Render Mode to World Space</li>\n<li>Scale down the Canvas to 0.001, 0.001, 0.001</li>\n<li>Reset the position to 0, 2, 1</li>\n<li>Change the text of the Text node to “VR Friendly Text”</li>\n</ul><h3 id=\"making-a-bullet-display\"><a href=\"#making-a-bullet-display\" aria-label=\"making a bullet display permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Making a bullet display</h3><ul>\n<li>Move the Canvas component to a child of the gun</li>\n<li>Reset the position to 0, 0, 0 and then move and scale the canvas</li>\n<li>Change the text to 0</li>\n<li>Modify the <code class=\"language-text\">SimpleShoot</code> script to track the number of bullets:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">.</span>UI<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ShootIfGrabbed</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">MonoBehaviour</span>\n<span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">SimpleShoot</span> simpleShoot<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OVRGrabbable</span> ovrGrabbable<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OVRInput<span class=\"token punctuation\">.</span>Button</span> shootingButton<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> maxNumberOfBullets <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Text</span> bulletText<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Start is called before the first frame update</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        simpleShoot <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SimpleShoot</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        ovrGrabbable <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OVRGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        bulletText<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> maxNumberOfBullets<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Update is called once per frame</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ovrGrabbable<span class=\"token punctuation\">.</span>isGrabbed <span class=\"token operator\">&amp;&amp;</span> OVRInput<span class=\"token punctuation\">.</span><span class=\"token function\">GetDown</span><span class=\"token punctuation\">(</span>shootingButton<span class=\"token punctuation\">,</span> ovrGrabbable<span class=\"token punctuation\">.</span>grabbedBy<span class=\"token punctuation\">.</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> maxNumberOfBullets <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            simpleShoot<span class=\"token punctuation\">.</span><span class=\"token function\">TriggerShoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            bulletText<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> maxNumberOfBullets<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            maxNumberOfBullets<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Assign the Text component to the Bullet Text property</li>\n</ul><h3 id=\"make-an-interactable-button\"><a href=\"#make-an-interactable-button\" aria-label=\"make an interactable button permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make an interactable button</h3><ul>\n<li>Create another Canvas in the scene</li>\n<li>Add a Button to the Canvas</li>\n<li>Select the Canvas, change the Render Mode to World Space</li>\n<li>Scale down the Canvas to 0.001, 0.001, 0.001</li>\n<li>Reset the position to 0, 2, 1</li>\n<li>Select the Button change the scale to 4, 4, 1</li>\n<li>Select the Text node child of the Button</li>\n<li>Change the text to “More cubes!”</li>\n<li>Remove the Canvas Raycaster component from the Canvas</li>\n<li>Add the <code class=\"language-text\">OVR Raycaster</code> script to the Canvas</li>\n<li>Delete the <code class=\"language-text\">EventSystem</code> from the scene</li>\n<li>Search your project for <code class=\"language-text\">UIHelpers</code> and drag the prefab into the scene</li>\n<li>Drag the <code class=\"language-text\">LaserPointer</code> game object (in UIHelpers) to Pointer field of the <code class=\"language-text\">OVR Raycaster</code> component of the Canvas</li>\n<li>Set the Event Camera of the Canvas to the <code class=\"language-text\">CenterEyeAnchor</code> of the <code class=\"language-text\">TrackingSpace</code> in the <code class=\"language-text\">OVRPlayerController</code></li>\n</ul><h3 id=\"make-the-button-do-something\"><a href=\"#make-the-button-do-something\" aria-label=\"make the button do something permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Make the button do something</h3><ul>\n<li>Add a component to the Button game object called <code class=\"language-text\">MoreCubes</code> (new script)</li>\n<li>Once created, click the gear icon and Edit Script:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MoreCubes</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">MonoBehaviour</span>\n<span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">GameObject</span> cubePrefab<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Cube</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">Instantiate</span><span class=\"token punctuation\">(</span>cubePrefab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Drag the Cubes game object from the scene to the Assets in your project to create a prefab</li>\n<li>Drag the Cubes prefab to the <code class=\"language-text\">Cube Prefab</code> field of the <code class=\"language-text\">MoreCubes</code> script on the Button</li>\n<li>In the Button object’s Button Script click the <code class=\"language-text\">+</code> in the On Click() section</li>\n<li>Drag the <code class=\"language-text\">MoreCubes</code> script into the slot marked None</li>\n<li>Choose the <code class=\"language-text\">MoreCubes.Cube()</code> function</li>\n</ul><h3 id=\"add-raycasting\"><a href=\"#add-raycasting\" aria-label=\"add raycasting permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add Raycasting</h3><ul>\n<li>Select the Sphere under the <code class=\"language-text\">UIHelpers</code>object and increase the scale</li>\n<li>Select the <code class=\"language-text\">LaserPointer</code> check the box for the Line Renderer</li>\n<li>Change the width in Postions to 50% (0.005)</li>\n<li>In the <code class=\"language-text\">LaserPointer</code>, click on the gear icon of the Laser Pointer (Script) and choose Edit Script</li>\n<li>Add <code class=\"language-text\">[SerializeField]</code> to the <code class=\"language-text\">_laserBeamBehavior</code> private field:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">    <span class=\"token punctuation\">[</span><span class=\"token class-name\">SerializeField</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">LaserBeamBehavior</span> _laserBeamBehavior<span class=\"token punctuation\">;</span></code></pre></div><ul>\n<li>In the editor change the field to <code class=\"language-text\">On When Hit Target</code></li>\n</ul></section>\n<section><h2 id=\"how-to-make-a-vr-game-in-unity---part-5---controller-vibration\"><a href=\"#how-to-make-a-vr-game-in-unity---part-5---controller-vibration\" aria-label=\"how to make a vr game in unity   part 5   controller vibration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to make a VR game in Unity - Part 5 - Controller Vibration</h2>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <iframe src=\"https://www.youtube.com/embed/9KJqZBoc8m4\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe>\n          </div>\n          <h3 id=\"add-a-gunfire-sound\"><a href=\"#add-a-gunfire-sound\" aria-label=\"add a gunfire sound permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add a gunfire sound</h3><p>Unless you already have a Desert Eagle sound effect here are some good choices (search for them in the Asset Store):</p><ul>\n<li>Post Apocalypse Guns Demo by SOUND EARTH GAME AUDIO (AutoGun<em>1p</em>01.wav)</li>\n<li>Futuristic Gun SoundFX by MGWSOUNDDESIGN (GunShot9.wav)</li>\n<li>Fog of War Gun Sound FX Free by INTO THE VOID SOUND DESIGN (impacter.wav)</li>\n</ul><h3 id=\"setup-the-audio-source\"><a href=\"#setup-the-audio-source\" aria-label=\"setup the audio source permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup the Audio Source</h3><ul>\n<li>\n<p>Select the gun game object and add an Audio Source component</p>\n<ul>\n<li>Uncheck Play on Awake</li>\n<li>Set the Spatial Blend to 3D</li>\n</ul>\n</li>\n<li>Modify the <code class=\"language-text\">ShootIfGrabbed</code> script to add <code class=\"language-text\">shootingAudio</code>:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">.</span>UI<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ShootIfGrabbed</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">MonoBehaviour</span>\n<span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">SimpleShoot</span> simpleShoot<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OVRGrabbable</span> ovrGrabbable<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">OVRInput<span class=\"token punctuation\">.</span>Button</span> shootingButton<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> maxNumberOfBullets <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Text</span> bulletText<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AudioClip</span> shootingAudio<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Start is called before the first frame update</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        simpleShoot <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SimpleShoot</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        ovrGrabbable <span class=\"token operator\">=</span> <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OVRGrabbable</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        bulletText<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> maxNumberOfBullets<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Update is called once per frame</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ovrGrabbable<span class=\"token punctuation\">.</span>isGrabbed <span class=\"token operator\">&amp;&amp;</span> OVRInput<span class=\"token punctuation\">.</span><span class=\"token function\">GetDown</span><span class=\"token punctuation\">(</span>shootingButton<span class=\"token punctuation\">,</span> ovrGrabbable<span class=\"token punctuation\">.</span>grabbedBy<span class=\"token punctuation\">.</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> maxNumberOfBullets <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token generic-method\"><span class=\"token function\">GetComponent</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AudioSource</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">PlayOneShot</span><span class=\"token punctuation\">(</span>shootingAudio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            simpleShoot<span class=\"token punctuation\">.</span><span class=\"token function\">TriggerShoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            bulletText<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> maxNumberOfBullets<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            maxNumberOfBullets<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>maxNumberOfBullets <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> maxNumberOfBullets <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><h3 id=\"haptic-feedback\"><a href=\"#haptic-feedback\" aria-label=\"haptic feedback permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Haptic feedback</h3><ul>\n<li>Create an empty game object called Vibration Manager and reset the position</li>\n<li>Add a component to the object called <code class=\"language-text\">VibrationManager</code> (new script)</li>\n<li>Edit the <code class=\"language-text\">VibrationManager</code> script:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> UnityEngine<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">VibrationManager</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">MonoBehaviour</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">VibrationManager</span> singleton<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Start is called before the first frame update</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>singleton <span class=\"token operator\">&amp;&amp;</span> singleton <span class=\"token operator\">!=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">Destroy</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">{</span>\n            singleton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">TriggerVibration</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">AudioClip</span> vibrationAudio<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OVRInput<span class=\"token punctuation\">.</span>Controller</span> controller<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">OVRHapticsClip</span> clip <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OVRHapticsClip</span><span class=\"token punctuation\">(</span>vibrationAudio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>LTouch<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            OVRHaptics<span class=\"token punctuation\">.</span>LeftChannel<span class=\"token punctuation\">.</span><span class=\"token function\">Preempt</span><span class=\"token punctuation\">(</span>clip<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>RTouch<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            OVRHaptics<span class=\"token punctuation\">.</span>RightChannel<span class=\"token punctuation\">.</span><span class=\"token function\">Preempt</span><span class=\"token punctuation\">(</span>clip<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Edit the <code class=\"language-text\">ShootIfGrabbed</code> script and add the following line (just after the call to <code class=\"language-text\">PlayOneShot</code> in <code class=\"language-text\">Update</code>):</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">VibrationManager<span class=\"token punctuation\">.</span>singleton<span class=\"token punctuation\">.</span><span class=\"token function\">TriggerVibration</span><span class=\"token punctuation\">(</span>shootingAudio<span class=\"token punctuation\">,</span> ovrGrabbable<span class=\"token punctuation\">.</span>grabbedBy<span class=\"token punctuation\">.</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><h3 id=\"custom-haptic-clips\"><a href=\"#custom-haptic-clips\" aria-label=\"custom haptic clips permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom haptic clips</h3><ul>\n<li>Edit the <code class=\"language-text\">VibrationManager</code> script and add another version of the <code class=\"language-text\">TriggerVibration</code> method:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">TriggerVibration</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> iteration<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> frequency<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> strength<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OVRInput<span class=\"token punctuation\">.</span>Controller</span> controller<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">OVRHapticsClip</span> clip <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OVRHapticsClip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> iteration<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            clip<span class=\"token punctuation\">.</span><span class=\"token function\">WriteSample</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">%</span> frequency <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">?</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span> strength <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">byte</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>LTouch<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            OVRHaptics<span class=\"token punctuation\">.</span>LeftChannel<span class=\"token punctuation\">.</span><span class=\"token function\">Preempt</span><span class=\"token punctuation\">(</span>clip<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>controller <span class=\"token operator\">==</span> OVRInput<span class=\"token punctuation\">.</span>Controller<span class=\"token punctuation\">.</span>RTouch<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            OVRHaptics<span class=\"token punctuation\">.</span>RightChannel<span class=\"token punctuation\">.</span><span class=\"token function\">Preempt</span><span class=\"token punctuation\">(</span>clip<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div><ul>\n<li>Within the <code class=\"language-text\">ShootIfGrabbed</code> script, replace the call to <code class=\"language-text\">TriggerVibration</code> with:</li>\n</ul><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">VibrationManager<span class=\"token punctuation\">.</span>singleton<span class=\"token punctuation\">.</span><span class=\"token function\">TriggerVibration</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> ovrGrabbable<span class=\"token punctuation\">.</span>grabbedBy<span class=\"token punctuation\">.</span><span class=\"token function\">GetController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div></section>\n<section><h2 id=\"debugging-on-macos-and-the--button-in-unity\"><a href=\"#debugging-on-macos-and-the--button-in-unity\" aria-label=\"debugging on macos and the  button in unity permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging on MacOS and the ▶ button in Unity</h2><blockquote>\n<p>Note: the following is for Oculus Integration 1.39</p>\n</blockquote><p>To get setup:</p><ul>\n<li>Remove the Main Camera</li>\n<li>Set the Tracking Origin Type of the <code class=\"language-text\">OVRCameraRig</code> to <code class=\"language-text\">Stage</code></li>\n</ul><p>Click ▶ and you’ll see:</p><p><img src=\"https://rpl.cat/uploads/c0dZNeP43cqet2xhmGpuor6An9IL9R5G7wBq3dNJrpU/public.png\"></p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NullReferenceException: Object reference not set to an instance of an object\nOculusSampleFrameworkUtil.HandlePlayModeState (UnityEditor.PlayModeStateChange state) (at Assets/Oculus/SampleFramework/Editor/OculusSampleFrameworkUtil.cs:43)\nUnityEditor.EditorApplication.Internal_PlayModeStateChanged (UnityEditor.PlayModeStateChange state) (at /Users/builduser/buildslave/unity/build/Editor/Mono/EditorApplication.cs:302)</code></pre></div><p>This error is occuring because the <code class=\"language-text\">wrapperVersion</code> static variable is <code class=\"language-text\">null</code>. You could remove this line, but it will only lead to another problem down the line. Instead fix the <code class=\"language-text\">wrapperVersion</code> by changing this line (for me it is line 40) of <code class=\"language-text\">OVRPlugin.cs</code>:</p><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">readonly</span> <span class=\"token class-name\">System<span class=\"token punctuation\">.</span>Version</span> wrapperVersion <span class=\"token operator\">=</span> _versionZero<span class=\"token punctuation\">;</span></code></pre></div><p>to:</p><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">readonly</span> <span class=\"token class-name\">System<span class=\"token punctuation\">.</span>Version</span> wrapperVersion <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">System<span class=\"token punctuation\">.</span>Version</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><p>Changing this eliminates the error, but the OVR Headset Emulator script will not work. The problem is that the <code class=\"language-text\">OVRPlugin</code> is never initialized and therefore the <code class=\"language-text\">OVRManager</code> is never initialized. The <code class=\"language-text\">initialized</code> method (at line 893 for me) looks like:</p><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> initialized\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">get</span> <span class=\"token punctuation\">{</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> OVRPLUGIN_UNSUPPORTED_PLATFORM</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t\t<span class=\"token keyword\">return</span> OVRP_1_1_0<span class=\"token punctuation\">.</span><span class=\"token function\">ovrp_GetInitialized</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> OVRPlugin<span class=\"token punctuation\">.</span>Bool<span class=\"token punctuation\">.</span>True<span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div><p>The Unity Editor on Mac does not support the <code class=\"language-text\">OVRPlugin</code> (it is an unsupported platform). That’s fine, but let’s pretend it was initialized, even though it is unsupported (changing <code class=\"language-text\">return false</code> to <code class=\"language-text\">return true</code>):</p><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> initialized\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">get</span> <span class=\"token punctuation\">{</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> OVRPLUGIN_UNSUPPORTED_PLATFORM</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">else</span></span>\n\t\t\t<span class=\"token keyword\">return</span> OVRP_1_1_0<span class=\"token punctuation\">.</span><span class=\"token function\">ovrp_GetInitialized</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> OVRPlugin<span class=\"token punctuation\">.</span>Bool<span class=\"token punctuation\">.</span>True<span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div><p>With this, the ▶ button should work for some quicker debugging. Note: nothing is running on the Oculus when you use that button, it is all faked.</p><p>As of 1.39, when you are finished playing your scene the <code class=\"language-text\">OnDestroy</code> block will be called for <code class=\"language-text\">OvrAvatarSDKManager</code> (if you have a <code class=\"language-text\">LocalAvatar</code>).\nYou’ll see an error in the console (though it really doesn’t cause a problem). To fix it change:</p><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">    <span class=\"token keyword\">void</span> <span class=\"token function\">OnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        CAPI<span class=\"token punctuation\">.</span><span class=\"token function\">Shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        CAPI<span class=\"token punctuation\">.</span><span class=\"token function\">ovrAvatar_RegisterLoggingCallback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        CAPI<span class=\"token punctuation\">.</span><span class=\"token function\">ovrAvatar_Shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div><p>to:</p><div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\">    <span class=\"token keyword\">void</span> <span class=\"token function\">OnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        CAPI<span class=\"token punctuation\">.</span><span class=\"token function\">Shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">if</span> (UNITY_EDITOR_WIN || UNITY_STANDALONE_WIN || (UNITY_ANDROID &amp;&amp; !UNITY_EDITOR))</span>\n        CAPI<span class=\"token punctuation\">.</span><span class=\"token function\">ovrAvatar_RegisterLoggingCallback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        CAPI<span class=\"token punctuation\">.</span><span class=\"token function\">ovrAvatar_Shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token preprocessor property\">#<span class=\"token directive keyword\">endif</span></span>\n    <span class=\"token punctuation\">}</span></code></pre></div></section>\n<section><h2 id=\"seeing-what-is-happening-on-the-oculus-quest\"><a href=\"#seeing-what-is-happening-on-the-oculus-quest\" aria-label=\"seeing what is happening on the oculus quest permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Seeing what is happening on the Oculus Quest</h2><p>Building programs for the Rift was easier because you could debug everything that was happening in realtime. On the Quest you can’t but you can see what is happening on the device and view logs using <code class=\"language-text\">adb</code>, the Android Debug Bridge.</p><p>On a Mac, in a Terminal, run:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew cask <span class=\"token function\">install</span> android-platform-tools\nbrew <span class=\"token function\">install</span> scrcpy</code></pre></div><p>Once that is installed, attach your Oculus via USB-C and run:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">scrcpy -c <span class=\"token number\">1440</span>:1550:0:0</code></pre></div><p>This should attach a view for a single eye. If you want to see both eyes you can just use <code class=\"language-text\">scrcpy</code> <label for=\"sd-less-than-code\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-less-than-code\" class=\"margin-toggle\" /><span class=\"sidenote\"><code>scrcpy</code> or Screen-Copy is part of Genymobile and can be found <a href=\"https://github.com/Genymobile/scrcpy#mac-os\">https://github.com/Genymobile/scrcpy#mac-os</a>. There are options for other platforms as well. See also: <a href=\"https://note.mu/masaki_ponpoko/n/nc759f6499c79\">https://note.mu/masaki_ponpoko/n/nc759f6499c79</a></span>. If you get an error about the connection you can usually run:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb disconnect</code></pre></div><p>If that doesn’t work you can do the more extreme:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb kill-server</code></pre></div><p>And then run <code class=\"language-text\">scrcpy</code> again.</p><p>You can also connect to the Quest and see the logs.</p><p>For more information on using <code class=\"language-text\">adb</code> with the Oculus Quest you can follow the tutorial.</p><h3 id=\"checking-the-logs\"><a href=\"#checking-the-logs\" aria-label=\"checking the logs permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Checking the logs</h3><p>All of your <code class=\"language-text\">apk</code> files are running on the quest and you can’t really investigate what is happening\nthrough Unity. However, you check the logs from the Quest. The logs are verbose so it is sometimes\nhelpful to start by clearing them:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">adb logcat -c</code></pre></div><p>Then check them:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">adb logcat -d</code></pre></div><p>You can append to the log using <code class=\"language-text\">System.Debug</code> statements in your application.</p><h3 id=\"connecting-via-wi-fi\"><a href=\"#connecting-via-wi-fi\" aria-label=\"connecting via wi fi permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Connecting via Wi-fi</h3><p>First you’ll want to make sure that the device is connected via USB:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb devices</code></pre></div><p>Once you’ve got the device connected you can check it’s local IP address:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb shell <span class=\"token function\">ip</span> route</code></pre></div><p>Now setup <code class=\"language-text\">tcpip</code> for the connected device and tell it to listen on port <code class=\"language-text\">5555</code>:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb tcpip <span class=\"token number\">5555</span></code></pre></div><p>Once you’ve done this the device is still connected to USB and your computer is communicating via\nUSB but it is also listening for <code class=\"language-text\">tcpip</code> connections via Wi-Fi. Connect to it via Wi-Fi:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb connect <span class=\"token operator\">&lt;</span>ipaddress<span class=\"token operator\">></span>:5555</code></pre></div><p>At this point you can unplug the USB cable and you should still be able to work with the Quest via\n<code class=\"language-text\">adb</code> over Wi-Fi. For example:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb logcat -d</code></pre></div><p>If you want to explicitly connect to a particular Quest you can specify the server with <code class=\"language-text\">-s</code>:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb -s <span class=\"token operator\">&lt;</span>ipaddress<span class=\"token operator\">></span>:5555 logcat -d</code></pre></div><p>To go back to using USB, plug in the cable again and connect:</p><div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">adb connect usb</code></pre></div></section>\n<section><h2 id=\"more-learning\"><a href=\"#more-learning\" aria-label=\"more learning permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>More learning</h2><p>I’ve used other resources when learning. I’ll list some of them here:</p><ul>\n<li><a href=\"https://www.udemy.com/share/1000lMBkQac1dQRng=/\">The Ultimate Guide to Game Development with Unity 2019</a>. This course costs between $10-12 if you catch it on sale. I highly recommend it if you are just getting started. It clearly explains how to move around the Unity interface, how to move quickly, and basic concepts of scripting.</li>\n<li>Using the new Terrain Tools: <a href=\"https://blogs.unity3d.com/2019/05/28/speed-up-your-work-with-the-new-terrain-tools-package/\">Speed up your work with the new Terrain Tools Package</a>.</li>\n<li><a href=\"https://wiki.unrealengine.com/GitHub_Desktop_to_manage_your_project\">Using GitHub Desktop to Manage your Project</a> and <a href=\"https://www.youtube.com/watch?v=qpXxcvS-g3g\">How to use GitHub with Unity</a> (youtube).</li>\n</ul></section>","frontmatter":{"title":"Developing for the Oculus Quest","date":"July 25, 2019","image":{"childImageSharp":{"resize":{"src":"/static/47d85126ab81ecb18340ae67f881246e/85cf5/180924_Quest_FF_light_transparent_shadow.png"}}},"excerpt":"Everyone wants to talk about consumer VR. I just want to make some games."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/oculus-quest/","previous":{"fields":{"slug":"/gatsby-with-typescript/"},"frontmatter":{"tags":["javascript","typescript","node","gatsby"],"title":"Building a Static Gatsby-based Website with TypeScript"}},"next":null}}}