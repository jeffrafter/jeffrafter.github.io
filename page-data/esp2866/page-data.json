{"componentChunkName":"component---src-templates-post-tsx","path":"/esp2866/","result":{"data":{"site":{"siteMetadata":{"title":"Jeff Rafter"}},"markdownRemark":{"id":"267a8848-8e99-5cc9-9afe-49b6acb8a3f9","excerpt":"I’ve always wanted to be able to work with hardware and put together interesting and complex circuits in the same way\nI’ve been able to build software. Before I was a teenager my grandfather bought me the now classic\nGetting Started In Electronics which has been called The Greatest Electronics Book Ever Written. I struggled to\nunderstand it and never had the parts to try out the circuits; working instead with pencil and paper and ending up\nconfused. These days it is pretty easy to get lots of parts cheaply. Even better, I can rely on my understanding of software to\nbuild interesting things as part of far more complex circuits than I could have ever dreamed.  Buy some parts To get started it is good to have some electronics to play with. Get the following: ESP8266 NodeMCU: https://www.amazon.com/gp/product/B081CSJV2V ($13.99 pack of 3) Smraza Basic Starter Kit : https://www.amazon.com/Arduino-Starter-Tutorials-Compatible-Mega2560/dp/B01MATM4XF ($19.98) Micro USB cables: https://www.amazon.com/gp/product/B07V6GZ5GM ($7.99 pack of 5) Wall chargers (2.1A 5V): https://www.amazon.com/gp/product/B082TZZJZR ($9.99 pack of 3) You don’t need to buy multiples (often I buy three of each thing), but I’ve found I want to have multiple projects going at once. You might have micro-usb and wall chargers laying around which should be fine: just make sure they are 5V, ~2A  and that the cables are data cables.  Setup a circuit \n(designed on https://tinkercad.com) Setting up a breadboard like this makes it easy to test simple circuits without needing to solder anything. The breadboard has two sides and two power rails (unused in the above diagram). Each row is connected: for example row : , , ,  and  are all connected internally. Looking closely you’ll see that the board is seated with  in ,. This means that we can plug a jumper into ,  to connect it to the board. The gap running down the center of the breadboard separates the two sides of the board.  The , , , ,  slots are all connected and the   , , , ,   are all connected but they are not connected to each other. In order to connect them you have to “bridge” across. In the diagram above we bridge the ground wire directly but we use a resistor to bridge the power. This is because we don’t want the full power (5V or 3.3V depending on which pin we use) going into the LED - we would burn it up. The resistor limits the total power. There are different resistors for different power levels - which you need depends on your…","html":"<section><figure><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 388px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d66ad74bd8f0dfa6d39b287e754e135a/f465c/getting-started-in-electronics.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 128.86597938144328%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAXAQEAAwAAAAAAAAAAAAAAAAADAAEC/9oADAMBAAIQAxAAAAHptBSm0zFHCudyFRDJf//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhExEv/aAAgBAQABBQKU6XbOkaRochJiRLbLY9//xAAYEQACAwAAAAAAAAAAAAAAAAAAARAREv/aAAgBAwEBPwGzahn/xAAXEQEAAwAAAAAAAAAAAAAAAAABABAS/9oACAECAQE/ARm7/8QAGhAAAgMBAQAAAAAAAAAAAAAAEDEAASFBYf/aAAgBAQAGPwLH7KWmkhyMsf/EAB8QAQACAQQDAQAAAAAAAAAAAAEAEVEhMWFxEJGh4f/aAAgBAQABPyF0uU6ywI3yd+oUxRU1Tl0jXHjAH9jNbpErX6ljcQWWcj34v//aAAwDAQACAAMAAAAQG8IA/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhEf/aAAgBAwEBPxAKdmjSW3//xAAXEQEAAwAAAAAAAAAAAAAAAAARAAEQ/9oACAECAQE/EKBg3//EAB4QAQEBAAMAAgMAAAAAAAAAAAERACExQVFxgZHB/9oACAEBAAE/EJi+VaAXTwp1GPp3icF/TlpQpKfke6xRthENWcL0aAvnqd6Yc98mOkFPHKNS/DcUgU6j1iX9WSpVV9d//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Getting started in electronics\"\n        title=\"Getting started in electronics\"\n        src=\"/static/d66ad74bd8f0dfa6d39b287e754e135a/f465c/getting-started-in-electronics.jpg\"\n        srcset=\"/static/d66ad74bd8f0dfa6d39b287e754e135a/f562b/getting-started-in-electronics.jpg 320w,\n/static/d66ad74bd8f0dfa6d39b287e754e135a/f465c/getting-started-in-electronics.jpg 388w\"\n        sizes=\"(max-width: 388px) 100vw, 388px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></figure><figcaption>\nGetting Started in Electronics, by Forrest M. Mims, III.\n</figcaption><p>I’ve always wanted to be able to work with hardware and put together interesting and complex circuits in the same way\nI’ve been able to build software. Before I was a teenager my grandfather bought me the now classic\n<a href=\"https://www.amazon.com/gp/product/0945053282\">Getting Started In Electronics</a> which has been called <a href=\"https://mightyohm.com/blog/2008/12/the-greatest-electronics-book-ever-written/\">The Greatest Electronics Book Ever Written</a>. I struggled to\nunderstand it and never had the parts to try out the circuits; working instead with pencil and paper and ending up\nconfused.</p><p>These days it is pretty easy to get lots of parts cheaply. Even better, I can rely on my understanding of software to\nbuild interesting things as part of far more complex circuits than I could have ever dreamed.</p></section>\n<section><h2 id=\"buy-some-parts\"><a href=\"#buy-some-parts\" aria-label=\"buy some parts permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Buy some parts</h2><p>To get started it is good to have some electronics to play with. Get the following:</p><ul>\n<li>ESP8266 NodeMCU: <a href=\"https://www.amazon.com/gp/product/B081CSJV2V\">https://www.amazon.com/gp/product/B081CSJV2V</a> ($13.99 pack of 3)</li>\n<li>Smraza Basic Starter Kit : <a href=\"https://www.amazon.com/Arduino-Starter-Tutorials-Compatible-Mega2560/dp/B01MATM4XF\">https://www.amazon.com/Arduino-Starter-Tutorials-Compatible-Mega2560/dp/B01MATM4XF</a> ($19.98)</li>\n<li>Micro USB cables: <a href=\"https://www.amazon.com/gp/product/B07V6GZ5GM\">https://www.amazon.com/gp/product/B07V6GZ5GM</a> ($7.99 pack of 5)</li>\n<li>Wall chargers (2.1A 5V): <a href=\"https://www.amazon.com/gp/product/B082TZZJZR\">https://www.amazon.com/gp/product/B082TZZJZR</a> ($9.99 pack of 3)</li>\n</ul><p>You don’t need to buy multiples (often I buy three of each thing), but I’ve found I want to have multiple projects going at once. You might have micro-usb and wall chargers laying around which should be fine: just make sure they are 5V, ~2A  and that the cables are <em>data</em> cables.</p></section>\n<section><h2 id=\"setup-a-circuit\"><a href=\"#setup-a-circuit\" aria-label=\"setup a circuit permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup a circuit</h2><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 908px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.1453744493392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC20lEQVQ4y62Uy08TURTGMca9W4kExIRgNEg0YBBoLC2t0iJWY1SEhRCgFjWQsMctLgwx4S8wpGqDD5BaQSmdzvTNnUc7j3ZKacMWo3Hjo5N7vNNiMZElN/nlnDkz803OOV+mKq2qh6oO6BQKhXIiyXJbNBabCFDUKEXTTioY/I8gqdOhUIUgw4wRRgPB4Chi2ZF8Pn+soqwqytz3r99ASqWA5JAhqEoa1PQeGVnerSulXBHFEjKhkMtBbnPTUhGURWlWJTcQw/zYYGiNDdFanKK0SCCgRXcjF4tpQiJRgo/HtSTPawJCRRQOFyVBgNzWlqkiOO50vr5ht4P1kqF4xdiFu9qNuM9ixjd7rNhhMeFuQyeenn6MWY7DCLFYUBS8ODuL1zwejJJJnEwmYTObNZfEXr7wHCGC8Y4LrVB/vE4731QLDweOQse5ZrB1G8E1MkzyWhhwdALLCcAiBDwRWJ2fh6DXhxH5CM/zoKpqWTApZqopKvTrqt0GZ8804dbmRug1NYLZYIDb/XdhzPUITO2NMDFkAknOgCSR2ZH5xhMRYBMUluU0TpMZE8qC7nn34ZF7Q7GLLS1QX1OjNdSdgFMNp8HY1grDg/3Q13OZXJ8Em9UAoiSBQOYlEkFq+Q2gt89xSslgSV+QopgrM5yanPTcue4AW5exSGYHdpMRbvX2wMA1Oww67OCwWuDJzAykSKsicYJEhOlAADYYBvOCgPVapWX9IISe8RwHy++Xfn9aXcGrKyv4o8+Hvd4P2Of14s9uNw4tLODY4hKOvVssRfoVWQhF4QRCWPh3hvrJZrNPt7e3gZj7J0HTiUSjZSJRLUxiKBzWaIbRmFCoFPV7Gywqxsiz+pZzudyebdKSNPdlZ6fUkqKbdh/SuqkzmTJkCXpNN7W0n7EzotguRiJT3Nqai/OvP+D8/n3h19f/Ms77/eMkusg796V43LmZz1eX202lDuznkMtmq/4AYl6CVtUT/1cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ESP8266 LED circuit diagram\"\n        title=\"ESP8266 LED circuit diagram\"\n        src=\"/static/b81c0aafe2d25773ffbeee839a4d478c/b47b0/esp8266-blink.png\"\n        srcset=\"/static/b81c0aafe2d25773ffbeee839a4d478c/01387/esp8266-blink.png 320w,\n/static/b81c0aafe2d25773ffbeee839a4d478c/e49a9/esp8266-blink.png 640w,\n/static/b81c0aafe2d25773ffbeee839a4d478c/b47b0/esp8266-blink.png 908w\"\n        sizes=\"(max-width: 908px) 100vw, 908px\"\n        loading=\"lazy\"\n      />\n    </span>\n(designed on <a href=\"https://tinkercad.com\">https://tinkercad.com</a>)</p><p>Setting up a breadboard like this makes it easy to test simple circuits without needing to solder anything. The breadboard has two sides and two power rails (unused in the above diagram). Each row is connected: for example row <code class=\"language-text\">1</code>: <code class=\"language-text\">a</code>, <code class=\"language-text\">b</code>, <code class=\"language-text\">c</code>, <code class=\"language-text\">d,</code> and <code class=\"language-text\">e</code> are all connected internally. Looking closely you’ll see that the board is seated with <code class=\"language-text\">GND</code> in <code class=\"language-text\">2</code>,<code class=\"language-text\">c</code>. This means that we can plug a jumper into <code class=\"language-text\">2</code>, <code class=\"language-text\">b</code> to connect it to the board.</p><p>The gap running down the center of the breadboard separates the two sides of the board.  The <code class=\"language-text\">a</code>, <code class=\"language-text\">b</code>, <code class=\"language-text\">c</code>, <code class=\"language-text\">d</code>, <code class=\"language-text\">e</code> slots are all connected and the   <code class=\"language-text\">f</code>, <code class=\"language-text\">g</code>, <code class=\"language-text\">h</code>, <code class=\"language-text\">i</code>, <code class=\"language-text\">j</code>  are all connected but they are not connected to each other. In order to connect them you have to “bridge” across. In the diagram above we bridge the ground wire directly but we use a resistor to bridge the power. This is because we don’t want the full power (5V or 3.3V depending on which pin we use) going into the LED - we would burn it up. The resistor limits the total power.</p><p>There are different resistors for different power levels - which you need depends on your components, circuit, and amount of power. In this case we need a <code class=\"language-text\">220</code> Ω resistor. You can identify resistors by the bands on them - there is a helpful calculator here: <a href=\"https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-resistor-color-code-4-band\">https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-resistor-color-code-4-band</a></p><p>When using an LED there are a couple of things to remember: one of the pins on the LED is longer than the other. On a 2-pin LED the shorter pin is ground (<code class=\"language-text\">GND</code>). On an RGB LED there are 4 pins. Usually there is one pin that is longer and that pin is ground.</p></section>\n<section><h2 id=\"setting-up-arduino-command-line-interface\"><a href=\"#setting-up-arduino-command-line-interface\" aria-label=\"setting up arduino command line interface permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up Arduino command line interface</h2><p>Most people use the Arduino IDE. I tend to prefer my own editor and enjoy using the command line so I opted for the Arduino command line interface at <a href=\"https://github.com/arduino/arduino-cli\">https://github.com/arduino/arduino-cli</a>. I’m using a Mac, so I installed the CLI through homebrew:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">brew install arduino-cli</code></pre></div><p>Install the <code class=\"language-text\">esp8266</code> board</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">arduino-cli core update-index --additional-urls=http://arduino.esp8266.com/stable/package_esp8266com_index.json\narduino-cli core search esp8266 --additional-urls=http://arduino.esp8266.com/stable/package_esp8266com_index.json\narduino-cli core install esp8266:esp8266 --additional-urls=http://arduino.esp8266.com/stable/package_esp8266com_index.json</code></pre></div><p>Rad, you got this.</p><p>Refs: <a href=\"https://www.devdungeon.com/content/arduino-cli-tutorial\">https://www.devdungeon.com/content/arduino-cli-tutorial</a></p></section>\n<section><h2 id=\"build-and-run-a-sketch\"><a href=\"#build-and-run-a-sketch\" aria-label=\"build and run a sketch permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Build and run a sketch</h2><p>When working with Arduino devices (and their clones) you will often write a <em>sketch</em>. A sketch is just a program\nthat can be run on a device.</p><p>Create a sketch:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">arduino-cli sketch new blink</code></pre></div><p>Change into that folder:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd blink</code></pre></div><p>Inside the folder you should see a file called <code class=\"language-text\">blink.ino</code> - this is our main file. <code class=\"language-text\">INO</code>  files (the extension\ncomes from the last three letters in Arduino) is really just a special C++ format that (usually) has <code class=\"language-text\">setup</code>\nand <code class=\"language-text\">loop</code> functions that will be run by default.</p><p>In addition to the <code class=\"language-text\">blink.ino</code> file, we’ll setup a <code class=\"language-text\">package.json</code> to prepare some default scripts. I chose to use\na <code class=\"language-text\">package.json</code> file because I tend to integrate my hardware projects into node-based websites and tools and I know\nI’ll need it eventually anyway. This is not a requirement at all; you could use a <code class=\"language-text\">makefile</code> or just some default\nscripts (or again, the Arduino IDE).</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm init -y</code></pre></div><p>Let’s edit that. Change the contents to:</p><div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blink\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli compile --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"upload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli upload -p /dev/cu.usbserial-0001 --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>If you aren’t sure which port to use you can run <code class=\"language-text\">arduino-cli board list</code>. On a Mac you’ll see a list of <code class=\"language-text\">tty</code> and <code class=\"language-text\">cu</code>.</p><p>Here I am using <code class=\"language-text\">nodemcuv2</code> which matches my specific <code class=\"language-text\">esp8266</code> (this information can be found when you purchase the board). You can see all of the available board profiles by running <code class=\"language-text\">arduino-cli board listall</code>. I’ve also set the <code class=\"language-text\">baud</code> to <code class=\"language-text\">115200</code> - this tends to be the most reliable upload and transmit speed for my device.</p><p>The new sketch has a default <code class=\"language-text\">blink.ino</code> file. By default this doesn’t do anything. Change the code to:</p><div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>Save the code then compile it:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run compile</code></pre></div><p>Upload it to the device:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run upload</code></pre></div><p>You should see the output:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&gt; blink@1.0.0 upload blink\n&gt; arduino-cli upload -p /dev/cu.usbserial-0001 --fqbn esp8266:esp8266:nodemcuv2:baud=115200\n\nNo new serial port detected.\nesptool.py v2.8\nSerial port /dev/cu.usbserial-0001\nConnecting....\nChip is ESP8266EX\nFeatures: WiFi\nCrystal is 26MHz\nMAC: c8:2b:96:1e:26:d8\nUploading stub...\nRunning stub...\nStub running...\nConfiguring flash size...\nAuto-detected Flash size: 4MB\nCompressed 266192 bytes to 196120...\nWrote 266192 bytes (196120 compressed) at 0x00000000 in 17.3 seconds (effective 123.0 kbit/s)...\nHash of data verified.\n\nLeaving...\nHard resetting via RTS pin...</code></pre></div><p>You should see the LED blinking.<label for=\"sd-this-simple-blink\" class=\"margin-toggle sidenote-number\"></label><input type=\"checkbox\" id=\"sd-this-simple-blink\" class=\"margin-toggle\" /><span class=\"sidenote\">This simple blink sketch came directly from <a href=\"https://github.com/mikekavouras\">@mikekavouras</a> who has</span></p><p>helped me to understand the details of hardware hacking so consistently.</p><h3 id=\"troubleshooting\"><a href=\"#troubleshooting\" aria-label=\"troubleshooting permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Troubleshooting</h3><p>Lots of things can go wrong when you are trying your first projects. Here are a few:</p><p><em>Upload failed</em></p><p>For some of these devices you can press the <code class=\"language-text\">RST</code> button on board to reset them. In other cases you need to unplug and plug it back in to reset it. If you are seeing a bad upload (but it worked at least once) there is a good chance that turning it off and back on will fix the problem.</p><ul>\n<li>Wrong port - it is possible you selected the wrong port when uploading; try unplugging your USB cable and running <code class=\"language-text\">arduino board list</code>, then plug in the cable and run it again. The port you want is the one that appears the the second time you run the command.</li>\n<li>Bad cable - If the upload starts to work and fails, you might have a bad micro-usb cable. Are you sure that the cable you selected is a data cable (not just a charging cable)? Try another cable and see if it helps.</li>\n<li>Bad board - you might have a bad board (though unlikely) - when you plug it in you should see a quick blink from the onboard LED. If you aren’t seeing this then the board might be bad. To test it, try setting up the LED power from <code class=\"language-text\">VIN</code> instead of <code class=\"language-text\">D1</code>: if the board is getting powered you should see the LED light.</li>\n<li>Flash mode broken - In some cases you need to hold the <code class=\"language-text\">FLASH</code> button onboard while flashing (see <a href=\"https://randomnerdtutorials.com/solved-failed-to-connect-to-esp32-timed-out-waiting-for-packet-header/\">https://randomnerdtutorials.com/solved-failed-to-connect-to-esp32-timed-out-waiting-for-packet-header/</a>). I haven’t needed to do this with any modern firmware or any of my boards but if you have an old board it might be worth a shot.</li>\n</ul><p><em>Light is not blinking</em></p><p>If the upload is working but the light isn’t blinking it is usually a problem with the circuit. Double check the diagram and make sure everything is setup correctly.</p><ul>\n<li>LED - you might have a bad/burned LED. If you have another just swap it out and try again.</li>\n<li>Resistor - double check that you picked the right resistor for your LED - maybe you grabbed a 220K Ω instead of a 220 Ω. Double check that you have a <code class=\"language-text\">red</code>, <code class=\"language-text\">red</code>,  <code class=\"language-text\">violet</code> , <code class=\"language-text\">gold</code> (<a href=\"https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-resistor-color-code-4-band\">https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-resistor-color-code-4-band</a>).</li>\n<li>Wires - you might have a bad jumper wire or connection; I’ve had this happen a couple of times. You can check the continuity with a multimeter.</li>\n<li>Wrong pin selected - if you selected a board model that didn’t exactly match then there is a chance the the <code class=\"language-text\">D1</code> constant is not set correctly (the number is different for different boards). Double check that the value for <code class=\"language-text\">D1</code> is right (mine is <code class=\"language-text\">5</code>); recompile and re-upload.</li>\n</ul><p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 416px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84e3a2797b2c11746f73f1c23dafcb8f/59a95/esp8266-resistor.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.33653846153846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQoz62RS09aURDH2WlidO3KvdG4ceOH6KJJY2Nc9Bs0TWua9As0fSzcixGhiY97MW0XtqYPizY2laatooAgIAhckMvrSgkiAr+ee4BoH4su+k/+d+bMnfOfMzOWZrNJEwFhG4J1/h0iXdwxbVPShOXq4STgI/j4IZlkjLxnB8MoUCzkODXyHMey6Jm89I2C4GmJmHcDr2uWSrXWLtBsCZooVc8Ibb4lMDlO4ssm3ps30JJhEhE/2dQBz2we3FtestqBiPlIi6LhbYXdlfto2gn1+sXlC03kSqcEPqwRuDVJ3L3B/vVrJBOHxEP76EkfNusOnz/uST8e3iOVOCLiVvE8f8BR9Jha7fyKYFtU83zHf+8O6VCA9MsXGMU8xXxWtKmzu6MRj2UoFXOiZZ2iYRD+9prdV08pV84uW+44Jhr1Ouelcutney4dXPxlW+atWrXSFmtcWUqjdailUpxMT1PxiRk9ecp5JiPjkVCJ9fcZPm1lScRbBavlAtrXRRJuB7lD128vFIKmZNnvJzQxQWFtjcPxcX54fTJx/Z3GrDWM3RbBva3LmJEOsafeZn/lLsE3j/7c8v/ALzN0uVwsLiygLi2hLC9L63Q6UZ0qqmrSiaI4pTXjiqKIPJGrLLO0uEA0Gm3N0Pzous7AwABdXV309vbS3d1Nf38/Y2NjDA8PMzQ0xOjoKCMjI9IfHBykp6dHsq+vD4vFwtTU1KVgQ8xwdXWVmZkZbDYbc3Nzkna7HYfDIW2H8/Pzkp0ck1arlWAwKAV/AhfnO2rf1AfPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"220Ω resistor\"\n        title=\"220Ω resistor\"\n        src=\"/static/84e3a2797b2c11746f73f1c23dafcb8f/59a95/esp8266-resistor.png\"\n        srcset=\"/static/84e3a2797b2c11746f73f1c23dafcb8f/01387/esp8266-resistor.png 320w,\n/static/84e3a2797b2c11746f73f1c23dafcb8f/59a95/esp8266-resistor.png 416w\"\n        sizes=\"(max-width: 416px) 100vw, 416px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p></section>\n<section><h2 id=\"debugging-and-serial\"><a href=\"#debugging-and-serial\" aria-label=\"debugging and serial permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging and Serial</h2><p>When developing programs it is often helpful to add debugging output. Unfortunately our program will be running on our\ndevice - in order to see the output we’ll need to attach to the serial output. Lets change our sketch:</p><div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Open the serial port and set the baud rate to 9600</span>\n\tSerial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">9600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tSerial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Blinking on\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tSerial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Blinking off\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>We’ve added some <code class=\"language-text\">println</code> commands to output text when the the light blinks. Save and compile:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run compile</code></pre></div><p>Upload the compiled binary to the device:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run upload</code></pre></div><p>Just like before the light is blinking - but we’re not seeing any output. There are a couple of ways to see what’s\nhappening, but the easiest is to use <code class=\"language-text\">cat</code> on the port:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cat /dev/cu.usbserial-0001</code></pre></div><p>To stop it, type <code class=\"language-text\">Ctrl+C</code>. Let’s turn this into a command in our <code class=\"language-text\">package.json</code>:</p><div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blink\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli compile --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"upload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli upload -p /dev/cu.usbserial-0001 --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"listen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cat /dev/cu.usbserial-0001\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>Now we can run:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run listen</code></pre></div><p>But what if you want the device to <em>read</em> data from serial. In that case <code class=\"language-text\">cat</code> will not work. There are a number of ways\nstart an interactive <code class=\"language-text\">TTY</code> but the easiest is <code class=\"language-text\">screen</code>. Let’s modify our sketch:</p><div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">int</span> blinking <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Open the serial port and set the baud rate to 9600</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">9600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>blinking<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Blinking on\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Blinking off\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>D1<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Serial<span class=\"token punctuation\">.</span><span class=\"token function\">available</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">int</span> value <span class=\"token operator\">=</span> Serial<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">==</span> <span class=\"token string\">'y'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Start blinking\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      blinking <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Stop blinking\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      blinking <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>By default when the sketch starts the LED should be blinking. If we receive serial input the behavior changes: if\nthe input is anything other than a <code class=\"language-text\">y</code> (we only check a byte at a time) then we stop blinking. If it is a <code class=\"language-text\">y</code> we\nstart it again.</p><p>Make sure you have stopped <code class=\"language-text\">cat</code> (or <code class=\"language-text\">npm run listen</code>). Then save the changes and compile:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run compile</code></pre></div><p>And upload to the device:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run upload</code></pre></div><p>Next run:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">screen /dev/cu.usbserial-0001 9600</code></pre></div><p>This will start an interactive <code class=\"language-text\">screen</code> session. You should immediately see the output again. Typing characters into\nthis session will send the output over the serial connection to the device. If you type <code class=\"language-text\">y</code> the LED should blink and\nyou should see some output. Typing any other character will stop the blinking.</p><p>It is possible to detach and re-attach to screen sessions and even name them - though that probably isn’t needed for\nour purposes. A full tutorial can be found at <a href=\"http://www.kinnetica.com/2011/05/29/using-screen-on-mac-os-x/\">http://www.kinnetica.com/2011/05/29/using-screen-on-mac-os-x/</a>.</p><p>To exit the running screen session type: <code class=\"language-text\">Ctrl+A</code> followed by <code class=\"language-text\">Ctrl+\\</code>.</p><p>This command can be tough to remember, let’s change <code class=\"language-text\">package.json</code> again:</p><div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blink\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli compile --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"upload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli upload -p /dev/cu.usbserial-0001 --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"listen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cat /dev/cu.usbserial-0001\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"screen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo '[Starting screen, press Ctrl+A Ctrl+\\\\ to exit]' &amp;&amp; sleep 2 &amp;&amp; screen /dev/cu.usbserial-0001 9600\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>Now, if we need to be able to pass input to the device over serial we can run:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run screen</code></pre></div><p>Notice the short reminder on how to exit <code class=\"language-text\">screen</code>? I add that to the command because I always forget it and end up\nhopelessly trapped in a <code class=\"language-text\">screen</code> session.</p><h4 id=\"references\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h4><ul>\n<li><a href=\"https://www.arduino.cc/reference/en/language/functions/communication/serial/read\">https://www.arduino.cc/reference/en/language/functions/communication/serial/read</a></li>\n<li><a href=\"http://www.kinnetica.com/2011/05/29/using-screen-on-mac-os-x/\">http://www.kinnetica.com/2011/05/29/using-screen-on-mac-os-x/</a></li>\n</ul><h1 id=\"improving-the-developer-experience\"><a href=\"#improving-the-developer-experience\" aria-label=\"improving the developer experience permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Improving the developer experience</h1><p>So far the <code class=\"language-text\">package.json</code> has been useful for hiding away the complexity of some commands we want to run; but we still\nhave to remember which commands to run. Let’s add a <code class=\"language-text\">start</code> script to batch some of them together:</p><div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blink\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli compile --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"upload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli upload -p /dev/cu.usbserial-0001 --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"listen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cat /dev/cu.usbserial-0001\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"screen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo '[Starting screen, press Ctrl+A Ctrl+\\\\ to exit]' &amp;&amp; sleep 2 &amp;&amp; screen /dev/cu.usbserial-0001 9600\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run compile &amp;&amp; npm run upload &amp;&amp; npm run listen\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>This <code class=\"language-text\">start</code> command runs our main three scripts, stopping if any of the steps fail.</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm start</code></pre></div><p>This should compile, upload and then start listening (to stop this, type <code class=\"language-text\">Ctrl+C</code>).</p><p>We still haven’t leveraged any node modules. To improve the development experience we’ll create a new command to watch\nour files and when we save changes we’ll have it automatically restart.</p><blockquote>\n<p>Again: we don’t have to use node or node modules for this; I just happen to have them already installed.</p>\n</blockquote><p>Install the <code class=\"language-text\">nodemon</code> package to your development dependencies:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install --save-dev nodemon</code></pre></div><p>The <code class=\"language-text\">nodemon</code> package allows you to monitor files and execute a program when those files change. Let’s add another\nscript to the <code class=\"language-text\">package.json</code> called <code class=\"language-text\">watch</code>:</p><div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blink\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"compile\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli compile --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"upload\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"arduino-cli upload -p /dev/cu.usbserial-0001 --fqbn esp8266:esp8266:nodemcuv2:baud=115200\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"listen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cat /dev/cu.usbserial-0001\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"screen\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo '[Starting screen, press Ctrl+A Ctrl+\\\\ to exit]' &amp;&amp; sleep 2 &amp;&amp; screen /dev/cu.usbserial-0001 9600\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run compile &amp;&amp; npm run upload &amp;&amp; npm run listen\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token property\">\"watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nodemon --ext ino --exec npm start\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>Run it:</p><div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run watch</code></pre></div><p>This will immediately kick off the <code class=\"language-text\">npm start</code> process and continue outputting data from the <code class=\"language-text\">listen</code> script. Make\na change to the sketch (maybe change the blink delay milliseconds to be shorter or longer) and save the file. You’ll\nnotice the <code class=\"language-text\">listen</code> output stop while the code is recompiled and re-uploaded. Although it is not fast to restart\n(uploading takes about 30 seconds) having it work in the background can make your development more iterative.</p><h1 id=\"still-getting-started\"><a href=\"#still-getting-started\" aria-label=\"still getting started permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Still getting started</h1><p>Getting started with hardware has always been a challenge for me. The simple things feel difficult and it is hard to\nknow what to do when you make a mistake. With these small pieces, however, it is possible to build an incredible number\nof interesting and complex circuits that can interact with the real world.</p></section>","frontmatter":{"title":"Getting started with ESP8266 and Arduino","date":"May 20, 2020","image":{"childImageSharp":{"resize":{"src":"/static/d66ad74bd8f0dfa6d39b287e754e135a/b3ea4/getting-started-in-electronics.jpg"}}},"excerpt":"Understanding the basics of hardware can open new projects and new possibilities and it is more accessible and inexpensive than ever."}}},"pageContext":{"slug":"/esp2866/","previous":{"fields":{"slug":"/releasing-github-actions/"},"frontmatter":{"tags":["typescript","github","actions","honk","goose"],"title":"Releasing GitHub Actions"}},"next":null}}}